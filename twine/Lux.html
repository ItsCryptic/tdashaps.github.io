<!DOCTYPE html>
<!-- saved from url=(0066)http://ifarchive.org/if-archive/games/competition2018/Lux/Lux.html -->
<html data-tags="menu"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Lux</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<!--

SugarCube (v2.18.0): A free (gratis and libre) story format.

Copyright © 2013–2017 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
if("document" in self){if(!("classList" in document.createElement("_"))){(function(j){"use strict";if(!("Element" in j)){return}var a="classList",f="prototype",m=j.Element[f],b=Object,k=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array[f].indexOf||function(q){var p=0,o=this.length;for(;p<o;p++){if(p in this&&this[p]===q){return p}}return -1},n=function(o,p){this.name=o;this.code=DOMException[o];this.message=p},g=function(p,o){if(o===""){throw new n("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(o)){throw new n("INVALID_CHARACTER_ERR","String contains an invalid character")}return c.call(p,o)},d=function(s){var r=k.call(s.getAttribute("class")||""),q=r?r.split(/\s+/):[],p=0,o=q.length;for(;p<o;p++){this.push(q[p])}this._updateClassName=function(){s.setAttribute("class",this.toString())}},e=d[f]=[],i=function(){return new d(this)};n[f]=Error[f];e.item=function(o){return this[o]||null};e.contains=function(o){o+="";return g(this,o)!==-1};e.add=function(){var s=arguments,r=0,p=s.length,q,o=false;do{q=s[r]+"";if(g(this,q)===-1){this.push(q);o=true}}while(++r<p);if(o){this._updateClassName()}};e.remove=function(){var t=arguments,s=0,p=t.length,r,o=false,q;do{r=t[s]+"";q=g(this,r);while(q!==-1){this.splice(q,1);o=true;q=g(this,r)}}while(++s<p);if(o){this._updateClassName()}};e.toggle=function(p,q){p+="";var o=this.contains(p),r=o?q!==true&&"remove":q!==false&&"add";if(r){this[r](p)}if(q===true||q===false){return q}else{return !o}};e.toString=function(){return this.join(" ")};if(b.defineProperty){var l={get:i,enumerable:true,configurable:true};try{b.defineProperty(m,a,l)}catch(h){if(h.number===-2146823252){l.enumerable=false;b.defineProperty(m,a,l)}}}else{if(b[f].__defineGetter__){m.__defineGetter__(a,i)}}}(self))}else{(function(){var b=document.createElement("_");b.classList.add("c1","c2");if(!b.classList.contains("c2")){var c=function(e){var d=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(h){var g,f=arguments.length;for(g=0;g<f;g++){h=arguments[g];d.call(this,h)}}};c("add");c("remove")}b.classList.toggle("c3",false);if(b.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(d,e){if(1 in arguments&&!this.contains(d)===!e){return e}else{return a.call(this,d)}}}b=null}())}};
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.9/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},j=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},E="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return j(t)}if(O(t)){return false}var r=T.call(t);return r===E||r===I};var M;var U=RegExp.prototype.exec,F=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},N="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?F(t):T.call(t)===N};var C;var k=String.prototype.valueOf,A=function tryStringObject(t){try{k.call(t);return true}catch(r){return false}},R="[object String]";C=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?A(t):T.call(t)===R};var P=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var $=function(t){var r;if(P){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var Z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var z=function Empty(){};$(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){z.prototype=r.prototype;a.prototype=new z;z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var B=d.bind(n.toString);var H=d.bind(s);var W=g.bind(s);var L=d.bind(f.slice);var X=d.bind(f.split);var q=d.bind(f.indexOf);var K=d.bind(v);var Q=d.bind(n.propertyIsEnumerable);var V=d.bind(r.sort);var _=t.isArray||function isArray(t){return B(t)==="[object Array]"};var tt=[].unshift(0)!==1;$(r,{unshift:function(){h.apply(this,arguments);return this.length}},tt);$(t,{isArray:_});var rt=e("a");var et=rt[0]!=="a"||!(0 in rt);var nt=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};$(r,{forEach:function forEach(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=-1;var i=Z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!nt(r.forEach));$(r,{map:function map(r){var e=Z.ToObject(this);var n=et&&C(this)?X(this,""):e;var i=Z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!nt(r.map));$(r,{filter:function filter(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){K(i,a)}}}return i}},!nt(r.filter));$(r,{every:function every(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!nt(r.every));$(r,{some:function some(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!nt(r.some));var it=false;if(r.reduce){it=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}$(r,{reduce:function reduce(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!it);var at=false;if(r.reduceRight){at=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}$(r,{reduceRight:function reduceRight(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!at);var ot=r.indexOf&&[0,1].indexOf(1,2)!==-1;$(r,{indexOf:function indexOf(t){var r=et&&C(this)?X(this,""):Z.ToObject(this);var e=Z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=Z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},ot);var ft=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;$(r,{lastIndexOf:function lastIndexOf(t){var r=et&&C(this)?X(this,""):Z.ToObject(this);var e=Z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,Z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},ft);var ut=function(){var t=[1,2];var r=t.splice();return t.length===2&&_(r)&&r.length===0}();$(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ut);var lt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();$(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(Z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=H(arguments);if(e.length<2){K(e,this.length-t)}else{e[1]=Z.ToInteger(r)}}return c.apply(this,e)}},!lt);var st=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var ct=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();$(r,{splice:function splice(t,r){var e=Z.ToObject(this);var n=[];var i=Z.ToUint32(e.length);var a=Z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=b(w(Z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=H(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!st||!ct);var vt=r.join;var ht;try{ht=Array.prototype.join.call("123",",")!=="1,2,3"}catch(pt){ht=true}if(ht){$(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return vt.call(C(this)?X(this,""):this,r)}},ht)}var yt=[1,2].join(undefined)!=="1,2";if(yt){$(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return vt.call(this,r)}},yt)}var dt=function push(t){var r=Z.ToObject(this);var e=Z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var gt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();$(r,{push:function push(t){if(_(this)){return v.apply(this,arguments)}return dt.apply(this,arguments)}},gt);var wt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();$(r,{push:dt},wt);$(r,{slice:function(t,r){var e=C(this)?X(this,""):this;return W(e,arguments)}},et);var bt=function(){try{[1,2].sort(null);[1,2].sort({});return true}catch(t){}return false}();var Tt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var mt=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();$(r,{sort:function sort(t){if(typeof t==="undefined"){return V(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return V(this,t)}},bt||!mt||!Tt);var Dt=!Q({toString:null},"toString");var St=Q(function(){},"prototype");var xt=!G("x","0");var Ot=function(t){var r=t.constructor;return r&&r.prototype===t};var jt={$window:true,$console:true,$parent:true,$self:true,$frame:true,$frames:true,$frameElement:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$external:true};var Et=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!jt["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){Ot(window[t])}}catch(r){return true}}return false}();var It=function(t){if(typeof window==="undefined"||!Et){return Ot(t)}try{return Ot(t)}catch(r){return false}};var Mt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ut=Mt.length;var Ft=function isArguments(t){return B(t)==="[object Arguments]"};var Nt=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!_(t)&&D(t.callee)};var Ct=Ft(arguments)?Ft:Nt;$(e,{keys:function keys(t){var r=D(t);var e=Ct(t);var n=t!==null&&typeof t==="object";var i=n&&C(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=St&&r;if(i&&xt||e){for(var u=0;u<t.length;++u){K(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){K(a,o(l))}}}if(Dt){var s=It(t);for(var c=0;c<Ut;c++){var v=Mt[c];if(!(s&&v==="constructor")&&G(t,v)){K(a,v)}}}return a}});var kt=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var At=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Rt=e.keys;$(e,{keys:function keys(t){if(Ct(t)){return Rt(H(t))}else{return Rt(t)}}},!kt||At);var Pt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var $t=new Date(-0x55d318d56a724);var Jt=new Date(14496624e5);var Yt=$t.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Zt;var zt;var Gt=$t.getTimezoneOffset();if(Gt<-720){Zt=$t.toDateString()!=="Tue Jan 02 -45875";zt=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Jt.toString())}else{Zt=$t.toDateString()!=="Mon Jan 01 -45875";zt=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Jt.toString())}var Bt=d.bind(Date.prototype.getFullYear);var Ht=d.bind(Date.prototype.getMonth);var Wt=d.bind(Date.prototype.getDate);var Lt=d.bind(Date.prototype.getUTCFullYear);var Xt=d.bind(Date.prototype.getUTCMonth);var qt=d.bind(Date.prototype.getUTCDate);var Kt=d.bind(Date.prototype.getUTCDay);var Qt=d.bind(Date.prototype.getUTCHours);var Vt=d.bind(Date.prototype.getUTCMinutes);var _t=d.bind(Date.prototype.getUTCSeconds);var tr=d.bind(Date.prototype.getUTCMilliseconds);var rr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var er=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var nr=function daysInMonth(t,r){return Wt(new Date(r,t,0))};$(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Ht(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Ht(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Ht(this);var e=Wt(this);if(t<0&&r>11){if(r===12){return e}var n=nr(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Lt(this);if(t<0&&Xt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Lt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Lt(this);var r=Xt(this);var e=qt(this);if(t<0&&r>11){if(r===12){return e}var n=nr(0,t+1);return n-e+1}return e}},Pt);$(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Kt(this);var r=qt(this);var e=Xt(this);var n=Lt(this);var i=Qt(this);var a=Vt(this);var o=_t(this);return rr[t]+", "+(r<10?"0"+r:r)+" "+er[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Pt||Yt);$(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return rr[t]+" "+er[e]+" "+(r<10?"0"+r:r)+" "+n}},Pt||Zt);if(Pt||zt){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return rr[t]+" "+er[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(P){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var ir=-621987552e5;var ar="-000001";var or=Date.prototype.toISOString&&new Date(ir).toISOString().indexOf(ar)===-1;var fr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var ur=d.bind(Date.prototype.getTime);$(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(ur(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=Lt(this);var r=Xt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,qt(this),Qt(this),Vt(this),_t(this)];t=(t<0?"-":t>9999?"+":"")+L("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=L("00"+e[n],-2)}return t+"-"+H(e,0,2).join("-")+"T"+H(e,2).join(":")+"."+L("000"+tr(this),-3)+"Z"}},or||fr);var lr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(ir).toJSON().indexOf(ar)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!lr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=Z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var sr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var cr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var vr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(vr||cr||!sr){var hr=Math.pow(2,31)-1;var pr=Y(new Date(1970,0,1,0,0,0,hr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(pr&&s>=7&&l>hr){var p=Math.floor(l/hr)*hr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){$(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(pr&&n>hr){var i=Math.floor(n/hr)*hr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}$(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;$(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};$(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var yr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128");var dr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<dr.size){n+=t*dr.data[e];dr.data[e]=n%dr.base;n=Math.floor(n/dr.base)}},divide:function divide(t){var r=dr.size;var e=0;while(--r>=0){e+=dr.data[r];dr.data[r]=Math.floor(e/t);e=e%t*dr.base}},numToString:function numToString(){var t=dr.size;var r="";while(--t>=0){if(r!==""||t===0||dr.data[t]!==0){var e=o(dr.data[t]);if(r===""){r=e}else{r+=L("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var gr=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=dr.log(e*dr.pow(2,69,1))-69;f=a<0?e*dr.pow(2,-a,1):e/dr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){dr.multiply(0,f);l=r;while(l>=7){dr.multiply(1e7,0);l-=7}dr.multiply(dr.pow(10,l,1),0);l=a-1;while(l>=23){dr.divide(1<<23);l-=23}dr.divide(1<<l);dr.multiply(1,1);dr.divide(2);i=dr.numToString()}else{dr.multiply(0,f);dr.multiply(1<<-a,0);i=dr.numToString()+L("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+L("0.0000000000000000000",0,r-s+2)+i}else{i=n+L(i,0,s-r)+"."+L(i,s-r)}}else{i=n+i}return i};$(l,{toFixed:gr},yr);var wr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var br=l.toPrecision;$(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?br.call(this):br.call(this,t)}},wr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return X(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:Z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){K(a,L(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,H(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){K(a,"")}}else{K(a,L(i,f))}return a.length>p?H(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return X(this,t,r)}}var Tr=f.replace;var mr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){K(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!mr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Tr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;K(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Tr.call(this,t,i)}}}var Dr=f.substr;var Sr="".substr&&"0b".substr(-1)!=="b";$(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return Dr.call(this,e,r)}},Sr);var xr="	\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var Or="\u200b";var jr="["+xr+"]";var Er=new RegExp("^"+jr+jr+"*");var Ir=new RegExp(jr+jr+"*$");var Mr=f.trim&&(xr.trim()||!Or.trim());$(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Er,"").replace(Ir,"")}},Mr);var Ur=d.bind(String.prototype.trim);var Fr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;$(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:Z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=q(L(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Fr);var Nr=f.lastIndexOf;$(f,{lastIndexOf:function lastIndexOf(t){return Nr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(xr+"08")!==8||parseInt(xr+"0x16")!==22){parseInt=function(t){var r=/^[\-+]?0[xX]/;return function parseInt(e,n){var i=Ur(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Ur(String(r));var n=t(e);return n===0&&L(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var Cr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=Cr}if(P){var kr=function(t,r){if(Q(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};kr(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}kr(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Ar=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Ar}});
//# sourceMappingURL=es5-shim.map
/*!
  * https://github.com/paulmillr/es6-shim
  * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
  *   and contributors,  MIT License
  * es6-shim: v0.35.3
  * see https://github.com/paulmillr/es6-shim/blob/0.35.1/LICENSE
  * Details and documentation:
  * https://github.com/paulmillr/es6-shim/
  */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(e){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(e){return false}};var u=o(i);var f=function(){return!i(function(){Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var F=Math.exp;var L=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function isArguments(e){return g(e)==="[object Arguments]"};var Q=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var ee=Y(arguments)?Y:Q;var te={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var re=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var ne=typeof $==="function"&&typeof $["for"]==="function"&&te.symbol($());var oe=te.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){oe="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ie=S.Reflect;var ae=String;var ue=typeof document==="undefined"||!document?null:document.all;var fe=ue==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==ue};var se={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!se.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(fe(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===ue},ToObject:function(e,t){return Object(se.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return se.IsCallable(e)},ToInt32:function(e){return se.ToNumber(e)>>0},ToUint32:function(e){return se.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=se.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=se.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return se.TypeIsObject(e)&&(typeof e[oe]!=="undefined"||ee(e))},GetIterator:function(e){if(ee(e)){return new q(e,"value")}var t=se.GetMethod(e,oe);if(!se.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=se.Call(t,e);if(!se.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=se.ToObject(e)[t];if(fe(r)){return void 0}if(!se.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=se.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=se.Call(r,e)}catch(e){o=e}if(t){return}if(o){throw o}if(!se.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!se.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=se.IteratorNext(e);var r=se.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ie.construct){return ie.construct(e,t,o)}var i=o.prototype;if(!se.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=se.Call(e,a,t);return se.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!se.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(fe(n)){return t}if(!se.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=se.ToString(e);var i="<"+t;if(r!==""){var a=se.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!se.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return te.regex(e)},ToString:function ToString(e){return ae(e)}};if(s&&ne){var ce=function defineWellKnownSymbol(e){if(te.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!te.symbol($.search)){var le=ce("search");var pe=String.prototype.search;h(RegExp.prototype,le,function search(e){return se.Call(pe,e,[this])});var ve=function search(e){var t=se.RequireObjectCoercible(this);if(!fe(e)){var r=se.GetMethod(e,le);if(typeof r!=="undefined"){return se.Call(r,e,[t])}}return se.Call(pe,t,[se.ToString(e)])};re(String.prototype,"search",ve)}if(!te.symbol($.replace)){var ye=ce("replace");var he=String.prototype.replace;h(RegExp.prototype,ye,function replace(e,t){return se.Call(he,e,[this,t])});var be=function replace(e,t){var r=se.RequireObjectCoercible(this);if(!fe(e)){var n=se.GetMethod(e,ye);if(typeof n!=="undefined"){return se.Call(n,e,[r,t])}}return se.Call(he,r,[se.ToString(e),t])};re(String.prototype,"replace",be)}if(!te.symbol($.split)){var ge=ce("split");var de=String.prototype.split;h(RegExp.prototype,ge,function split(e,t){return se.Call(de,e,[this,t])});var me=function split(e,t){var r=se.RequireObjectCoercible(this);if(!fe(e)){var n=se.GetMethod(e,ge);if(typeof n!=="undefined"){return se.Call(n,e,[r,t])}}return se.Call(de,r,[se.ToString(e),t])};re(String.prototype,"split",me)}var Oe=te.symbol($.match);var we=Oe&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!Oe||we){var je=ce("match");var Se=String.prototype.match;h(RegExp.prototype,je,function match(e){return se.Call(Se,e,[this])});var Te=function match(e){var t=se.RequireObjectCoercible(this);if(!fe(e)){var r=se.GetMethod(e,je);if(typeof r!=="undefined"){return se.Call(r,e,[t])}}return se.Call(Se,t,[se.ToString(e)])};re(String.prototype,"match",Te)}}var Ie=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Ee=function(){return this};var Pe=function(e){if(s&&!z(e,J)){m.getter(e,J,Ee)}};var Ce=function(e,t){var r=t||function iterator(){return this};h(e,oe,r);if(!e[oe]&&te.symbol(oe)){e[oe]=r}};var Me=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var xe=function createDataPropertyOrThrow(e,t,r){Me(e,t,r);if(!se.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ne=function(e,t,r,n){if(!se.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!se.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Ae=String.fromCodePoint;re(String,"fromCodePoint",function fromCodePoint(e){return se.Call(Ae,this,arguments)})}var Re={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!se.SameValue(r,se.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=se.ToObject(e,"bad callSite");var r=se.ToObject(t.raw,"bad raw value");var n=r.length;var o=se.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=se.ToString(a);s=se.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=se.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){re(String,"raw",Re.raw)}b(String,Re);var _e=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var ke=Infinity;var Fe={repeat:function repeat(e){var t=se.ToString(se.RequireObjectCoercible(this));var r=se.ToInteger(e);if(r<0||r>=ke){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return _e(t,r)},startsWith:function startsWith(e){var t=se.ToString(se.RequireObjectCoercible(this));if(se.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=se.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(se.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=se.ToString(se.RequireObjectCoercible(this));if(se.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=se.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:se.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(se.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=se.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=se.ToString(se.RequireObjectCoercible(this));var r=se.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){re(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var Le=i(function(){"/a/".startsWith(/a/)});var De=a(function(){return"abc".startsWith("a",Infinity)===false});if(!Le||!De){re(String.prototype,"startsWith",Fe.startsWith);re(String.prototype,"endsWith",Fe.endsWith)}}if(ne){var ze=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!ze){re(String.prototype,"startsWith",Fe.startsWith)}var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!qe){re(String.prototype,"endsWith",Fe.endsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!We){re(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var Ge=["\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var He=new RegExp("(^["+Ge+"]+)|(["+Ge+"]+$)","g");var Ve=function trim(){return se.ToString(se.RequireObjectCoercible(this)).replace(He,"")};var Be=["\x85","\u200b","\ufffe"].join("");var Ue=new RegExp("["+Be+"]","g");var $e=/^[-+]0x[0-9a-f]+$/i;var Je=Be.trim().length!==Be.length;h(String.prototype,"trim",Ve,Je);var Xe=function(e){return{value:e,done:arguments.length===0}};var Ke=function(e){se.RequireObjectCoercible(e);this._s=se.ToString(e);this._i=0};Ke.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Xe()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Xe(e.substr(t,o))};Ce(Ke.prototype);Ce(String.prototype,function(){return new Ke(this)});var Ze={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!se.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(ee(e)||se.GetMethod(e,oe))!=="undefined";var u,f,s;if(a){f=se.IsConstructor(r)?Object(new r):[];var c=se.GetIterator(e);var l,p;s=0;while(true){l=se.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(e){se.IteratorClose(c,true);throw e}s+=1}u=s}else{var v=se.ToObject(e);u=se.ToLength(v.length);f=se.IsConstructor(r)?Object(new r(u)):new Array(u);var y;for(s=0;s<u;++s){y=v[s];if(o){y=typeof i==="undefined"?n(y,s):t(n,i,y,s)}xe(f,s,y)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!se.IsCallable(t)?new Array(e):se.Construct(t,[e]);for(var o=0;o<e;++o){xe(n,o,arguments[o])}n.length=e;return n}};b(Array,Ze);Pe(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=se.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Xe(o)}}this.array=void 0;return Xe()}});Ce(q.prototype);var Ye=Array.of===Ze.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Ye){re(Array,"of",Ze.of)}var Qe={copyWithin:function copyWithin(e,t){var r=se.ToObject(this);var n=se.ToLength(r.length);var o=se.ToInteger(e);var i=se.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:se.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=se.ToObject(this);var o=se.ToLength(n.length);t=se.ToInteger(typeof t==="undefined"?0:t);r=se.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=se.ToObject(this);var n=se.ToLength(r.length);if(!se.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=se.ToObject(this);var n=se.ToLength(r.length);if(!se.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!se.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!se.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[oe]){b(Array.prototype,{values:Array.prototype[oe]});if(te.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var et=Array.prototype.values;re(Array.prototype,"values",function values(){return se.Call(et,this,arguments)});h(Array.prototype,oe,Array.prototype.values,true)}b(Array.prototype,Qe);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Ce(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Ce(Object.getPrototypeOf([].values()))}var tt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var rt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!tt||!rt){re(Array,"from",Ze.from)}var nt=function(){return a(function(){return Array.from([0],void 0)})}();if(!nt){var ot=Array.from;re(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return se.Call(ot,this,arguments)}else{return t(ot,this,e)}})}var it=-(Math.pow(2,32)-1);var at=function(e,r){var n={length:it};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!at(Array.prototype.forEach)){var ut=Array.prototype.forEach;re(Array.prototype,"forEach",function forEach(e){return se.Call(ut,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.map)){var ft=Array.prototype.map;re(Array.prototype,"map",function map(e){return se.Call(ft,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.filter)){var st=Array.prototype.filter;re(Array.prototype,"filter",function filter(e){return se.Call(st,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.some)){var ct=Array.prototype.some;re(Array.prototype,"some",function some(e){return se.Call(ct,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.every)){var lt=Array.prototype.every;re(Array.prototype,"every",function every(e){return se.Call(lt,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.reduce)){var pt=Array.prototype.reduce;re(Array.prototype,"reduce",function reduce(e){return se.Call(pt,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.reduceRight,true)){var vt=Array.prototype.reduceRight;re(Array.prototype,"reduceRight",function reduceRight(e){return se.Call(vt,this.length>=0?this:[],arguments)},true)}var yt=Number("0o10")!==8;var ht=Number("0b10")!==2;var bt=y(Be,function(e){return Number(e+0+e)===0});if(yt||ht||bt){var gt=Number;var dt=/^0b[01]+$/i;var mt=/^0o[0-7]+$/i;var Ot=dt.test.bind(dt);var wt=mt.test.bind(mt);var jt=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(te.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(te.primitive(t)){return t}}throw new TypeError("No default value")};var St=Ue.test.bind(Ue);var Tt=$e.test.bind($e);var It=function(){var e=function Number(t){var r;if(arguments.length>0){r=te.primitive(t)?t:jt(t,"number")}else{r=0}if(typeof r==="string"){r=se.Call(Ve,r);if(Ot(r)){r=parseInt(C(r,2),2)}else if(wt(r)){r=parseInt(C(r,2),8)}else if(St(r)||Tt(r)){r=NaN}}var n=this;var o=a(function(){gt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new gt(r)}return gt(r)};return e}();Ie(gt,It,{});b(It,{NaN:gt.NaN,MAX_VALUE:gt.MAX_VALUE,MIN_VALUE:gt.MIN_VALUE,NEGATIVE_INFINITY:gt.NEGATIVE_INFINITY,POSITIVE_INFINITY:gt.POSITIVE_INFINITY});Number=It;m.redefine(S,"Number",It)}var Et=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Et,MIN_SAFE_INTEGER:-Et,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&se.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){re(Array.prototype,"find",Qe.find)}if([,1].findIndex(function(){return true})!==0){re(Array.prototype,"findIndex",Qe.findIndex)}var Pt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Ct=function ensureEnumerable(e,t){if(s&&Pt(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var Mt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var xt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var Nt=function(e,t){var r=n(Object(t));var o;if(se.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Pt(t))}return p(P(r,o||[]),xt(t),e)};var At={assign:function(e,t){var r=se.ToObject(e,"Cannot convert undefined or null to object");return p(se.Call(Mt,1,arguments),Nt,r)},is:function is(e,t){return se.SameValue(e,t)}};var Rt=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(Rt){re(Object,"assign",At.assign)}b(Object,At);if(s){var _t={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!se.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||se.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(t){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,_t)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var kt=!i(function(){Object.keys("foo")});if(!kt){var Ft=Object.keys;re(Object,"keys",function keys(e){return Ft(se.ToObject(e))});n=Object.keys}var Lt=i(function(){Object.keys(/a/g)});if(Lt){var Dt=Object.keys;re(Object,"keys",function keys(e){if(te.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return Dt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var zt=!i(function(){Object.getOwnPropertyNames("foo")});if(!zt){var qt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Wt=Object.getOwnPropertyNames;re(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=se.ToObject(e);if(g(t)==="[object Window]"){try{return Wt(t)}catch(e){return P([],qt)}}return Wt(t)})}}if(Object.getOwnPropertyDescriptor){var Gt=!i(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!Gt){var Ht=Object.getOwnPropertyDescriptor;re(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Ht(se.ToObject(e),t)})}}if(Object.seal){var Vt=!i(function(){Object.seal("foo")});if(!Vt){var Bt=Object.seal;re(Object,"seal",function seal(e){if(!se.TypeIsObject(e)){return e}return Bt(e)})}}if(Object.isSealed){var Ut=!i(function(){Object.isSealed("foo")});if(!Ut){var $t=Object.isSealed;re(Object,"isSealed",function isSealed(e){if(!se.TypeIsObject(e)){return true}return $t(e)})}}if(Object.freeze){var Jt=!i(function(){Object.freeze("foo")});if(!Jt){var Xt=Object.freeze;re(Object,"freeze",function freeze(e){if(!se.TypeIsObject(e)){return e}return Xt(e)})}}if(Object.isFrozen){var Kt=!i(function(){Object.isFrozen("foo")});if(!Kt){var Zt=Object.isFrozen;re(Object,"isFrozen",function isFrozen(e){if(!se.TypeIsObject(e)){return true}return Zt(e)})}}if(Object.preventExtensions){var Yt=!i(function(){Object.preventExtensions("foo")});if(!Yt){var Qt=Object.preventExtensions;re(Object,"preventExtensions",function preventExtensions(e){if(!se.TypeIsObject(e)){return e}return Qt(e)})}}if(Object.isExtensible){var er=!i(function(){Object.isExtensible("foo")});if(!er){var tr=Object.isExtensible;re(Object,"isExtensible",function isExtensible(e){if(!se.TypeIsObject(e)){return false}return tr(e)})}}if(Object.getPrototypeOf){var rr=!i(function(){Object.getPrototypeOf("foo")});if(!rr){var nr=Object.getPrototypeOf;re(Object,"getPrototypeOf",function getPrototypeOf(e){return nr(se.ToObject(e))})}}var or=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&se.IsCallable(e.get)}();if(s&&!or){var ir=function flags(){if(!se.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ir)}var ar=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var ur=ne&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var fr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var sr=fr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!fr||!sr){var cr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=se.RequireObjectCoercible(this);if(te.regex(e)){return t(cr,e)}var r=ae(e.source);var n=ae(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,cr)}if(s&&(!ar||ur)){var lr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var vr=function(){return this.source};var yr=se.IsCallable(pr.get)?pr.get:vr;var hr=RegExp;var br=function(){return function RegExp(e,t){var r=se.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(te.regex(e)){o=se.Call(yr,e);i=typeof t==="undefined"?se.Call(lr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new hr(e,t)}}();Ie(hr,br,{$input:true});RegExp=br;m.redefine(S,"RegExp",br)}if(s){var gr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(gr),function(e){if(e in RegExp&&!(gr[e]in RegExp)){m.getter(RegExp,gr[e],function get(){return RegExp[e]})}})}Pe(RegExp);var dr=1/Number.EPSILON;var mr=function roundTiesToEven(e){return e+dr-dr};var Or=Math.pow(2,-23);var wr=Math.pow(2,127)*(2-Or);var jr=Math.pow(2,-126);var Sr=Math.E;var Tr=Math.LOG2E;var Ir=Math.LOG10E;var Er=Number.prototype.clz;delete Number.prototype.clz;var Pr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}return L(t/Sr+D(t+1)*D(t-1)/Sr)+1},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}return t<0?-asinh(-t):L(t+D(t*t+1))},atanh:function atanh(e){var t=Number(e);if(X(t)||t<-1||t>1){return NaN}if(t===-1){return-Infinity}if(t===1){return Infinity}if(t===0){return t}return.5*L((1+t)/(1-t))},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=F(L(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=se.ToUint32(t);if(r===0){return 32}return Er?se.Call(Er,r):31-_(L(r+.5)*Tr)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}if(t<0){t=-t}if(t>21){return F(t)/2}return(F(t)+F(-t))/2},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return F(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return L(e)*Tr},log10:function log10(e){return L(e)*Ir},log1p:function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(L(1+t)/(1+t-1))},sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}if(k(t)<1){return(Math.expm1(t)-Math.expm1(-t))/2}return(F(t-1)-F(-t-1))*Sr/2},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(F(t)+F(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=se.ToUint32(e);var n=se.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<jr){return r*mr(n/jr/Or)*jr*Or}var o=(1+Or/Number.EPSILON)*n;var i=o-(o-n);if(i>wr||X(i)){return r*Infinity}return r*i}};b(Math,Pr);h(Math,"log1p",Pr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Pr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"tanh",Pr.tanh,Math.tanh(-2e-17)!==-2e-17);h(Math,"acosh",Pr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"cbrt",Pr.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8);h(Math,"sinh",Pr.sinh,Math.sinh(-2e-17)!==-2e-17);var Cr=Math.expm1(10);h(Math,"expm1",Pr.expm1,Cr>22025.465794806718||Cr<22025.465794806718);var Mr=Math.round;var xr=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Nr=dr+1;var Ar=2*dr-1;var Rr=[Nr,Ar].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;
return e-t<.5?t:r},!xr||!Rr);m.preserveToString(Math.round,Mr);var _r=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Pr.imul;m.preserveToString(Math.imul,_r)}if(Math.imul.length!==2){re(Math,"imul",function imul(e,t){return se.Call(_r,Math,arguments)})}var kr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}se.IsPromise=function(e){if(!se.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!se.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(se.IsCallable(t.resolve)&&se.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&se.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=se.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(se.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(e){n=e;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!se.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(t){return m(e,t)}if(!se.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(e){i(e)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!se.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ne(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(e){o(e)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=se.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(t){e.done=true;throw t}o[f]=void 0;var s=t.resolve(u);var c=P(f,o,r,i);i.count+=1;w(s.then,s,c,r.reject);f+=1}if(--i.count===0){var l=r.resolve;l(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=se.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(t){e.done=true;throw t}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!se.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=se.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(e){var a=e;if(i&&!i.done){try{se.IteratorClose(o,true)}catch(e){a=e}}var u=n.reject;u(a);return n.promise}},race:function race(e){var t=this;if(!se.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=se.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(e){var a=e;if(i&&!i.done){try{se.IteratorClose(o,true)}catch(e){a=e}}var u=n.reject;u(a);return n.promise}},reject:function reject(e){var t=this;if(!se.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!se.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(se.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{catch:function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!se.IsPromise(n)){throw new TypeError("not a promise")}var o=se.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=se.IsCallable(e)?e:a;var d=se.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof kr==="function"){b(S,{Promise:kr});var Fr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var Lr=!i(function(){S.Promise.reject(42).then(null,5).then(null,W)});var Dr=i(function(){S.Promise.call(3,W)});var zr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(e){return true}return t===r}(S.Promise);var qr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Wr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Wr.prototype=Promise.prototype;Wr.all=Promise.all;var Gr=a(function(){return!!Wr.all([1,2])});if(!Fr||!Lr||!Dr||zr||!qr||Gr){Promise=kr;re(S,"Promise",kr)}if(Promise.all.length!==1){var Hr=Promise.all;re(Promise,"all",function all(e){return se.Call(Hr,this,arguments)})}if(Promise.race.length!==1){var Vr=Promise.race;re(Promise,"race",function race(e){return se.Call(Vr,this,arguments)})}if(Promise.resolve.length!==1){var Br=Promise.resolve;re(Promise,"resolve",function resolve(e){return se.Call(Br,this,arguments)})}if(Promise.reject.length!==1){var Ur=Promise.reject;re(Promise,"reject",function reject(e){return se.Call(Ur,this,arguments)})}Ct(Promise,"all");Ct(Promise,"race");Ct(Promise,"resolve");Ct(Promise,"reject");Pe(Promise)}var $r=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Jr=$r(["z","a","bb"]);var Xr=$r(["z",1,"a","3",2]);if(s){var Kr=function fastkey(e,t){if(!t&&!Jr){return null}if(fe(e)){return"^"+se.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Xr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Zr=function emptyObject(){return Object.create?Object.create(null):{}};var Yr=function addIterableToMap(e,n,o){if(r(o)||te.string(o)){l(o,function(e){if(!se.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!fe(o)){a=n.set;if(!se.IsCallable(a)){throw new TypeError("bad map")}i=se.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=se.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!se.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(e){se.IteratorClose(i,true);throw e}}}}};var Qr=function addIterableToSet(e,n,o){if(r(o)||te.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!fe(o)){a=n.add;if(!se.IsCallable(a)){throw new TypeError("bad set")}i=se.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=se.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(e){se.IteratorClose(i,true);throw e}}}}};var en={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!se.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+se.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={next:function next(){var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Xe()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Xe(n)}}this.i=void 0;return Xe()}};Ce(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ne(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Zr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){Yr(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Kr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(se.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Kr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(se.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Kr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(se.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(se.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},delete:function(t){o(this,"delete");var r=this._head;var n=r;var i=Kr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(se.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Zr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Ce(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!se.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+se.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ne(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Zr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){Qr(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new en.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Kr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Kr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},delete:function(e){r(this,"delete");var t;if(this._storage&&(t=Kr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Zr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return this["[[SetData]]"].values()},entries:function entries(){r(this,"entries");u(this);return this["[[SetData]]"].entries()},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Ce(i.prototype,i.prototype.values);return i}()};if(S.Map||S.Set){var tn=a(function(){return new Map([[1,2]]).get(1)===2});if(!tn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){Yr(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var rn=new Map;var nn=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var on=rn.set(1,2)===rn;if(!nn||!on){re(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!nn){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var an=new Set;var un=function(e){e["delete"](0);e.add(-0);return!e.has(0)}(an);var fn=an.add(1)===an;if(!un||!fn){var sn=Set.prototype.add;Set.prototype.add=function add(e){t(sn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,sn)}if(!un){var cn=Set.prototype.has;Set.prototype.has=function has(e){return t(cn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,cn);var ln=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(ln,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],ln)}var pn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var vn=Object.setPrototypeOf&&!pn;var yn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||vn||!yn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){Yr(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var hn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||bn||!gn){var dn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new dn;if(arguments.length>0){Qr(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=dn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,dn)}var mn=new S.Map;var On=!a(function(){return mn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||mn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof mn.keys().next!=="function"||On||!pn){b(S,{Map:en.Map,Set:en.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Ce(Object.getPrototypeOf((new S.Map).keys()));Ce(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var wn=S.Set.prototype.has;re(S.Set.prototype,"has",function has(e){return t(wn,this,e)})}}b(S,en);Pe(S.Map);Pe(S.Set)}var jn=function throwUnlessTargetIsObject(e){if(!se.TypeIsObject(e)){throw new TypeError("target must be an object")}};var Sn={apply:function apply(){return se.Call(se.Call,null,arguments)},construct:function construct(e,t){if(!se.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!se.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return se.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){jn(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){jn(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(Sn,{ownKeys:function ownKeys(e){jn(e);var t=Object.getOwnPropertyNames(e);if(se.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Tn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(Sn,{isExtensible:function isExtensible(e){jn(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){jn(e);return Tn(function(){Object.preventExtensions(e)})}})}if(s){var In=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return In(o,t,r)}if("value"in n){return n.value}if(n.get){return se.Call(n.get,r)}return void 0};var En=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return En(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!se.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ie.defineProperty(o,r,{value:n})}else{return ie.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(Sn,{defineProperty:function defineProperty(e,t,r){jn(e);return Tn(function(){Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){jn(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){jn(e);var r=arguments.length>2?arguments[2]:e;return In(e,t,r)},set:function set(e,t,r){jn(e);var n=arguments.length>3?arguments[3]:e;return En(e,t,r,n)}})}if(Object.getPrototypeOf){var Pn=Object.getPrototypeOf;Sn.getPrototypeOf=function getPrototypeOf(e){jn(e);return Pn(e)}}if(Object.setPrototypeOf&&Sn.getPrototypeOf){var Cn=function(e,t){var r=t;while(r){if(e===r){return true}r=Sn.getPrototypeOf(r)}return false};Object.assign(Sn,{setPrototypeOf:function setPrototypeOf(e,t){jn(e);if(t!==null&&!se.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ie.getPrototypeOf(e)){return true}if(ie.isExtensible&&!ie.isExtensible(e)){return false}if(Cn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var Mn=function(e,t){if(!se.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){re(S.Reflect,e,t)}}};Object.keys(Sn).forEach(function(e){Mn(e,Sn[e])});var xn=S.Reflect.getPrototypeOf;if(c&&xn&&xn.name!=="getPrototypeOf"){re(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(xn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){re(S.Reflect,"setPrototypeOf",Sn.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){re(S.Reflect,"defineProperty",Sn.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){re(S.Reflect,"construct",Sn.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var Nn=Date.prototype.toString;var An=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return se.Call(Nn,this)};re(Date.prototype,"toString",An)}var Rn={anchor:function anchor(e){return se.CreateHTML(this,"a","name",e)},big:function big(){return se.CreateHTML(this,"big","","")},blink:function blink(){return se.CreateHTML(this,"blink","","")},bold:function bold(){return se.CreateHTML(this,"b","","")},fixed:function fixed(){return se.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return se.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return se.CreateHTML(this,"font","size",e)},italics:function italics(){return se.CreateHTML(this,"i","","")},link:function link(e){return se.CreateHTML(this,"a","href",e)},small:function small(){return se.CreateHTML(this,"small","","")},strike:function strike(){return se.CreateHTML(this,"strike","","")},sub:function sub(){return se.CreateHTML(this,"sub","","")},sup:function sub(){return se.CreateHTML(this,"sup","","")}};l(Object.keys(Rn),function(e){var r=String.prototype[e];var n=false;if(se.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){re(String.prototype,e,Rn[e])}});var _n=function(){if(!ne){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var kn=a(function(){if(!ne){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(_n||!kn){var Fn=JSON.stringify;re(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=se.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(te.symbol(n)){return xt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return Fn.apply(this,o)})}return S});
//# sourceMappingURL=es6-shim.map
/*! jQuery v3.1.1 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.1.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=r.isArray(d)))?(e?(e=!1,f=c&&r.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,C=/^.[^:#\[\.,]*$/;function D(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):C.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(D(this,a||[],!1))},not:function(a){return this.pushStack(D(this,a||[],!0))},is:function(a){return!!D(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var E,F=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,G=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||E,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:F.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),B.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};G.prototype=r.fn,E=r(d);var H=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function J(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return J(a,"nextSibling")},prev:function(a){return J(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(I[a]||r.uniqueSort(e),H.test(a)&&e.reverse()),this.pushStack(e)}});var K=/[^\x20\t\r\n\f]+/g;function L(a){var b={};return r.each(a.match(K)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?L(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function M(a){return a}function N(a){throw a}function O(a,b,c){var d;try{a&&r.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&r.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,M,e),g(f,c,N,e)):(f++,j.call(a,g(f,c,M,e),g(f,c,N,e),g(f,c,M,c.notifyWith))):(d!==M&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==N&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:M,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:M)),c[2][3].add(g(0,a,r.isFunction(d)?d:N))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(O(a,g.done(h(c)).resolve,g.reject),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)O(e[c],h(c),g.reject);return g.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&P.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var Q=r.Deferred();r.fn.ready=function(a){return Q.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||Q.resolveWith(d,[r]))}}),r.ready.then=Q.then;function R(){d.removeEventListener("DOMContentLoaded",R),
a.removeEventListener("load",R),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",R),a.addEventListener("load",R));var S=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)S(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},T=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function U(){this.expando=r.expando+U.uid++}U.uid=1,U.prototype={cache:function(a){var b=a[this.expando];return b||(b={},T(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){r.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(K)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var V=new U,W=new U,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function Z(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:X.test(a)?JSON.parse(a):a)}function $(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Y,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=Z(c)}catch(e){}W.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return W.hasData(a)||V.hasData(a)},data:function(a,b,c){return W.access(a,b,c)},removeData:function(a,b){W.remove(a,b)},_data:function(a,b,c){return V.access(a,b,c)},_removeData:function(a,b){V.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=W.get(f),1===f.nodeType&&!V.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),$(f,d,e[d])));V.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){W.set(this,a)}):S(this,function(b){var c;if(f&&void 0===b){if(c=W.get(f,a),void 0!==c)return c;if(c=$(f,a),void 0!==c)return c}else this.each(function(){W.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){W.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=V.get(a,b),c&&(!d||r.isArray(c)?d=V.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return V.get(a,c)||V.access(a,c,{empty:r.Callbacks("once memory").add(function(){V.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=V.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var _=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,aa=new RegExp("^(?:([+-])=|)("+_+")([a-z%]*)$","i"),ba=["Top","Right","Bottom","Left"],ca=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function ea(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&aa.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var fa={};function ga(a){var b,c=a.ownerDocument,d=a.nodeName,e=fa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),fa[d]=e,e)}function ha(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=V.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&ca(d)&&(e[f]=ga(d))):"none"!==c&&(e[f]="none",V.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ha(this,!0)},hide:function(){return ha(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ca(this)?r(this).show():r(this).hide()})}});var ia=/^(?:checkbox|radio)$/i,ja=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ka=/^$|\/(?:java|ecma)script/i,la={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};la.optgroup=la.option,la.tbody=la.tfoot=la.colgroup=la.caption=la.thead,la.th=la.td;function ma(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function na(a,b){for(var c=0,d=a.length;c<d;c++)V.set(a[c],"globalEval",!b||V.get(b[c],"globalEval"))}var oa=/<|&#?\w+;/;function pa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(oa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ja.exec(f)||["",""])[1].toLowerCase(),i=la[h]||la._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=ma(l.appendChild(f),"script"),j&&na(g),c){k=0;while(f=g[k++])ka.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var qa=d.documentElement,ra=/^key/,sa=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ta=/^([^.]*)(?:\.(.+)|)/;function ua(){return!0}function va(){return!1}function wa(){try{return d.activeElement}catch(a){}}function xa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)xa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=va;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(qa,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(K)||[""],j=b.length;while(j--)h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.hasData(a)&&V.get(a);if(q&&(i=q.events)){b=(b||"").match(K)||[""],j=b.length;while(j--)if(h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&V.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(V.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==wa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===wa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r.nodeName(this,"input"))return this.click(),!1},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ua:va,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:va,isPropagationStopped:va,isImmediatePropagationStopped:va,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ua,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ua,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ua,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&ra.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&sa.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return xa(this,a,b,c,d)},one:function(a,b,c,d){return xa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=va),this.each(function(){r.event.remove(this,a,c,b)})}});var ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,za=/<script|<style|<link/i,Aa=/checked\s*(?:[^=]|=\s*.checked.)/i,Ba=/^true\/(.*)/,Ca=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Da(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function Ea(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Fa(a){var b=Ba.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ga(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(V.hasData(a)&&(f=V.access(a),g=V.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}W.hasData(a)&&(h=W.access(a),i=r.extend({},h),W.set(b,i))}}function Ha(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ia.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ia(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Aa.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ia(f,b,c,d)});if(m&&(e=pa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(ma(e,"script"),Ea),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,ma(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Fa),l=0;l<i;l++)j=h[l],ka.test(j.type||"")&&!V.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Ca,""),k))}return a}function Ja(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(ma(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&na(ma(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(ya,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=ma(h),f=ma(a),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);if(b)if(c)for(f=f||ma(a),g=g||ma(h),d=0,e=f.length;d<e;d++)Ga(f[d],g[d]);else Ga(a,h);return g=ma(h,"script"),g.length>0&&na(g,!i&&ma(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(T(c)){if(b=c[V.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[V.expando]=void 0}c[W.expando]&&(c[W.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ja(this,a,!0)},remove:function(a){return Ja(this,a)},text:function(a){return S(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.appendChild(a)}})},prepend:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(ma(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return S(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!za.test(a)&&!la[(ja.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(ma(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ia(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(ma(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var Ka=/^margin/,La=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),Ma=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",qa.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,qa.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Na(a,b,c){var d,e,f,g,h=a.style;return c=c||Ma(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&La.test(g)&&Ka.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Oa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Pa=/^(none|table(?!-c[ea]).+)/,Qa={position:"absolute",visibility:"hidden",display:"block"},Ra={letterSpacing:"0",fontWeight:"400"},Sa=["Webkit","Moz","ms"],Ta=d.createElement("div").style;function Ua(a){if(a in Ta)return a;var b=a[0].toUpperCase()+a.slice(1),c=Sa.length;while(c--)if(a=Sa[c]+b,a in Ta)return a}function Va(a,b,c){var d=aa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Wa(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ba[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ba[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ba[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ba[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ba[f]+"Width",!0,e)));return g}function Xa(a,b,c){var d,e=!0,f=Ma(a),g="border-box"===r.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=Na(a,b,f),(d<0||null==d)&&(d=a.style[b]),La.test(d))return d;e=g&&(o.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+Wa(a,b,c||(g?"border":"content"),e,f)+"px"}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Na(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=a.style;return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=aa.exec(c))&&e[1]&&(c=ea(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b);return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Na(a,b,d)),"normal"===e&&b in Ra&&(e=Ra[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Pa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?Xa(a,b,d):da(a,Qa,function(){return Xa(a,b,d)})},set:function(a,c,d){var e,f=d&&Ma(a),g=d&&Wa(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=aa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Va(a,c,g)}}}),r.cssHooks.marginLeft=Oa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Na(a,"marginLeft"))||a.getBoundingClientRect().left-da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ba[d]+b]=f[d]||f[d-2]||f[0];return e}},Ka.test(a)||(r.cssHooks[a+b].set=Va)}),r.fn.extend({css:function(a,b){return S(this,function(a,b,c){var d,e,f={},g=0;if(r.isArray(b)){for(d=Ma(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function Ya(a,b,c,d,e){return new Ya.prototype.init(a,b,c,d,e)}r.Tween=Ya,Ya.prototype={constructor:Ya,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=Ya.propHooks[this.prop];return a&&a.get?a.get(this):Ya.propHooks._default.get(this)},run:function(a){var b,c=Ya.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ya.propHooks._default.set(this),this}},Ya.prototype.init.prototype=Ya.prototype,Ya.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},Ya.propHooks.scrollTop=Ya.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=Ya.prototype.init,r.fx.step={};var Za,$a,_a=/^(?:toggle|show|hide)$/,ab=/queueHooks$/;function bb(){$a&&(a.requestAnimationFrame(bb),r.fx.tick())}function cb(){return a.setTimeout(function(){Za=void 0}),Za=r.now()}function db(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ba[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function eb(a,b,c){for(var d,e=(hb.tweeners[b]||[]).concat(hb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function fb(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&ca(a),q=V.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],_a.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=V.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ha([a],!0),j=a.style.display||j,k=r.css(a,"display"),ha([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=V.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ha([a],!0),m.done(function(){p||ha([a]),V.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=eb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function gb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],r.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function hb(a,b,c){var d,e,f=0,g=hb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Za||cb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:Za||cb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(gb(k,j.opts.specialEasing);f<g;f++)if(d=hb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,eb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}r.Animation=r.extend(hb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return ea(c.elem,a,aa.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(K);for(var c,d=0,e=a.length;d<e;d++)c=a[d],hb.tweeners[c]=hb.tweeners[c]||[],hb.tweeners[c].unshift(b)},prefilters:[fb],prefilter:function(a,b){b?hb.prefilters.unshift(a):hb.prefilters.push(a)}}),r.speed=function(a,b,c){var e=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off||d.hidden?e.duration=0:"number"!=typeof e.duration&&(e.duration in r.fx.speeds?e.duration=r.fx.speeds[e.duration]:e.duration=r.fx.speeds._default),null!=e.queue&&e.queue!==!0||(e.queue="fx"),e.old=e.complete,e.complete=function(){r.isFunction(e.old)&&e.old.call(this),e.queue&&r.dequeue(this,e.queue)},e},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=hb(this,r.extend({},a),f);(e||V.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=V.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=V.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(db(b,!0),a,d,e)}}),r.each({slideDown:db("show"),slideUp:db("hide"),slideToggle:db("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(Za=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),Za=void 0},r.fx.timer=function(a){r.timers.push(a),a()?r.fx.start():r.timers.pop()},r.fx.interval=13,r.fx.start=function(){$a||($a=a.requestAnimationFrame?a.requestAnimationFrame(bb):a.setInterval(r.fx.tick,r.fx.interval))},r.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame($a):a.clearInterval($a),$a=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var ib,jb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return S(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?ib:void 0)),
void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(K);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),ib={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=jb[b]||r.find.attr;jb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=jb[g],jb[g]=e,e=null!=c(a,b,d)?g:null,jb[g]=f),e}});var kb=/^(?:input|select|textarea|button)$/i,lb=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return S(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):kb.test(a.nodeName)||lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function mb(a){var b=a.match(K)||[];return b.join(" ")}function nb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,nb(this)))});if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=mb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,nb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=mb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,nb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(K)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=nb(this),b&&V.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":V.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+mb(nb(c))+" ").indexOf(b)>-1)return!0;return!1}});var ob=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":r.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ob,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:mb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!r.nodeName(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(r.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!pb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,pb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(V.get(h,"events")||{})[b.type]&&V.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&T(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!T(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=V.access(d,b);e||d.addEventListener(a,c,!0),V.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=V.access(d,b)-1;e?V.access(d,b,e):(d.removeEventListener(a,c,!0),V.remove(d,b))}}});var qb=a.location,rb=r.now(),sb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var tb=/\[\]$/,ub=/\r?\n/g,vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;function xb(a,b,c,d){var e;if(r.isArray(b))r.each(b,function(b,e){c||tb.test(a)?d(a,e):xb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)xb(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(r.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)xb(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(a)&&(this.checked||!ia.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(ub,"\r\n")}}):{name:b.name,value:c.replace(ub,"\r\n")}}).get()}});var yb=/%20/g,zb=/#.*$/,Ab=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Cb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb={},Gb={},Hb="*/".concat("*"),Ib=d.createElement("a");Ib.href=qb.href;function Jb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(K)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Kb(a,b,c,d){var e={},f=a===Gb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Lb(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Mb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Nb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:Cb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Lb(Lb(a,r.ajaxSettings),b):Lb(r.ajaxSettings,a)},ajaxPrefilter:Jb(Fb),ajaxTransport:Jb(Gb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Bb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||qb.href)+"").replace(Eb,qb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(K)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ib.protocol+"//"+Ib.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Kb(Fb,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Db.test(o.type),f=o.url.replace(zb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(yb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(sb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Ab,"$1"),n=(sb.test(f)?"&":"?")+"_="+rb++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Hb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Kb(Gb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Mb(o,y,d)),v=Nb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ob={0:200,1223:204},Pb=r.ajaxSettings.xhr();o.cors=!!Pb&&"withCredentials"in Pb,o.ajax=Pb=!!Pb,r.ajaxTransport(function(b){var c,d;if(o.cors||Pb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ob[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Qb=[],Rb=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Qb.pop()||r.expando+"_"+rb++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Rb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Rb,"$1"+e):b.jsonp!==!1&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Qb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=B.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=pa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=mb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length};function Sb(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Sb(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||qa})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return S(this,function(a,d,e){var f=Sb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Oa(o.pixelPosition,function(a,c){if(c)return c=Na(a,b),La.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return S(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Tb=a.jQuery,Ub=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Ub),b&&a.jQuery===r&&(a.jQuery=Tb),r},b||(a.jQuery=a.$=r),r});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}(this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||[];return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),n+=s?0:1,o=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var h=t.jQuery,a=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&d[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new s(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(h=e,h.fn.imagesLoaded=function(t,e){var i=new o(this,t,e);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(e){"use strict";var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=e.URL||e.webkitURL||e,i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in i,o=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",true,false,e,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(r)},u=e.webkitRequestFileSystem,a=e.requestFileSystem||u||e.mozRequestFileSystem,f=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=0,h=[],p=function(){var e=h.length;while(e--){var t=h[e];if(typeof t==="string"){r.revokeObjectURL(t)}else{t.remove()}}h.length=0},d=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i==="function"){try{i.call(e,n||e)}catch(s){f(s)}}}},v=function(t,r){var f=this,p=t.type,v=false,m,g,y=function(){var e=n().createObjectURL(t);h.push(e);return e},b=function(){d(f,"writestart progress write writeend".split(" "))},w=function(){if(v||!m){m=y(t)}if(g){g.location.href=m}else{window.open(m,"_blank")}f.readyState=f.DONE;b()},E=function(e){return function(){if(f.readyState!==f.DONE){return e.apply(this,arguments)}}},S={create:true,exclusive:false},x;f.readyState=f.INIT;if(!r){r="download"}if(s){m=y(t);i.href=m;i.download=r;o(i);f.readyState=f.DONE;b();return}if(e.chrome&&p&&p!==l){x=t.slice||t.webkitSlice;t=x.call(t,0,t.size,l);v=true}if(u&&r!=="download"){r+=".download"}if(p===l||u){g=e}if(!a){w();return}c+=t.size;a(e.TEMPORARY,c,E(function(e){e.root.getDirectory("saved",S,E(function(e){var n=function(){e.getFile(r,S,E(function(e){e.createWriter(E(function(n){n.onwriteend=function(t){g.location.href=e.toURL();h.push(e);f.readyState=f.DONE;d(f,"writeend",t)};n.onerror=function(){var e=n.error;if(e.code!==e.ABORT_ERR){w()}};"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=f["on"+e]});n.write(t);f.abort=function(){n.abort();f.readyState=f.DONE};f.readyState=f.WRITING}),w)}),w)};e.getFile(r,{create:false},E(function(e){e.remove();n()}),E(function(e){if(e.code===e.NOT_FOUND_ERR){n()}else{w()}}))}),w)}),w)},m=v.prototype,g=function(e,t){return new v(e,t)};m.abort=function(){var e=this;e.readyState=e.DONE;d(e,"abort")};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;e.addEventListener("unload",p,false);return g}(self)
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:100000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url(data:application/octet-stream;base64,d09GRgABAAAAACWoAA4AAAAAQhQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABRAAAAEQAAABWPihI/2NtYXAAAAGIAAAAOgAAAUrQXRm3Y3Z0IAAAAcQAAAAKAAAACgAAAABmcGdtAAAB0AAABZQAAAtwiJCQWWdhc3AAAAdkAAAACAAAAAgAAAAQZ2x5ZgAAB2wAABjCAAAq+uJ4WNtoZWFkAAAgMAAAADQAAAA2BZlJs2hoZWEAACBkAAAAIAAAACQIJwQZaG10eAAAIIQAAABuAAABOPTeAABsb2NhAAAg9AAAAJ4AAACeojKW6m1heHAAACGUAAAAIAAAACAA6gvwbmFtZQAAIbQAAAGPAAAC/eLsyKlwb3N0AAAjRAAAAfwAAAM0412SIHByZXAAACVAAAAAZQAAAHvdawOFeJxjYGRWYZzAwMrAwVTFtIeBgaEHQjM+YDBkZGJgYGJgZWbACgLSXFMYHF4wvPBhDvqfxRDFHMQwDSjMCJIDANLeC6V4nGNgYGBmgGAZBkYGEHAB8hjBfBYGDSDNBqQZGZgYGF74/P8PUvCCAURLMELVAwEjG8OIBwC4Ywb6AAAAAAAAAAAAAAAAAAB4nK1WaXMTRxCd1WHLNj6CDxI2gVnGcox2VpjLCBDG7EoW4BzylexCjl1Ldu6LT/wG/ZpekVSRb/y0vB4d2GAnVVQoSv2m9+1M9+ueXpPQksReWI+k3HwpprY2aWTnSUg3bFqO4kPZ2QspU0z+LoiCaLXUvu04JCISgap1hSWC2PfI0iTjQ48yWrYlvWpSbulJd9kaD+qt+vbT0FGO3QklNZuhQ+uRLanCqBJFMu2RkjYtw9VfSVrh5yvMfNUMJYLoJJLGm2EMj+Rn44xWGa3GdhxFkU2WG0WKRDM8iCKPslpin1wxQUD5oBlSXvk0onyEH5EVe5TTCnHJdprf9yU/6R3OvyTieouyJQf+QHZkB3unK/ki0toK46adbEehivB0fSfEI5uT6p/sUV7TaOB2RaYnzQiWyleQWPkJZfYPyWrhfMqXPBrVkoOcCFovc2Jf8g60HkdMiWsmyILujk6IoO6XnKHYY/q4+OO9XSwXIQTIOJb1jkq4EEYpYbOaJG0EOYiSskWV1HpHTJzyOi3iLWG/Tu3oS2e0Sag7MZ6th46tnKjkeDSp00ymTu2k5tGUBlFKOhM85tcBlB/RJK+2sZrEyqNpbDNjJJFQoIVzaSqIZSeWNAXRPJrRm7thmmvXokWaPFDPPXpPb26Fmzs9p+3AP2v8Z3UqpoO9MJ2eDshKfJp2uUnRun56hn8m8UPWAiqRLTbDlMVDtn4H5eVjS47CawNs957zK+h99kTIpIH4G/AeL9UpBUyFmFVQC9201rUsy9RqVotUZOq7IU0rX9ZpAk05Dn1jX8Y4/q+ZGUtMCd/vxOnZEZeeufYlyDSH3GZdj+Z1arFdgM5sz+k0y/Z9nebYfqDTPNvzOh1ha+t0lO2HOi2w/UinY2wvaEGT7jsEchGBXMAGEoGwdRAI20sIhK1CIGwXEQjbIgJhu4RA2H6MQNguIxC2l7Wsmn4qaRw7E8sARYgDoznuyGVuKldTyaUSrotGpzbkKXKrpKJ4Vv0rA/3ikTesgbVAukTW/IpJrnxUleOPrmh508S5Ao5Vf3tzXJ8TD2W/WPhT8L/amqqkV6x5ZHIVeSPQk+NE1yYVj67p8rmqR9f/i4oOa4F+A6UQC0VZlg2+mZDwUafTUA1c5RAzGzMP1/W6Zc3P4fybGCEL6H78NxQaC9yDTllJWe1gr9XXj2W5twflsCdYkmK+zOtb4YuMzEr7RWYpez7yecAVMCqVYasNXK3gzXsS85DpTfJMELcVZYOkjceZILGBYx4wb76TICRMXbWB2imcsIG8YMwp2O+EQ1RvlOVwe6F9Ho2Uf2tX7MgZFU0Q+G32Rtjrs1DyW6yBhCe/1NdAVSFNxbipgEsj5YZq8GFcrdtGMk6gr6jYDcuyig8fR9x3So5lIPlIEatHRz+tvUKd1Ln9yihu3zv9CIJBaWL+9r6Z4qCUd7WSZVZtA1O3GpVT15rDxasO3c2j7nvH2Sdy1jTddE/c9L6mVbeDg7lZEO3bHJSlTC6o68MOG6jLzaXQ6mVckt52DzAsMKDfoRUb/1f3cfg8V6oKo+NIvZ2oH6PPYgzyDzh/R/UF6OcxTLmGlOd7lxOfbtzD2TJdxV2sn+LfwKy15mbpGnBD0w2Yh6xaHbrKDXynBjo90tyO9BDwse4K8QBgE8Bi8InuWsbzKYDxfMYcH+Bz5jBoMofBFnMYbDNnDWCHOQx2mcNgjzkMvmDOOsCXzGEQModBxBwGT5gTADxlDoOvmMPga+Yw+IY59wG+ZQ6DmDkMEuYw2Nd0ayhzixd0F6htUBXowPQTFvewONRUGbK/44Vhf28Qs38wiKk/aro9pP7EC0P92SCm/mIQU3/VdGdI/Y0Xhvq7QUz9wyCmPtMvxnKZwV9GvkuFA8ouNp/z98T7B8IaQLYAAQAB//8AD3icrToNcBzVefe9/b3dvd29u909/dyd7ke6k86yLEunOyHJsrCxJWyJGmEcLMDYxBhHNsZQBzOAkjQmFDrGIq5gHEIcCILOAGZq3IQO04RkIGkgaUMKMbQznSlJW0wgJtOQHxRr1e+93TvJwq7JTD3y2/f//bzvfX/vAhAIzL3KPcYNBFIB8UR9EJYuAcuAqGNbOiwDSczkuorlaJ6WTeVSRwMIDveY8aN20GztjzMhW4P2H+kNUPM5NaVNQE0K3tWM77vv8rJqgnT33VJE4WWIfd/QbKHZjcXcZiFAqjCDgUJA/mZTWOIIwi0vAwNiUjkW9THIZs6DAbnj6ffGP/P+0y2vv+5SXGLKuXHJPJH92c+yT7x3883wnI9W/DxI4T9+bm7uOL+MUwNywAg0BJYFQgNKa2NDzFBEjqeM0SFXLHU4YKe7yjFoSmdEKWw5nemOUj5czMXCliilM7lyuFgqp3HaDf1j/fhH+s6cfm4MEpA8c0BSQBO5CUkD5fJi05kDjSUoNnETTUUSXtpPVm0aGHDdmV0nNkPiMUWeHZMVRSZPSlp0dqypCKVG8iT9IK5AEeamyZGAjecW5tm5SSBm8ojiSqBsYoXDTRtuymw13V8axjB+p2EPlsMGcRzTTRkGOLRpmk/AzSZ+A97ecx+QN8g9gUbc26F7N+GJiN5pLGMA8hUo7EQcHI455A0PwrS3I37N+bZhTE8bex1aeeIJ4+MTjTY6gcH+iIvgGWQRdh2TR9sS81kspCzytguLfBcyuBOLXuhwYnZnh8NFUs6plLPLScGpWBKwkYztwsop7Hie9r7rYK/9brWXTg9U+RiBX+GJiyc0rgIv7UNJe3vPjrFdyZOV/byNUkyW/0AuIi/h+h6U5a64SmW5ieGcya2AYimG+EUtnZN08ImgveV+KOYykiiJVMrbkI+dHUkC9+nyPUFdD94j639r1uTq7FiSNrR1hXS8uLbGapYUSbpaJvzmp5aODbU9iJNBU1gJa5LFTCqihNpDigmWWtc2GjUy7Y2m3hHk14qmPJXp2cTInZudO85dhzw2AuXAJQHl+Yt7l0RVjkO8u4q5JZARE2A5yNxStNgGWcQSj7izA1HucCgJOsRsb7xYWgn9XAwvRqaN4HAS4ENF3kXFFovJ/muW3zsYDK3jxaCQbOouOPXZPmBDNZG4krS0N2/9wakf7hHv+IcPX/jcaGWZAp9fvrFtv66UeSlXn4zYdZo5kLNwIJJRTbEu3jz62Zf37Xv5l7RAeugZfAQ7kJ5koA3PoJB1eP8MpHRVWqpygyITpiKz4DCoHMENlun+wrDA0bNZ9jmJZdZwhhx9UnewMKztg2yAlie9j6O7Lzrks7tYdRdOO4u/FJ9e5G93RyFTJ1f5G17IZDs7z25uEfuFBYwlvYpUUuTnKJO6umg5IymD88yGGxbycjN2JOkIVk6wUoEzm/0O5T/Owb92Jg8NyL/6qFrl30IZ5nSgMp3nch7DkvOMCaMeoQ1U4JZxQncenmAMmcAei/S7V9CvAccW8mczwtMCceSQ8nwhXWuKAeQPJbRCc9RnhoSyhvBL+WgxTzsk0Y567IFj+35wa4Xq7ykS5YIm7UIdq4iCfKcsiIoSvFFWONUnFovZoXHKhXE69R9hTOIEgZPcJ0VZRrx+i3j9hhtFPqQDnYjX8uaEpS2+F4twiVkOylSJAwfvBZO3XBnoTaEHtltSWAGKIEl3SJIQ1CRESIRnLFtJRc88GckEbQuOBTO5zBXziL0JIPKiyMtzggwiMc+czmbDEbDMbJaLhC3LPzPuFOKaD6zEM+tt15gNxTPLIg5dvglCfGmbmakYmqmKsEfRVOWWAXjqvEzVeamT6botq9321Vu2rIb7KOrufmZ24LWmoiI3yspJJ65e704JprBSFGH3pxXLhAQe9fBzbM1rq7YAm1dsctvZSiqu8G94rxwS/LQ7JYorRR0XXq/GmSh4dJADKAsSk70ajQ8gHdE0MhzVjOCbVDSvKINd1PhKVN+fgMTG2zYCvIaq+V2mmsNTP36IRLD6xO7ejWTDisfc7zCVD6tQW+/eMTW1Y3fSt20foe+hBZpQ3zfGfH3vyzmCZNvHFoJFVPrRjj7m6I26M3r7KHQxgD5c2H/4tQdIeJLJ+yQDvTsZOwv4jYfJQxVaxxmtKtNTTVaQnRmS6kkWvfBoNvCeIT55jt41PJZwpg3YYeJYGK+dppgK/sF+R/8ggZIOBlnyNoK/qpwokLZ6uCFRKCTKV8HeGaYksPg2Xj/3fyQZb6dhGWv2QLLQU4DW7lZwf77Hw+vb3AjzexKIVywkEXoGlB1JUqr4FW3A7BZlDzgzhZ5W0tyfI1da7mmn13JvsZOFxLuJIRsmLXJVskByA41iu/uvSds9bWOnPZQ4lSgANm+xqQ6gMPlGH2YR79rSDIXLXQBujHZSxkCpSIeynwCdNxEFJ2HVmSDaFPxQYoIN2BfCM8E6zTCu66VDSQ97KkPfIa8i7nGUITNAZagDhYFJjeg5rXh+bcBuYamT/JWmRVE8Iopeb/3ud1ZdSIs4TkQLcaogJ63Z5dGUxEfefz8qSKko+Qm2PB/ZgyEEMngmjkjovYB0GBog+n9COzD7MiQ73pfOA5S8NLseIst+QWbPC9y/J8dRv7QFliCNWcnzAYlI3fE8hdNVbBPY1WEeZxm8m5mKOdypQRG1qhiRgQBnZbr7N20qT1ipoPsLVYWEGq8hE3BoLPn2tV8PhWVe0WTB4nIN3WMD7cmIiDZEhaSSROulWMbk2+sX4LIs0Iq4NNdUfV3mDeqCbaEOligmbYSFCaU0VRVULrhTKoKlIMubNvV3ZyyOByWMilXkBpNjcIjihTjBrwzF/bmKF1iMJNsHxrobcnxElDVF0C3u69fevP5txIsEcUrVZyR96DPqiI/C+zGTp0uZGkXVP6PG1RncET7Ey/eKjnX885QeWw83krsCIVyvMp8TD9P3rEvMFUkFZxS6Rw25ytWQJ/52/tqLyQSDrc7Dpiq/H2XDgYsVBgjnK7BF95EwLKLNKLh0bg5x74VXPNwJO1fq7raB588j7pbhat78pDKjPE1td1Jl6Hhn8Q73LdISsCrrgwuijljQ28Tinnavx+Xu9ap6jYqn2QzNaly7RoVJ99MoBl/DvmtU1X0Lu3FCnO37XXKEW832Nai8BYnDKKvIF92W3F9dotK94ahCNyJPuW+5b2L1WrQ2X6fSc1TBejLg77uvsm8FX2b1ghWk6cbjuB1FUIVm9y0f6aMKfMbdhjshNGihFKgIgE7044ZvkbXz+zbh3chXN/f35Z6mOyF2b/m7H6V7HVV3XYOYtiDOig/J25bh+xPuAPMdxRPRc8V1YU8Z2mEv9OIO2O6DTg8Wtt2C3+lCcjBRmEaNVbDhi0nLnUK1ttvqdVpsexruQ93WGnf3T9s47N+te7nN5FeohRGeChUfIvZx5htAPYTNjQl/ea/tTlkW7LZ7nIK3dyNsGUwWpq0+a4k/ALvozB5nurkCqwthUdrq5mnzBD/tu5rpfPVYuC6L0VZwnMfd/YnGxgTc97jjFNjGFvRQ6iyrYPfZjyPVyQJM233YRF5YVb1xgLzjwVMX3NOwZ/K7wtJZx4W8pGRNNzf4ZOBeCKgPCxuKcUYmxQNycbjP5wGlEJGk8OZc369tR3gtaZ+X6CbmVkIONRVJcugpluk1TQL1Fqmfy1ELVi4hYy1zJhYNj4zu7RkfbuebN17fv+q2Fj4sDgtE7Hv2uk89uneIH7j9yNWjR1YMmUvJSzO6s9QcGWkbHt83PtzW0yWCMMLr4roNcMm+o88e3XdJ/0VDkWiFDxSv5YhXq8d3nVAryjjtoDXp7Ojn2gg6ijGHIUxDpQZ0Y2lQym2+5NZHN219to8XhsUw33Lb6p6dG9DVGN598/bmkXA0NoPeR2t4qO/h0U8d3bcKtmB5yeilos6PCCB29fgINjeNmEsdfaYmGhm6qB9RrPhEx7mrEbfGwCDauZXNJo09wLJ1oAhSe1NxWkUDKKJofMqeE+szt8S4K9JYmjbLXRRtylOU1vWN//mVy4/0DVGNqM9QJT7SvL287ot5MSZoGC/oyHTWO7p3vdd5s6RB439/5fKH6aIaEDh46AVkpMqWo1YdaWpe1690hzT4e79jxGuLvD+R0iUwuiJ+TLUM4+yrA8aAdsVAsX1JFgMsTkCF4ceBdtgLZ8oXaENnPpfPipLA6A57nn4+XI1hUbCoYmig1KP5pH44Kybnq4cUyatKivvTmXpeOC7y8J4il3yHncWVz+SDrc5zTqucPyYro3Af7XP30/I8ddJxsQAgXIFbz37QdsmqNhJl0K6145C0rkWzExAX8aM3sDpwYyA8oF83PNBXWu7xRPQMIT1E6syw7M4F2tFwOmyhVKQ7+uH/lz9DribLBF4jsuze94lYBc+7LzLOXMw4c+66u52EZz/QLEWxyA0XZFuA9+OVUfSTwyzWCw0o3a0Jx9BYTrKp2AZiEi9qGSs6OFhZkPboRDXesZKpbcd3UOjV8dMgNNQhr1pJh0Qy5petVIQ48Zq1KefMj7zIhluf3pQeBs5JfUuJMGcgHFRik16gP1mzHX2EmroaYhmVysETLOo54aSGU/gHzbEwdRvCMXuGhUczHj3HkZ42Rk9LYIDS07c8YRuqSBg91Pmnwo8VghFR2Y9oKTmxziSwi0HTN2I1cMvT3E7Fezk/Pae1UnYyUwqdRnqCNZPoXSJSk6hxGWmRBKqBSMqyTP97/wmaJcQCGpqbG5Iw6vhEtHpEVWihepULpFG3rqG0rOha2qTxJIC0YOSYFjrxEtP8nlSlIxvu7PLcRKmS76mk04Sq0HoTqJ04CcfcK+DDIU34mhCX/dByaAiDy58ibicVeRdNJrNyezI2G/ESlUKsZDxiOtLJk/ChXCc9Imp+1nO2xL6QZIkkWiizM7SHIF9q9K8ZpQDx8zOjgWaMzORvdrSGPJ2sEzRYZer9O2gmWD4zSTr6sSuH8Uc/IGjmyLIMOHUV0G48840967ixy2v6zIhcU+pr3bDj9u0bc1xfqUbO9sUuH3O/iqEbFPqaPbOBZuFTO57rx7mxvnDL7avRFLah/ei55LZCpKddjqz4OxhyH6YRLuzA0rcfY5yC8rQTcb08JdLYleZW8TZ0lGgSCyVfQoQtRDiPV6BqKLryzL7kqRmkuoGdE5UzlKWy39mJQlU1OChf1KrEHOYcsdMhvaO3j5JN+zZBXJZ2Kmq0WRSMDSFJGqmtC0q8eZesmfWxPxNNca3DC3KzYsg7MBBXhJ2yHmvy5sojNXVBmQvfhUdoxJ0NgiENWTzfqwd3SOjC927ceNvGjbfTUTNp13eIumhvAKEvJA/HTUW6Maj1CeJAUtBFrcOI1xugSWxubV1qqaRJ1gZvqiHLbKqwOo5TR9hELw7/iBsjL/t6WXl+SWN9VOO5RfnTtJcwreTFY35bWthGB+bMB+yOcGEDg4bztxbkUR0wh1h2kJWgV0awMR+Hjvn5mlrmu9BMCMpYsZynmQC8KR2xco4maZIg5jN5CU86ViJ/s27nzqlxgFc6167fuXP92s5XYOdDO8j4pYNYw16IjR8eH79U0ra3Y6V9uyat20l2P7AbsKpjJ81Tzs39nt9PXgqYeL9LNB+Yi9uMN1BEZ0knnvijDiZLEDg6dJ30NuA9oQEVh9U0uk/kgO8A+R94pvWy8YveWn0ZWbfmLepJXdqz5Z5B94qhu7d2k75r7l0Lx2gVtvTMr6FXgDY7p56d6qSNS+/e0ke6r//CQ1/YXiTdW++u+FK/529HfC3klvzNhK3Te4txIUFlkuQ8tIjguXrUG6WAPWgMsIcDF664d3v3DHXwhQ07YMul2I9QDvtQXz+bokoej3uUo5mt1Qi7f/m58pGoIAyavsnnFiUl8cbhKTpRmI+CKw9Y1oKc5GvZZJCT6kWJcCHNzzDS3KTQKEocr/6Fe1GoUf+1rq/QG/W/hs9goz8E649Xc5M6HxXjAnDV9OT9spBFuwOC26Prv2bzQ3RhCHfwaYpW8+LxqOzlYOZR7/Kf/RbmXMktCzAr3jWP/Kqt5KUqZDq4uTqyBbYGfL17HcuL19KcjykyePSoAP2bNgILH1qOXXFwA9l471P3bOIvOwRXL8j+k0OjB6cPjrLCfe2sXP/824QcsAMZlOmGWiMo0rwb4K1qo+mH/LkBVlXdA+cFXFFWvz0//AXvbZ6+ac3GoyzHHvXfzCqvNILfLi9qV7KBJ/03OPbql/A+XlcDa3g9C1/rnPPU/XzkR4E3q/4p6kHES6V3vVx1M7x3EG4RnpwfhuT9B8mTF4BG6w/vZp7SbtoL4oJBkCuYe2+LL3GT6CtdzGKjNas6FGaHETyqOIeljCSdy4azYTwkLxFIL08OHSKaM+7sonl9vERpGguhHaS5bUgz24xu3ETTPsVKqntkIZfpqR1MdBfQKd6hmiFHviU1QZ260MQ2FSOcbfDmVoyFeHkb9rq/db9KFWsP6uutqz6LgZW6R+JrIjp86Gp6jSXL+7RoUv38yjEracH0NiVpKdu2ISBl27QDRdTKAT9WHoc/IL/p7w4sptcdmtpFR6IcZRnNXDnaT909x7Ykjj6PwmlFdP9FMuWgQvb8nAiKpHB7iS4/r+pk678LRCWOGpq9QwfOlOGlbpDkEPwThngKL7puibAY5LvMl+ZQQ8Yx4mxF/wZjkGJ7a3NjKl5jyjiJ/hAhLzVVExN+9qMpZsAyWImhu/eF2NlfcmS6bxq6lNlO9CZvxpjon/G7R5k1SqVwuFwOv3HTTZn0TTelSQs2wtjpPkNH8D/RH++b3mkosx0KLkzSlfi92qSrzPKX2arMTe692ChjJ7T5I75t3I487EIe5jXKQ6pg6Q83qs/lEn3noSFynmb4aOrBF9sEoBuHhKFYcL11up41emofLCQGE60wVdeDClSvn5qqM41Go7t+iuWUHqzrNrOGWTsFst5TtwLXXPk0Syc9fSX2rsBFmzadY6C/Fge8d+e5uXHkfyiQRc6vwTu2Ylkhz95Fq2/8+YVv/CxSqb7xxyqhDjDBRxFBxcQnSYzeBfrYNqGJjej4TLDfWEywII42hqZ+/BB/6I2DkCn0WS9uv3PD4Z0DpG/3oemDe7u5NS/aMOWtol60t2qCusYTSi19uHn1iHiQOpz2i2v6xx/4xqE9PfyqHQ+N3Ln9RftsmoxADcYAyvMt9Y73lr7wdwTUmb8g/u53GOaw6pPizJC9MJrEj7noG9sG1CNhmWN2BcF2dpRzGBfz5XrojEWZRxuj6aCYY0tiLJOTMmK2uJJQjxj/8hjKEB1iGHCj4JTpxczQzEtehAevG+5pUO12twtCjfG4I979yJB4a7RlZbDdVGV1OMgDQPZQY+ERm1wqiVyYJwJHMrGaP+o9YKbUlE2ApL6YEiyylNT9ESff74qtvCgqNSZcBVOa+2Hr9q9E70rVikGTcxRJ4BSQa6ImzpQIEXk+OFbqhvQRQ4souDWotqAiL2Xqm+AZ/Yz0kXcCOnvfqg1779vzOXtqtvPMii9Ig5+dwj87Kf4bQ6EJfdRt4PyQZYFY0/NXERbE5vPzi+As2njhToFqfp7h6ufXYTFiZ6MCryyG/xQX5qIBFddLfr6b+SYsHc3P1ocikRD5rxCMuNslxeBKuiZjzQpUY6kFvwNgPtyioHRxkEr9fv+HE5AwHFc9q0neOXOa/kiAi9ByQX3et1fZb2+q7yCL914QN5y1GVt/DOVaR29JPCECXV9iGaI84A7sQ9W3Y4dLZe4vVR1Mxd3Hc7rq7lNVOKjqHM9xqmiceVWXNTgoiO6fswpN0R/EfnefyHtnMvcsdw1nzMOJiSzGpQ+SPmclxmVRqlVM0HG5wNFSQYAIRhjE3ZDTsobwJbifVegTxj7sx7mCRwvp5XSWh6/QYs/TwjyMahKsVCYZVaeECMTR56MplPyzCfrSPO/dL0m8RwvpQ1oS56aF7i/58Mpn0eOHaKxcTNGd84cLd4oCvXPu3B+4a8kPUA7rmSzJ7E3Zy7OzuJEm/Mt+7Eh/pyDPMx7xF7luuh/CY9hDe4WZYLqvW+YhFlJiWX1PO0aOB6L0t3AVOUK7V/XSqP8Dx/CavHCY8erwC3jhyKHZR2nu9wXvpz4vKN4dwOIA22sZ/S1RTbhyBxbvF/XeXzEQpfEUTa0hLTTE+RigN9vzQhBp0RzT5OUaKazwlhEU8u0fx8D9XmGdwVmmZmpavDGuichhJJUz1nn5pp9yj5H3GG7DgZtovmnn5YNFiiT/JyIZqw6Uvd+i0TRIFwumFw7SVEg/TYvQDM/8hE9O4uTWEVlECuyU2tLW1oKK3jIk+bItDxy6TZKw36mttdZgKDxo1fIRzrFMSbrt0J/Cl8KVh1OcozuqGUyO7RxLBk3UrA6XfmDTF97qwAErpOl655GnjnTqOidyIQsHO08G/hcLt/j/AAB4nGNgZGBgAOLaW41M8fw2Xxm4mV8ARRguss1QhNC5H/9//Z/FUsEcBORyMDCBRAFTFwxveJxjYGRgYA76n8UQxVLGwPD/FUsFA1AEBfgBAHyYBUh4nGN+wcDAvACCWfSBNIgviMBM1kA6koGBMRWVBqsDYqYmiF4wHQkxg+kUBMPVWEP0gTDYvBdoahZAzYxEY0ciuWUBFjkoZimDYLC8IKpehmsQccYvSGYgYZB7YBhFL5o8cxTQjDUI/wIArpclrwAAAAAAAAA6AIYA3AEKAUgBgAGgAfoCYgKqAwIDOgOGA9wEQAR4BLYFAgU8BZoFzAYMBlIGmga6BtgG+AcYB0QHcAecB8gIAAg2CG4IpgjyCUAJrAo0CtALOAueDAoMYA0ADVANjg3mDiQOjg7GDvgPOA+ED84QPBB2EN4RNhGgEfISchKoEsgS6BMGEz4TXhOSE8QT+BQsFGIUiBTWFX0AAAABAAAATgBuAAYAAAAAAAIAAAAQAHMAAAAiC3AAAAAAeJx1kctOGzEUhn9DoIKgLloJdcdZIRDK5CKhSqyoogJrhLJDwgyeSzpjRx4HlGfgLcoz8Dp9j+76Z2KhqFJmZM93Ph/bxx4AX/AHCqvnnG3FCgeMVryFT/gReZv+JnKHfBd5B108RN6l/xV5H2d4idzFV/zmCqqzx2iK98gK39RR5C18Vt8jb9P/jNwh30fewaGaR96lf428j4l6i9zFsfo7drOFL/MiyMn4VEaD4bk8LsRRlVZXouehcL6RS8mcDaaqXJK6OtSml+lemTrb3Jp8Xmm/rtZ5YnxTOivDZLCur401XgfztNytec5HIWSSeVfLVdxHZt5NTRqSIoTZRb+/vj/GcJhhAY8SOQoECE5oT/kdYYAhf4zgkRnCzFVWCQuNikZjzhlFO9IwvmTLGFlaw4yKnCBlX9PUdD2Oa/Zlay1n3dLmXKei9xuzNvkJ7XLvso2F9SaselP2Na1tZ+i2wqePszV4ZhUj2sBZy1P4tmrB1X/nEd7XcmxKk9In7a0F2gv0+W44/z/KQo7lAHicbZLnlpswEIW5Bgy4bLLpvfeE9N57z76DLARWEJKOEEucpw8CO/kTncOdT6PhnlHxRt4wJt7/x47nYQQfAUKMESFGggmmmGGOLezBXmxjH/bjAA7iEA7jCI7iGI7jBE7iFE7jDM7iHM7jAi7iEi7jCq7iGq7jBlLcxC3cxh3cxT3cxwM8xCM8xhM8xTM8xwu8xCu8xhu8xTu8xwd8xCd8xhd8xTd8xw/sBLUlZuIkZZW2q0hzahvDRqocUyIpE4EWTR1WXDZ1sGRCz5yklBsqWBZwmauZk01mTqxl0nIlUyLs9r/Zej35m4kFl2XKftlAKFomTlKlmfQ1l74lRdB9dbxQqqyIKbc2MPQZGqbFKsqVaYnJ4ky1Ms24iQXLrYPE8GLZ07jRfaIvcf5JX+NoMhQ5jLoqFwenBS8Gpw7WTh05py6MaOtT2ibEGNXWKW1Da0i9nPY6dNe7CEWy7pc+5EJpvfJVnvtUFUHFZBPWS2LYxKqiECztVpINypAuGS2nvQ6Gs+H0hsk0U3ZznDETguua1/MNpLvMWH/RFGEuuobCihScxqS2zPC6jH4rVaVcxn1UjQ1yJW1QK2MTJ6nrPOqp0d3Vk1WoSVOz7p0oHeWdTbpoh5i3sVWpezp23AGTWch+Mmonu0o0Vb+l6RqdabLmRnveH9ru7j54nGPw3sFwIihiIyNjX+QGxp0cDBwMyQUbGVidNjIwaEFoDhR6JwMDAycyi5nBZaMKY0dgxAaHjoiNzCkuG9VAvF0cDQyMLA4dySERICWRQLCRgUdrB+P/1g0svRuZGFwAB9MiuAAAAA==) format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:focus{outline:thin dotted}body{color:#eee;background-color:#111}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}span.link-disabled{color:#aaa}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{cursor:not-allowed;background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input:focus,input:hover,select:focus,select:hover,textarea:focus,textarea:hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}textarea{resize:vertical}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error{padding:.25em;background-color:#511;border-left:.5em solid #c22}.error[title]{cursor:help}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0"}[data-icon-after]:after{content:"\00a0" attr(data-icon-after)}.error:before{content:"\00a0\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}.passage .error{white-space:nowrap}</style>
<style id="style-core-macro" type="text/css">.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-repeat-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-repeat-in,.macro-timed-in{opacity:0}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:1000;position:fixed;top:0;left:0;height:100%;width:100%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:1100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:90%;height:calc(100% - 2.1em - 34px)}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0;min-width:140px}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;min-width:340px;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999}#ui-dialog-body.saves .datestamp{font-size:75%}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-label]{font-size:87.5%}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:.5em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.share{min-width:140px}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-debugview" type="text/css">#ui-bar-body>#debug-view-toggle:first-child{margin-top:1em}#ui-bar-body>#debug-view-toggle:first-child+*{margin-top:1em}#debug-view-toggle{text-transform:uppercase}#debug-view-toggle:after,#debug-view-toggle:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#debug-view-toggle:before{content:"\e838\00a0"}html:not([data-debug-view]) #debug-view-toggle{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}html:not([data-debug-view]) #debug-view-toggle:hover{background-color:#333;border-color:#eee}html:not([data-debug-view]) #debug-view-toggle:after{content:"\00a0\00a0\e830"}html[data-debug-view] #debug-view-toggle{background-color:#282;border-color:#4a4}html[data-debug-view] #debug-view-toggle:hover{background-color:#4a4;border-color:#6c6}html[data-debug-view] #debug-view-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
<style id="style-aria-outlines" type="text/css">*:focus{outline:none}</style><style id="style-story" type="text/css">#ui-bar {
display: none;
}
#story {
margin-left: 3em;
  margin-top: 5em;
}


body {
 font-family: verdana, Arial, sans-serif; 
font-size: 110%;
  vertical-align: middle;
  }

.menu {background: url("https://raw.githubusercontent.com/wojctrz/luxassets/master/menu.png") fixed;
 background-attachment: fixed; 
  background-repeat: no-repeat;
  background-size: cover; 
}

a {
 color: silver; 
  }
a:hover {
 color: gray; 
  text-decoration: none;
}

  .big {
 font-size: 400%;
   color: teal;
}

.odys {
 color:  DodgerBlue;
  }
.speech {
 color:  Orange;
}

.sandra {
 color: HotPink; 
}

.sandra a {
  color: HotPink;
}

.sandra a:hover {
  color:indianred;
}

.items {
 color: limegreen; 
}

.header {
    font-size: 140%;
}

.author {
    font-size: 60%;
}


#tab { display:inline-block; 
       margin-left: 40px; }

.macro-repeat-insert,
.macro-timed-insert {
	-webkit-transition-duration: 800ms;
	-o-transition-duration: 800ms;
	transition-duration: 800ms;
}  

img {
    width: 100%;
    height: auto;
}</style></head>
<body data-tags="menu" class="menu">
	<div id="init-screen">
		
		
		<div id="init-loading"><div>Loading…</div></div>
	</div>
	<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1><button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="Close"></button></div><div id="ui-dialog-body"></div></div><div id="ui-bar"><div id="ui-bar-tray"><button id="ui-bar-toggle" tabindex="0" title="Toggle the UI bar" aria-label="Toggle the UI bar" type="button"></button><div id="ui-bar-history"><button id="history-backward" tabindex="0" title="Go backward within the game history" aria-label="Go backward within the game history" disabled="" type="button"></button><button id="history-forward" tabindex="0" title="Go forward within the game history" aria-label="Go forward within the game history" disabled="" type="button"></button></div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title">Lux</h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><nav id="menu" role="navigation"><ul id="menu-core"><li id="menu-item-saves"><a tabindex="0">Saves</a></li><li id="menu-item-restart"><a tabindex="0">Restart</a></li></ul></nav></div></div><div id="story" role="main"><div id="passages" class="fadeIn" style="display: block;"><div id="passage-main-menu" data-passage="Main Menu" data-tags="menu" class="passage menu"><center><span class="macro-timed"><span class="macro-timed-insert"><span class="big"><div align="center">Lux</div></span><br></span><span class="macro-timed-insert"><a data-passage="Intro0" class="link-internal" tabindex="0">New game</a><br><br></span><span class="macro-timed-insert"><a class="link-internal macro-link" tabindex="0">Load game</a><br><br></span><span class="macro-timed-insert"><a data-passage="about" class="link-internal" tabindex="0">About</a></span></span></center></div></div></div><div id="store-area" hidden=""><tw-storydata name="Lux" startnode="2" creator="Twine" creator-version="2.1.3" ifid="4713641F-7E28-45DF-8E06-96E16E2AC58D" format="SugarCube" format-version="2.18.0" options="" hidden=""><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">
#ui-bar {
display: none;
}
#story {
margin-left: 3em;
  margin-top: 5em;
}


body {
 font-family: verdana, Arial, sans-serif; 
font-size: 110%;
  vertical-align: middle;
  }

.menu {background: url("https://raw.githubusercontent.com/wojctrz/luxassets/master/menu.png") fixed;
 background-attachment: fixed; 
  background-repeat: no-repeat;
  background-size: cover; 
}

a {
 color: silver; 
  }
a:hover {
 color: gray; 
  text-decoration: none;
}

  .big {
 font-size: 400%;
   color: teal;
}

.odys {
 color:  DodgerBlue;
  }
.speech {
 color:  Orange;
}

.sandra {
 color: HotPink; 
}

.sandra a {
  color: HotPink;
}

.sandra a:hover {
  color:indianred;
}

.items {
 color: limegreen; 
}

.header {
    font-size: 140%;
}

.author {
    font-size: 60%;
}


#tab { display:inline-block; 
       margin-left: 40px; }

.macro-repeat-insert,
.macro-timed-insert {
	-webkit-transition-duration: 800ms;
	-o-transition-duration: 800ms;
	transition-duration: 800ms;
}  

img {
    width: 100%;
    height: auto;
}


































































































































































































</style><script role="script" id="twine-user-script" type="text/twine-javascript">/*pop-up*/
Macro.add("popup", {
	version : { major: 1, minor: 0, revision: 0 },
	handler : function () {
		if (this.args.length < 2) {
			var errors = [];
			if (this.args.length < 1) { errors.push("link text"); }
			if (this.args.length < 2) { errors.push("passage name"); }
			return this.error("no " + errors.join(" or ") + " specified");
		}

		var	el      = document.createElement("a"),
			passage = this.args[1],
			title;
		el.innerHTML = this.args[0];
		el.className = "link-internal macro-popup";
		el.setAttribute("data-passage", passage);
		title = el.textContent;
		UI.addClickHandler(el, null, function (evt) {
			var	dialog = UI.setup(title, "popup");
			new Wikifier(dialog, tale.get(passage).processText().trim());
		});
		this.output.appendChild(el);
	}
});

predisplay["Menu Return"] = function (taskName) {
	if (! tags().contains("noreturn")) {
		State.variables.return = passage();
	}
};

Config.passages.descriptions = {         
	"RoomA1" : "Exterior module, research room",
	"RoomA2" : "Technical corridor",
	"RoomA3" : "Exterior module, storage room",
	"RoomA4" : "Exterior module, airlock",
	"RoomB1" : "Section III corridor, southern part",
	"RoomB2" : "Section III corridor, south-western part",
	"RoomB3" : "Section III corridor, north-western part",
	"RoomB4" : "Section III corridor, northern part",
	"RoomB5" : "Section III corridor, south-eastern part",
	"RoomB6" : "Section III corridor, north-eastern part",
	"RoomB7" : "Section III, lift room",
	"RoomB8" : "Section III, technician's office",
	"RoomB9" : "Section III, lumber room",
	"RoomB10" : "Lower technical tunnel",
	"RoomB11" : "Lower technical corridor, cave-in",
	"RoomB12" : "Section III, docking module – corridor",
	"RoomB13" : "Section III, docking module – platform",
	"RoomB14" : "Section III, storage room",
	"RoomC1" : "Descending tunnel",
	"RoomC12" : "In the technical tunnels",
	"RoomC14" : "Generator room",
	"RoomC15" : "Technical tunnels, lift room",
	"RoomD1" : "Section II, lift room",
	"RoomD2" : "Section II eastern corridor, eastern part",
	"RoomD3" : "Section II eastern corridor, western part",
	"RoomD4" : "Section II, bathroom",
	"RoomD5" : "Section II, storage room",
	"RoomD6" : "Section II, boiler room",
	"RoomD7" : "Section II, Dr. Romani's laboratory",
	"RoomD8" : "Section II, central intersection",
	"RoomD9" : "Section II southern corridor, northern part",
	"RoomD10" : "Section II southern corridor, the breach",
	"RoomD11" : "Section II southern corridor, southern part",
	"RoomD12" : "Section II, Sandra's room",
	"RoomD13" : "Section II, Dr. Santos' Room",
	"RoomD14" : "Section II, robot maintenance centre",
	"RoomD15" : "Section II northern corridor, southern part",
	"RoomD16" : "Section II northern corridor, northern part",
	"RoomD17" : "Section II, Sasha Zinov's office",
	"RoomD19" : "Section II western corridor, eastern part",
	"RoomD20" : "Section II western corridor, western part",
	"RoomD21" : "Section II, gym",
	"RoomD22" : "Section II, canteen",
	"RoomD23" : "Section II, Jim Mulligan's room",
	"RoomD24" : "Section II, Sasha Zinov's room",
	"RoomD25" : "Section II, Robert Marsh's room",
	"RoomF1" : "Section I, corridor by the lift",
	"RoomF2" : "Section I corridor",
	"RoomF3" : "Section I, information centre",
	"RoomF4" : "Section I, room with the fuse box",
	"RoomF5" : "Section I, corridor by the docking module airlock",
	"RoomF6" : "Section I, corridor by the command centre",
	"RoomF7" : "Section I, command centre",
	"RoomD1!" : "Section II, lift room",
	"RoomD2!" : "Section II eastern corridor, eastern part",
	"RoomD3!" : "Section II eastern corridor, western part",
	"RoomD4!" : "Section II, bathroom",
	"RoomD5!" : "Section II, storage room",
	"RoomD6!" : "Section II, boiler room",
	"RoomD7!" : "Section II, Dr. Romani's laboratory",
	"RoomD8!" : "Section II, central intersection",
	"RoomD9!" : "Section II southern corridor, northern part",
	"RoomD10!" : "Section II southern corridor, the breach",
	"RoomD11!" : "Section II southern corridor, southern part",
	"RoomD12!" : "Section II, Sandra's room",
	"RoomD13!" : "Section II, Dr. Santos' room",
	"RoomD14!" : "Section II, medical room",
	"RoomD15!" : "Section II northern corridor, southern part",
	"RoomD16!" : "Section II northern corridor, northern part",
	"RoomD17!" : "Section II, Sasha Zinov's office",
	"RoomD19!" : "Section II western corridor, eastern part",
	"RoomD20!" : "Section II western corridor, western part",
	"RoomD21!" : "Section II, gym",
	"RoomD22!" : "Section II, canteen",
	"RoomD23!" : "Section II, Jim Mulligan's room",
	"RoomD24!" : "Section II, Sasha Zinov's room",
	"RoomD25!" : "Section II, Robert Marsh's room",
	"RoomE1!" : "Section II, under the trapdoor",
	"RoomE2!" : "Section II, hazardous materials storage area",
	"RoomF1!" : "Section I, corridor by the lift",
	"RoomF2!" : "Section I corridor",
	"RoomF3!" : "Section I, information centre",
	"RoomF4!" : "Section I, room with the fuse box",
	"RoomF5!" : "Section I, corridor by the docking module airlock",
	"RoomF6!" : "Section I, corridor by the command centre",
	"RoomF7!" : "Section I, command centre"
	
		};

//fade-in
postdisplay['fadeIn-text'] = function (taskName) {
    $('#passages').addClass('fadeIn');
    $('.fadeIn').hide().fadeIn(800);
    };



























































































































































































</script><tw-passagedata pid="1" name="StoryInit" tags="" position="63,40">&lt;&lt;set $itemname to "none"&gt;&gt;
&lt;&lt;set $cartlocation to "B9"&gt;&gt;
&lt;&lt;set $bottleoncart to false&gt;&gt;
&lt;&lt;set $bottlefull to false&gt;&gt;
&lt;&lt;set $pressure to 17&gt;&gt;
&lt;&lt;set $valvegreased to false&gt;&gt;
&lt;&lt;set $bottleinstation to false&gt;&gt;
&lt;&lt;set $fuseinstalled to 0&gt;&gt;
&lt;&lt;set $lever1name to 'upper'&gt;&gt;
&lt;&lt;set $lever2name to 'upper'&gt;&gt;
&lt;&lt;set $lever3name to 'lower'&gt;&gt;
&lt;&lt;set $lever4name to 'lower'&gt;&gt;
&lt;&lt;set $lever1 to 1&gt;&gt;
&lt;&lt;set $lever2 to 1&gt;&gt;
&lt;&lt;set $lever3 to 0&gt;&gt;
&lt;&lt;set $lever4 to 0&gt;&gt;
&lt;&lt;set $debriscleared to false&gt;&gt;
&lt;&lt;set $mazebegun to false&gt;&gt;
&lt;&lt;set $fusesfromd1taken to false&gt;&gt;
&lt;&lt;set $coffeecartlocation to 'D7'&gt;&gt;
&lt;&lt;set $northlockthawed to false&gt;&gt;
&lt;&lt;set $holeincup to false&gt;&gt;
&lt;&lt;set $coffeedrunk to 0&gt;&gt;
&lt;&lt;set $hatchopen to false&gt;&gt;
&lt;&lt;set $cleaningrobotactive to false&gt;&gt;
&lt;&lt;set $fusesd to 0&gt;&gt;
&lt;&lt;set $labdooropen to false&gt;&gt;
&lt;&lt;set $screenexplode to false&gt;&gt;
&lt;&lt;set $infobuttonpressed to false&gt;&gt;
&lt;&lt;set $alienskilled to false&gt;&gt;
&lt;&lt;set $fuseboxopen to false&gt;&gt;
&lt;&lt;set $d9seeopen to false&gt;&gt;
&lt;&lt;set $badrobotdestroyed to false&gt;&gt;
&lt;&lt;set $useking to false&gt;&gt;
&lt;&lt;set $usebandage to false&gt;&gt;
&lt;&lt;set $lighter to false&gt;&gt;
&lt;&lt;set $kingplaced to false&gt;&gt;
&lt;&lt;set $odysdisabled to false&gt;&gt;



</tw-passagedata><tw-passagedata pid="2" name="Main Menu" tags="menu" position="218,46">&lt;center&gt;&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class="big"&gt;&lt;div align="center"&gt;Lux&lt;/div&gt;&lt;/span&gt;
&lt;&lt;next&gt;&gt;[[New game|Intro0]]

&lt;&lt;next&gt;&gt;&lt;&lt;link "Load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;

&lt;&lt;next&gt;&gt;[[About|about]]&lt;&lt;/timed&gt;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="3" name="Intro1" tags="" position="220,167">&lt;span class="odys"&gt;ODYS: Sandra? Can you hear me? It's me, Odys – the station's AI. Answer me, please.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: Ugh... What's going on…?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: Sandra, you must listen carefully. Please, stay calm. Something terrible has happened, but you're safe now and I'm here to help you. Do you understand? Don't stand up yet. Take a few deep breaths. I'm going to ask you some simple questions. What's your name?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: Sandra Nowicki. Why... am I on the floor? Why is it so dark here?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: Slow down. Please, tell me where you work.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: In an OSMiC gas mine... on planetoid D107.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 8s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: That's right. What's your job position?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: I'm a research assistant.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 10s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: Indeed. Who's your immediate superior?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 11s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: Doctor... doctor Alice... Can't remember her last name... Is it Romani? Yes, Alice Romani. Why are you asking me all these questions?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 13s t8n&gt;&gt;&lt;span id="tab"&gt;[[Next|Intro2]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="4" name="Items" tags="noreturn" position="534,5">Item selected:	&lt;&lt;if $selitem=="sandrascard"&gt;&gt;Keycard
&lt;&lt;elseif $selitem=="bigstone"&gt;&gt;Large stone
&lt;&lt;elseif $selitem=="rod"&gt;&gt;Measuring rod
&lt;&lt;elseif $selitem=="coat"&gt;&gt;Heavy lab coat
&lt;&lt;elseif $selitem=="bandage"&gt;&gt;Bandage
&lt;&lt;elseif $selitem=="cylinder"&gt;&gt;Small cylinder
&lt;&lt;elseif $selitem=="mulliganscard"&gt;&gt;Mulligan's keycard
&lt;&lt;elseif $selitem=="mulliganspapers"&gt;&gt;Mulligan's papers
&lt;&lt;elseif $selitem=="bourbon"&gt;&gt;Bottle of bourbon
&lt;&lt;elseif $selitem=="glassempty"&gt;&gt;Empty glass
&lt;&lt;elseif $selitem=="glassfull"&gt;&gt;Glass filled with oil
&lt;&lt;elseif $selitem=="fuse1b"&gt;&gt;Fuse
&lt;&lt;elseif $selitem=="fuse2b"&gt;&gt;Fuse
&lt;&lt;elseif $selitem=="wrench"&gt;&gt;Socket wrench
&lt;&lt;elseif $selitem=="tube"&gt;&gt;Elastic tube
&lt;&lt;elseif $selitem=="comm"&gt;&gt;Portable comm device
&lt;&lt;elseif $selitem=="backpack"&gt;&gt;Backpack
&lt;&lt;elseif $selitem=="fuse1d"&gt;&gt;Fuse
&lt;&lt;elseif $selitem=="fuse2d"&gt;&gt;Fuse
&lt;&lt;elseif $selitem=="cup"&gt;&gt;Plastic cup
&lt;&lt;elseif $selitem=="spoon"&gt;&gt;Teaspoon
&lt;&lt;elseif $selitem=="cookie2"&gt;&gt;Cookie
&lt;&lt;elseif $selitem=="knife"&gt;&gt;Knife
&lt;&lt;elseif $selitem=="sashadeskcard"&gt;&gt;Keycard found on Sasha's desk
&lt;&lt;elseif $selitem=="santoscard"&gt;&gt;Dr. Santos' keycard
&lt;&lt;elseif $selitem=="emptybottle"&gt;&gt;Empty bottle
&lt;&lt;elseif $selitem=="sashascard"&gt;&gt;Sasha's keycard
&lt;&lt;elseif $selitem=="king"&gt;&gt;Chess king
&lt;&lt;elseif $selitem=="dongle"&gt;&gt;Dongle
&lt;&lt;elseif $selitem=="lightfuse"&gt;&gt;Light fuse
&lt;&lt;elseif $selitem=="heavyfuse"&gt;&gt;Heavy fuse
&lt;&lt;elseif $selitem=="helmet"&gt;&gt;Helmet
&lt;&lt;elseif $selitem=="lighter"&gt;&gt;Lighter
&lt;&lt;elseif $selitem=="explosives"&gt;&gt;Explosives
&lt;&lt;elseif $selitem=="pistol"&gt;&gt;Pistol
&lt;&lt;elseif $selitem=="cookie"&gt;&gt;Cookie
&lt;&lt;elseif $selitem=="marshcard"&gt;&gt;Captain Marsh's keycard
&lt;&lt;else&gt;&gt;none
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $sandrascard&gt;&gt;&lt;span class="items"&gt;Keycard&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "sandrascard"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|sandrascard]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bigstone&gt;&gt;&lt;span class="items"&gt;Large stone&lt;/span&gt;
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "bigstone"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|bigstone]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $rod&gt;&gt;&lt;span class="items"&gt;Measuring rod&lt;/span&gt;
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "rod"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|rod]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coat&gt;&gt;&lt;span class="items"&gt;Heavy lab coat&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "coat"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|coat]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bandage&gt;&gt;&lt;span class="items"&gt;Bandage&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "bandage"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|bandage]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cylinder&gt;&gt;&lt;span class="items"&gt;Small cylinder&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "cylinder"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|cylinder]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $mulliganscard&gt;&gt;&lt;span class="items"&gt;Mulligan's keycard&lt;/span&gt;
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "mulliganscard"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|mulliganscard]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $mulliganspapers&gt;&gt;&lt;span class="items"&gt;Mulligan's papers&lt;/span&gt;
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "mulliganspapers"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|mulliganspapers]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourbon&gt;&gt;&lt;span class="items"&gt;Bottle of bourbon&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "bourbon"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|bourbon]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $glassempty&gt;&gt;&lt;span class="items"&gt;Empty glass&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "glassempty"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|glassempty]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $glassfull&gt;&gt;&lt;span class="items"&gt;Glass filled with oil&lt;/span&gt;
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "glassfull"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|glassfull]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuse1b&gt;&gt;&lt;span class="items"&gt;Fuse&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "fuse1b"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|fuse1b]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuse2b&gt;&gt;&lt;span class="items"&gt;Fuse&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "fuse2b"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|fuse2b]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $wrench&gt;&gt;&lt;span class="items"&gt;Socket wrench&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "wrench"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|wrench]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $tube&gt;&gt;&lt;span class="items"&gt;Elastic tube&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "tube"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|tube]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $comm&gt;&gt;&lt;span class="items"&gt;Portable comm device&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "comm"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|comm]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $backpack&gt;&gt;&lt;span class="items"&gt;Backpack&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "backpack"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|backpack]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuse1d&gt;&gt;&lt;span class="items"&gt;Fuse&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "fuse1d"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|fuse1d]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuse2d&gt;&gt;&lt;span class="items"&gt;Fuse&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "fuse2d"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|fuse2d]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cup&gt;&gt;&lt;span class="items"&gt;Plastic cup&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "cup"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|cup]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $spoon&gt;&gt;&lt;span class="items"&gt;Teaspoon&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "spoon"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|spoon]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cookie2&gt;&gt;&lt;span class="items"&gt;Cookie&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "cookie2"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|cookie2]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $knife&gt;&gt;&lt;span class="items"&gt;Knife&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "knife"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|knife]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $sashadeskcard&gt;&gt;&lt;span class="items"&gt;Keycard found on Sasha's desk&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "sashadeskcard"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|sashadeskcard]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $santoscard&gt;&gt;&lt;span class="items"&gt;Dr. Santos' keycard&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "santoscard"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|santoscard]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $emptybottle&gt;&gt;&lt;span class="items"&gt;Empty bottle&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "emptybottle"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|emptybottle]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $sashascard&gt;&gt;&lt;span class="items"&gt;Sasha's keycard&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "sashascard"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|sashascard]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $king&gt;&gt;&lt;span class="items"&gt;Chess king&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "king"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|king]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $dongle&gt;&gt;&lt;span class="items"&gt;Dongle&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "dongle"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|dongle]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lightfuse&gt;&gt;&lt;span class="items"&gt;Light fuse&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "lightfuse"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|lightfuse]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $heavyfuse&gt;&gt;&lt;span class="items"&gt;Heavy fuse&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "heavyfuse"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|heavyfuse]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $helmet&gt;&gt;&lt;span class="items"&gt;Helmet&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "helmet"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|helmet]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lighter&gt;&gt;&lt;span class="items"&gt;Lighter&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "lighter"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|lighter]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $explosives&gt;&gt;&lt;span class="items"&gt;Explosives&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "explosives"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|explosives]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $pistol&gt;&gt;&lt;span class="items"&gt;Pistol&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "pistol"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|pistol]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cookie&gt;&gt;&lt;span class="items"&gt;Cookie&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "cookie"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|cookie]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $marshcard&gt;&gt;&lt;span class="items"&gt;Captain Marsh's keycard&lt;/span&gt; 
&lt;span id="tab"&gt;[[Select and return|$return] [$selitem to "marshcard"]]&lt;/span&gt;&lt;span id="tab"&gt;[[Examine|marshcard]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="5" name="Intro2" tags="" position="221,288">&lt;span class="odys"&gt;ODYS: I feared the worst, but, fortunately, you don't suffer from total amnesia. Now, tell me what you see.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: But... but it's completely dark in here!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: You must stay calm, Sandra. The lights are on. You can't see anything because you've lost vision.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: …&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: This... can't be true… right? Tell me it isn't!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: Get a hold of yourself. I'm trying to help you, but you need to cooperate. For your own good.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 9s t8n&gt;&gt;&lt;span id="tab"&gt;[[Next|Intro3]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="6" name="Intro3" tags="" position="221,438">&lt;span class="sandra"&gt;SANDRA: …&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: Did I lose sight... because of vulcanium?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: Yes, that's what happened. You're suffering from poisoning because you inhaled mine gas. The concentration was low, so you did not die, but you lost consciousness and your optic nerves were damaged. You're lucky the gas was vented out of the room quickly, before even more serious symptoms occurred. All right – you may stand up now, but be careful. There's a table to your left, prop up on it. Just like that – you're doing great.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: Why didn't they come for me? They knew I was here!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: I'm afraid I have more bad news, Sandra. A little more than an hour ago the facility was attacked by an Outworlders' spaceship. The bombardment damaged one of the underground gas tanks, causing it to explode. As a result, parts of the facility were destroyed and the air was contaminated with vulcanium. Only you survived, because you were in the exterior module when this all happened.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 10s t8n&gt;&gt;&lt;span id="tab"&gt;[[Next|Intro4]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="7" name="Intro4" tags="" position="221,589">&lt;span class="sandra"&gt;SANDRA: …&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: Let me express my compassion. You are, without a doubt, shocked. However, my main task is to help you. You must do exactly what I tell you to save yourself.

The Outworlders have left. You are in no danger from them. But damage to the complex is severe. The rooms will depressurise in a couple of hours. That's why you must go to the command centre and send a distress signal. It's not going to be easy – not for a blind person. But do not fear. I'll do my best to be your eyes. There are cameras I can access in most rooms. I know you can send that signal if you act calmly and reasonably.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: I... I understand. I'll try. If what you're saying is true... I need to get out of here as soon as possible. But I…&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: Don't dwell on what happened, Sandra. Yes, it might be difficult, but it's best for you. You have a job to do. Focus on it and soon the worst will be over.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 8s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: You're right. I'll do my best. &lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: That's good to hear. Can we go now?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 10s t8n&gt;&gt;&lt;span class="sandra"&gt;&lt;span id="tab"&gt;[[Yes.|IntroEnding]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I want to ask you some questions first.|Intro5]]&lt;/span&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="8" name="IntroEnding" tags="" position="61,1166">&lt;span class="odys"&gt;ODYS: Very well. One more thing – before you enter the main part of the complex, you need to take a breath mask from the module. Other sections are still contaminated with gas. The mask is in a technical room, not far from here. The explosion triggered an emergency lockdown, so you'll need your keycard to open the door.&lt;/span&gt;


&lt;span class="sandra"&gt;&lt;span id="tab"&gt;[[Can't you open it?|IntroEnding2]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="9" name="Intro5" tags="" position="296,736">&lt;&lt;if $intro5again&gt;&gt;&lt;span class="sandra"&gt;&lt;span id="tab"&gt;[[Will I stay blind?|Intro5_1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What about the medical room in section II? There's a detox station there.|Intro5_2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I can't recall what I was doing before I lost consciousness.|Intro5_3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Why did the Outworlders attack us?|Intro5_4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Are you absolutely sure only I survived?|Intro5_5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[You said I need to call help. Won't OSMiC send someone?|Intro5_6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[How exactly are you planning to help me, Odys?|Intro5_7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Suppose that I manage to send the distress call. Then what?|Intro5_8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I have no more questions for now. Let's go.|IntroEnding]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class="odys"&gt;ODYS: Then ask. My only purpose now is to help you in every way possible. I'll answer your questions to the best of my knowledge.&lt;/span&gt;



&lt;&lt;set $intro5again to true&gt;&gt;\
&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class="sandra"&gt;&lt;span id="tab"&gt;[[Will I stay blind?|Intro5_1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What about the medical room in section II? There's a detox station there.|Intro5_2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I can't recall what I was doing before I lost consciousness.|Intro5_3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Why did the Outworlders attack us?|Intro5_4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Are you absolutely sure only I survived?|Intro5_5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[You said I need to call help. Won't OSMiC send someone?|Intro5_6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[How exactly are you planning to help me, Odys?|Intro5_7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Suppose that I manage to send the distress call. Then what?|Intro5_8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I have no more questions for now. Let's go.|IntroEnding]]&lt;/span&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="10" name="Intro5_1" tags="" position="0,778">&lt;span class="odys"&gt;ODYS: I can't make a definitive diagnosis, but appropriate treatment likely can restore your vision. I'm sure professionals will see to that as soon as you are evacuated from here.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Intro5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="11" name="Intro5_2" tags="" position="107,819">&lt;span class="odys"&gt;ODYS: Unfortunately, the medical room was destroyed in the explosion, together with a large part of section II. We must call for help if you are to receive treatment.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Intro5]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="12" name="Intro5_3" tags="" position="226,874">&lt;span class="odys"&gt;ODYS: Amnesia is a possible side effect of vulcanium poisoning. Your memory will return with time, and for now, I'm here to assist you. You're in the exterior module. Before the attack you were examining samples of rock material from potential new mining sites, delivered by the rover. You lost consciousness when you inhaled the gas, shortly after the attack.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Intro5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="13" name="Intro5_4" tags="" position="295,1023">&lt;span class="odys"&gt;ODYS: I do not know the answer to this question. Most likely, the attackers were just a band of pirates. However, there is a slight, but worrying chance that this assault was part of a larger operation. Whatever the truth might be, we must send the distress call as soon as possible. That will warn other stations.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Intro5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="14" name="Intro5_5" tags="" position="419,868">&lt;span class="odys"&gt;ODYS: Sadly, there is no doubt about that. I can only assure you they didn't suffer. High concentration of vulcanium caused an immediate loss of consciousness, followed by death a few minutes later.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Intro5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="15" name="Intro5_6" tags="" position="542,825">&lt;span class="odys"&gt;ODYS: They will certainly do that. But unless we send the signal, some time will pass before they start suspecting anything, and we can't afford the luxury of waiting. You need to send a message to emergency services, not only for your own good. News of this attack is of strategic importance. You must inform the authorities.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Intro5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="16" name="Intro5_7" tags="" position="662,786">&lt;span class="odys"&gt;ODYS: I am an Artificial Intelligence owned by the Outer Systems Mining Corporation. I was created to assist this facility's staff in everyday work through a range of informative and monitoring functions. Under normal circumstances, I also have access to some of the station's systems. I will inform you about everything I know that might prove useful. I will also try to be your eyes.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Intro5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="17" name="Intro5_8" tags="" position="811,756">&lt;span class="odys"&gt;ODYS: Sector emergency services should arrive in a few hours. They will evacuate you to a safe place.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Intro5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="18" name="IntroEnding2" tags="" position="61,1316">&lt;span class="odys"&gt;ODYS: I'm afraid I've suffered in the attack, which limits my functionalities. Right now I can only access cameras. Fortunately, it's enough to get you out of here. Take your keycard.&lt;/span&gt;


&lt;span class="sandra"&gt;&lt;span id="tab"&gt;[[My card... I don't have it! It must have dropped out of my pocket when I fell down.|IntroEnding3]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="19" name="IntroEnding3" tags="" position="61,1466">&lt;span class="odys"&gt;ODYS: There is no reason to panic. Your card must be somewhere in this room, even though I can't see it in the camera feed. You have to search for it. Act slowly and cautiously. You must learn to function without sight. I will describe the room to you – what will help you.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|RoomA1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="20" name="RoomA1" tags="" position="602,1398">&lt;&lt;if $a1nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Research room&lt;/center&gt;&lt;/span&gt;\


&lt;span class="odys"&gt;ODYS: You are in a room in the exterior module. There are two doors in here. The northern door leads to an airlock which joins the module with the rest of the complex. The eastern door leads to a corridor going to the technical room. To your left there are two large tables, with papers and pieces of rock scattered on them. More of these have fallen to the floor. I can't see the space under the tables from my point of view.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the items on the tables|RoomA1_1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine space under the tables|RoomA1_2]]&lt;/span&gt;
&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;\
&lt;&lt;if $doora2unlocked&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Unlock the eastern door with your keycard|RoomA1_DoorA2Unlocked]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $doora2unlocked&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|RoomA2]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|DoorA2_cardreq]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;\
&lt;&lt;if $doora4unlocked&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Unlock the northern door with your keycard|RoomA1_DoorA4Unlocked]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $doora4unlocked&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomA4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|DoorA4_cardreq]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $rodshown&gt;&gt;
&lt;span id="tab"&gt;[[Take the measuring rod off the wall|Takerod]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Research room&lt;/center&gt;&lt;/span&gt;\


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: You are in a room in the exterior module. There are two doors in here. The northern door leads to an airlock which joins the module with the rest of the complex. The eastern door leads to a corridor going to the technical room. To your left there are two large tables, with papers and pieces of rock scattered on them. More of these have fallen to the floor. I can't see the space under the table from my point of view.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 6s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the items on the tables|RoomA1_1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine space under the tables|RoomA1_2]]&lt;/span&gt;
&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;\
&lt;&lt;if $doora2unlocked&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Unlock the eastern door with your keycard|RoomA1_DoorA2Unlocked]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $doora2unlocked&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|RoomA2]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|DoorA2_cardreq]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;\
&lt;&lt;if $doora4unlocked&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Unlock the northern door with your keycard|RoomA1_DoorA4Unlocked]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $doora4unlocked&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomA4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|DoorA4_cardreq]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $rodshown&gt;&gt;
&lt;span id="tab"&gt;[[Take the measuring rod off the wall|Takerod]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $a1nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="21" name="sandrascard" tags="noreturn" position="996,0">&lt;span class="items"&gt;Your personal keycard. It opens doors to every part of the facility you have rights to access.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="22" name="bigstone" tags="noreturn" position="552,201">&lt;span class="items"&gt;A piece of rock the size of your fist. It's quite heavy, despite the porous structure.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="23" name="rod" tags="noreturn" position="694,199">&lt;span class="items"&gt;A long, thin rod used for manual sample measurements.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="24" name="bandage" tags="noreturn" position="888,172">&lt;span class="items"&gt;A normal roll of bandage.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="25" name="RoomA1_1" tags="" position="482,1296">There are papers scattered on the tables.

&lt;span class=odys&gt;ODYS: These papers describe rock samples from newly probed areas. You were filling in the documents when the tank blew up.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomA1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="26" name="RoomA1_2" tags="" position="677,1550">&lt;&lt;if $sandrascard&gt;&gt;\
&lt;&lt;if $bigstone&gt;&gt;You find nothing.


&lt;span id="tab"&gt;[[Get up|RoomA1]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;There's a porous rock the size of your fist lying under the tables.


&lt;span id="tab"&gt;[[Pick up the rock|RoomA1_2_3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Get up|RoomA1]]&lt;/span&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;You slowly kneel down and search the area under the tables.


&lt;span id="tab"&gt;[[Next|RoomA1_2_1]]&lt;/span&gt;&lt;&lt;/if&gt;&gt;\



</tw-passagedata><tw-passagedata pid="27" name="RoomA1_2_1" tags="" position="677,1700">&lt;span class="sandra"&gt;SANDRA: Ouch!&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: Be careful, Sandra!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class="sandra"&gt;SANDRA: I cut my hand with broken glass – it's nothing. I've got the card!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class="odys"&gt;ODYS: Excellent! Now you can go and take the breath mask.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;Item received: &lt;span class="items"&gt;Sandra's keycard&lt;/span&gt;&lt;&lt;/timed&gt;&gt; &lt;&lt;set $sandrascard to true&gt;&gt;\



&lt;span id="tab"&gt;&lt;&lt;timed 5s t8n&gt;&gt;[[Get up|RoomA1_2_4]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="28" name="RoomA1_2_3" tags="" position="360,1584">Item received: &lt;span class="items"&gt;Large stone&lt;/span&gt; 
&lt;&lt;set $bigstone to true&gt;&gt;\


&lt;span id="tab"&gt;[[Get up|RoomA1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="29" name="RoomA1_2_4" tags="" position="677,1851">As you're backing out from under the tables, your hand touches a porous rock the size of your fist. It must have rolled off the table.


&lt;span id="tab"&gt;[[Pick up the rock|RoomA1_2_3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Get up|RoomA1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="30" name="RoomA1_DoorA2Unlocked" tags="" position="823,1314">&lt;&lt;set $doora2unlocked to true&gt;&gt;\
You use your card and unlock the door.


&lt;span id="tab"&gt;[[Back|RoomA1]]&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="31" name="RoomA2" tags="" position="1398,1399">&lt;span class="header"&gt;&lt;center&gt;Technical corridor&lt;/center&gt;&lt;/span&gt;\

You hear the hum of ventilation and feel a cool breeze on your face.

&lt;&lt;if $coat&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You're in a short technical corridor. There are two doors here, on the eastern and on the western end.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You're in a short technical corridor. There are two doors here, on the eastern and on the western end. Next to the eastern door a heavy, protective lab coat is hanging on a hook.&lt;/span&gt;&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $rooma2again&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;&lt;timed 2s t8n&gt;&gt;You move forward and suddenly your foot steps into thin air. You stop abruptly.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Be careful, Sandra. The flooring is damaged – several panels have fallen into a technical tunnel, leaving a gap. It's only about a meter deep. You can jump down safely.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;&lt;&lt;timed 5s t8n&gt;&gt;[[If you say so... (jump down)|RoomA2jumped]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 5s t8n&gt;&gt;[[No way. I won't jump into a hole I can't even see.|RoomA2nojump]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $rod&gt;&gt;\
&lt;&lt;if $rooma2unlocked&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I have to check for myself how deep it really is.&lt;/span&gt;

&lt;&lt;if $selitem == 'rod'&gt;&gt;
&lt;span id="tab"&gt;[[Probe the gap with the rod|checkhole]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $rooma2unlocked&gt;&gt;\
&lt;&lt;if$coat&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take the coat off the hook|CoatTaken]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $rooma2unlocked&gt;&gt;\
&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;\
&lt;&lt;if $doora3open&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Unlock the eastern door with your keycard|DoorA3Unlocked]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $rooma2unlocked&gt;&gt;\
&lt;&lt;if $doora3open&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|RoomA3]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|RoomA3cardreq]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $rooma2again&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|RoomA1]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $rooma2again&gt;&gt;
&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $rooma2again&gt;&gt;
&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="32" name="DoorA2_cardreq" tags="" position="839,1547">&lt;span class='odys'&gt;ODYS: You need your keycard to unlock the door.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomA1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="33" name="RoomA1_DoorA4Unlocked" tags="" position="827,1428">&lt;&lt;set $doora4unlocked to true&gt;&gt;\
You use your card and unlock the door.


&lt;span id="tab"&gt;[[Back|RoomA1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="34" name="RoomA4" tags="" position="1071,2095">&lt;&lt;if $a4nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Airlock&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $maskon == true&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are standing in front of an airlock which connects the exterior module with the rest of the facility. You need to go through it. The panel which opens the airlock door is to your right, at the height of your shoulders.&lt;/span&gt;


&lt;span id="tab"&gt;[[Move away from the airlock|RoomA1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open the airlock and go through it|IntroPartB]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are standing in front of an airlock which connects the exterior module with the rest of the facility. You can't go through the lock without a breath mask – mine gas concentration on the other side is still deadly.&lt;/span&gt;


&lt;span id="tab"&gt;[[Move away from the airlock|RoomA1]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Airlock&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $maskon == true&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are standing in front of an airlock which connects the exterior module with the rest of the facility. You need to go through it. The panel which opens the airlock door is to your right, at the height of your shoulders.&lt;/span&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 2s t8n&gt;&gt;[[Move away from the airlock|RoomA1]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 2s t8n&gt;&gt;[[Open the airlock and go through it|IntroPartB]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are standing in front of an airlock which connects the exterior module with the rest of the facility. You can't go through the lock without a breath mask – mine gas concentration on the other side is still deadly.&lt;/span&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 2s t8n&gt;&gt;[[Move away from the airlock|RoomA1]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $a4nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="35" name="DoorA4_cardreq" tags="" position="838,1667">&lt;span class='odys'&gt;ODYS: You need your keycard to unlock the door.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomA1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="36" name="IntroPartB" tags="" position="1065,2236">&lt;span class = 'odys'&gt;ODYS: You're now in section III of the facility. The command centre is located in section I. Navigating through section II will be the most challenging. The destroyed gas tank was right underneath, so damage is greatest in that area. For a start, it would be a good idea to check if the lock to section II, north from here, is working. Unfortunately, the camera by that lock is offline.&lt;/span&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Which way should I go? I can't remember the plan of the section.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Let me explain. In section III there are technical rooms and a docking module for cargo ships. The main corridor encircles the rooms. Inside this circle there are: the office of Jim Mulligan, chief technician; a storage area, and a large room with a lift down to the technical and mining tunnels. In the north-western part there is a lock to the docking module, in the north – the one which leads to section II, and in the south, right behind you, the lock to the research module, from where you came.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This section didn't suffer much damage, but the mine gas concentration in the air is lethal. You must not take off your mask, not even for a moment. By the way – how are you feeling now?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Better than before. But... my head's still foggy. And I feel something... some stickiness in my lungs. But the worst thing is... I'm really scared that I can't see. Sometimes I feel like I'm in a strange place.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 11s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's not surprising after what you went through. Be brave, Sandra. Your disorientation and respiratory problems should go away soon. Unfortunately, we can't do anything about the discomfort caused by blindness. Shall we go now? Or maybe you have some questions?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 13s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[I have no questions for now. Let's go.|RoomB1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Yes, I want to ask you about something.|IntroPartB2]]&lt;/span&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="37" name="RoomA2jumped" tags="" position="1226,1160">You safely land at the bottom of a shallow tunnel. You go a few metres forward and clamber up the other side of the gap.
&lt;&lt;set $rooma2unlocked to true&gt;&gt;\
&lt;&lt;set $rooma2again to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomA2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="38" name="RoomA2nojump" tags="" position="1515,1162">&lt;span class = 'odys'&gt;ODYS: I assure you, Sandra, it's perfectly safe. You have to get to the other side.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: First I will check for myself how deep this hole is.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: All right, if you insist. I see some measuring tools on the wall in the research room. You can use one of the rods to probe the gap.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $rooma2again to true&gt;&gt;\
&lt;&lt;set $rodshown to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 6s t8n&gt;&gt;[[Back|RoomA2]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="39" name="Takerod" tags="" position="535,1548">You take a long, thin rod, used for probe measurements, off the wall. 

Item received: &lt;span class="items"&gt;Measuring rod&lt;/span&gt; 
&lt;&lt;set $rod to true&gt;&gt;\
&lt;&lt;set $rodshown to false&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomA1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="40" name="RoomA3" tags="" position="2099,1402">&lt;&lt;if $a3nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Storage room&lt;/center&gt;&lt;/span&gt;\

The air in this room is noticeably warmer and heavy with a smell of oil and metal.

&lt;&lt;if $maskon&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You're in a small technical storage room. Against the eastern wall there are a couple of old rovers. The floor is littered with rusty machine parts. There is only one door here – in the western wall.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You're in a small technical storage room. Against the eastern wall there are a couple of old rovers. The floor is littered with rusty machine parts. On the wall in front of you, behind glass, there is the emergency equipment kit. There's only one door here – in the western wall.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $maskon&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Check the emergency equipment|checkgap]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the parts on the floor|checkfloora3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the robots|checkrobotsa3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomA2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Storage room&lt;/center&gt;&lt;/span&gt;\

The air in this room is noticeably warmer and heavy with a smell of oil and metal.

&lt;&lt;if $maskon&gt;&gt;&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You're in a small technical storage room. Against the eastern wall there are a couple of old rovers. The floor is littered with rusty machine parts. There is only one door here – in the western wall.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;else&gt;&gt;&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You're in a small technical storage room. Against the eastern wall there are a couple of old rovers. The floor is littered with rusty machine parts. On the wall in front of you, behind glass, there is the emergency equipment kit. There's only one door here – in the western wall.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;timed 3s t8n&gt;&gt;&lt;&lt;if $maskon&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Check the emergency equipment|checkgap]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the parts on the floor|checkfloora3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the robots|checkrobotsa3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomA2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $a3nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="41" name="RoomA3cardreq" tags="" position="1474,1549">&lt;span class='odys'&gt;ODYS: You need your keycard to unlock the door.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomA2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="42" name="DoorA3Unlocked" tags="" position="1284,1533">&lt;&lt;set $doora3open to true&gt;&gt;\
You use your card and unlock the door.


&lt;span id="tab"&gt;[[Back|RoomA2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="43" name="CoatTaken" tags="" position="1202,1353">Item received: &lt;span class="items"&gt;Protective coat&lt;/span&gt; 
&lt;&lt;set $coat to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomA2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="44" name="coat" tags="noreturn" position="722,53">&lt;span class="items"&gt;A heavy, long-sleeved laboratory coat.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="45" name="checkhole" tags="" position="1095,1494">You lower the rod until it touches the bottom of the gap. The tunnel really is only about a meter deep. You cautiously jump down and safely land on the bottom.

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: You were right, Odys. I guess I should have listened to you.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's only natural that you find moving around without vision difficult. Forget about what happened and let's move on.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;You go a few metres forward and clamber up the other side of the gap.&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $rooma2unlocked to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 8s t8n&gt;&gt;[[Next|RoomA2]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="46" name="checkgap" tags="" position="2201,1559">&lt;&lt;if $glassbroken&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;if $gapagain&gt;&gt;&lt;span class = 'odys'&gt;ODYS: In a wall recess, behind glass, there is a breath mask.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Behind the glass is the breath mask you need. You have to break the glass.  

&lt;span class = 'sandra'&gt;SANDRA: I can't do it with bare hands. There's… a hammer holder here, but without a hammer.&lt;/span&gt;
&lt;&lt;set $gapagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $glassbroken&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;if $selitem == 'coat'&gt;&gt;
&lt;span id="tab"&gt;[[Wrap your hand in the coat and break the glass|breakglass]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'bigstone'&gt;&gt;
&lt;span id="tab"&gt;[[Break the glass with the stone|breakglass]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Step back|RoomA3]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="47" name="breakglass" tags="" position="2334,1485">You have to land several hits, but finally you hear the sound of glass breaking.

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Good job. Now you can take the breath mask. Put it on immediately. There's a first aid kit in the niche, too. You can use it to disinfect that cut on your hand.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $glassbroken to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Put on the breath mask|putmaskon]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="48" name="putmaskon" tags="" position="2452,1490">You put on a heavy mask with goggles. You're breathing in dry, filtered air now, and the sounds you hear are slightly muffled.
&lt;&lt;set $maskon to true&gt;&gt;\

&lt;span class = 'odys'&gt;&lt;&lt;timed 2s t8n&gt;&gt;ODYS: Excellent, Sandra. With the mask on you can go through the airlock. But you should disinfect that cut first – let's not risk an infection.&lt;&lt;/timed&gt;&gt;&lt;/span&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Use the first aid kit|disinf]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="49" name="disinf" tags="" position="2569,1495">You manage to make out which item in the kit is a disinfecting spray. You spray some on the cut; there's a strong smell of ozone and the cut stings for a while. 

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: There's some bandage left in the kit. I'll take it, just in case.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;Item received: &lt;span class="items"&gt;Bandage&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $bandage to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 6s t8n&gt;&gt;[[Next|RoomA3]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="50" name="checkfloora3" tags="" position="1912,1445">&lt;span class = 'odys'&gt;ODYS: These are just some old, broken parts of robots and other equipment. There's nothing useful here.&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomA3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="51" name="checkrobotsa3" tags="" position="1915,1585">&lt;span class = 'odys'&gt;ODYS: These rovers were sent here to wait for repairs. None of them are working.&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomA3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="52" name="IntroPartB2" tags="" position="1158,2362">&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What should I expect in this part of the facility?|IntroPartB2_0]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What if the northern lock is blocked?|IntroPartB2_1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What about the aliens? I won't be able to defend myself against them.|IntroPartB2_2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Can you tell me again what the plan of this section is?|IntroPartB2_3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I have no more questions. Let's go.|RoomB1]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="53" name="IntroPartB2_1" tags="" position="891,2428">&lt;span class = 'odys'&gt;ODYS: You'll have to find another way. The northern sections can be accessed through technical tunnels. Going to the surface is out of the question; it would be too dangerous.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|IntroPartB2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="54" name="IntroPartB2_2" tags="" position="1068,2538">&lt;span class = 'odys'&gt;ODYS: The aliens never entered the facility. They satisfied themselves with bombarding it from their spaceship. It's unlikely they would return, but if they do…&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What then?|IntroPartB2_2_1]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="55" name="IntroPartB2_3" tags="" position="1218,2538">&lt;span class = 'odys'&gt;ODYS: In section III there are technical rooms and a docking module for cargo ships. The main corridor encircles the rooms. Inside this circle there are: the office of Jim Mulligan, chief technician; a storage area, and a large room with a lift down to the technical and mining tunnels. In the north-western part there is a lock to the docking module, in the north – the one which leads to section II, and in the south, right behind you, the lock to the research module, from where you came.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|IntroPartB2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="56" name="IntroPartB2_0" tags="" position="958,2539">&lt;span class = 'odys'&gt;ODYS: The northern part of the facility and the tunnels deep in the planetoid suffered the worst damage. Unfortunately, I have no camera feed from these places and don't know the extent of damage. Not only that; some systems in this segment have no power.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|IntroPartB2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="57" name="IntroPartB2_2_1" tags="" position="1068,2688">&lt;span class = 'odys'&gt;ODYS: I will analyse all possibilities and find a way for you to survive.&lt;/span&gt;
&lt;&lt;set $aliensreturnask to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|IntroPartB2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="58" name="RoomB1" tags="" position="2456,3351">&lt;&lt;if $b1nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, southern part&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $B1Again&gt;&gt;\
&lt;&lt;else&gt;&gt;\The air in this part of the station is chilly, as if the heating system didn't work. You hear an alarm buzzing monotonously.
&lt;&lt;set $B1Again to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $corpsefound&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a corridor, rather wide. It curves in the north-western and north-eastern directions. Behind you there is a closed lock, which leads to the exterior module. In front of the lock lies the body of Doctor Santos.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a corridor, rather wide. It curves in the north-western and north-eastern directions. Behind you there is a closed lock, which leads to the exterior module.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;


&lt;span id="tab"&gt;[[Go north-west|RoomB2]]&lt;/span&gt;
&lt;&lt;if $corpsefound&gt;&gt;
&lt;span id="tab"&gt;[[Go north-east|RoomB5]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go north-east|findsantosbody]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the lock|noreturntoa]]&lt;/span&gt;
&lt;&lt;if $corpsefound&gt;&gt;
&lt;span id="tab"&gt;[[Examine the woman's body|examinesantosbody]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, southern part&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $B1Again&gt;&gt;\
&lt;&lt;else&gt;&gt;\The air in this part of the station is chilly, as if the heating system didn't work. You hear an alarm buzzing monotonously.
&lt;&lt;set $B1Again to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $corpsefound&gt;&gt;&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a corridor, rather wide. It curves in the north-western and north-eastern directions. Behind you there is a closed lock, which leads to the exterior module. In front of the lock lies the body of Doctor Santos.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;else&gt;&gt;&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a corridor, rather wide. It curves in the north-western and north-eastern directions. Behind you there is a closed lock, which leads to the exterior module.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;


&lt;&lt;timed 4s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go north-west|RoomB2]]&lt;/span&gt;
&lt;&lt;if $corpsefound&gt;&gt;
&lt;span id="tab"&gt;[[Go north-east|RoomB5]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go north-east|findsantosbody]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the lock|noreturntoa]]&lt;/span&gt;
&lt;&lt;if $corpsefound&gt;&gt;
&lt;span id="tab"&gt;[[Examine the woman's body|examinesantosbody]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b1nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="59" name="RoomB2" tags="" position="2065,2984">&lt;&lt;if $b2nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, south-western part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the south-western part of the corridor. In the eastern wall there is an open door, which leads to a large room. The corridor goes north and south-east.&lt;/span&gt;


&lt;span id="tab"&gt;[[Go through the eastern door|RoomB7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomB3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-east|RoomB1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, south-western part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the south-western part of the corridor. In the eastern wall there is an open door, which leads to a large room. The corridor goes north and south-east.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go through the eastern door|RoomB7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomB3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-east|RoomB1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b2nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="60" name="RoomB5" tags="" position="3412,3012">&lt;&lt;if $b5nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, south-eastern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the south-eastern part of the corridor. The corridor goes north and south-west.&lt;/span&gt;


&lt;span id="tab"&gt;[[Go north|RoomB6]]&lt;/span&gt;
&lt;&lt;if $corpsefound&gt;&gt;
&lt;span id="tab"&gt;[[Go south-west|RoomB1]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go south-west|findsantosbody]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, south-eastern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the south-eastern part of the corridor. The corridor goes north and south-west.&lt;/span&gt;


&lt;&lt;timed 1s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go north|RoomB6]]&lt;/span&gt;
&lt;&lt;if $corpsefound&gt;&gt;
&lt;span id="tab"&gt;[[Go south-west|RoomB1]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go south-west|findsantosbody]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b5nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="61" name="findsantosbody" tags="" position="2483,3469">&lt;&lt;set $corpsefound to true&gt;&gt;\
You take a few steps forward and stop abruptly as your foot touches something soft and heavy. You barely manage not to fall over.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Something's on the floor! What's that?!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I'm so sorry, Sandra. I didn't want to tell you. It's Doctor Maria Santos.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Is... Is she…&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You can't help her, Sandra. You should go on.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;&lt;&lt;timed 5s t8n&gt;&gt;[[You're right.|RoomB1]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 5s t8n&gt;&gt;[[I can't just go around her and forget she's here.|examinesantosbody]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="62" name="noreturntoa" tags="" position="2282,3403">&lt;span class = 'odys'&gt;ODYS: There's no reason to go back there, Sandra. We must hurry.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB1]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="63" name="examinesantosbody" tags="" position="2724,3531">You bend over the body of the woman.


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[How did she die?|santosdeathcause]]&lt;/span&gt;

&lt;span id="tab"&gt;[[We have to take the body from here.|santostakebody]]&lt;/span&gt;&lt;/span&gt;

&lt;&lt;if $cylinder&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span id="tab"&gt;[[Examine the body|santossearchbody]]&lt;/span&gt;

&lt;&lt;/if&gt;&gt;\
&lt;span id="tab"&gt;[[Step away from the body|RoomB1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="64" name="santosdeathcause" tags="" position="2574,3599">&lt;span class = 'odys'&gt;ODYS: There are no external injuries. She was killed by the gas. She must have been running towards the lock, but without a breath mask, she didn't stand a chance. I'm sorry, Sandra.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|examinesantosbody]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="65" name="santostakebody" tags="" position="2724,3661">&lt;span class = 'odys'&gt;ODYS: Where to? Besides, you can't carry the body on your own. I'm sure the emergency services will recover the bodies of the victims and return them to the families.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|examinesantosbody]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="66" name="santossearchbody" tags="" position="2874,3562">You hesitantly touch the body. There's no doubt – Doctor Santos has been dead for some time. The dead woman's fingers are clasped around some small, long object. You gently remove the object from the cold hand.
&lt;&lt;set $cylinder to true&gt;&gt;\

Item received: &lt;span class="items"&gt;Small cylinder&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|examinesantosbody]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="67" name="cylinder" tags="noreturn" position="422,141">&lt;span class="items"&gt;This cylindrical object, no longer than your thumb, is smooth and cold to the touch.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="68" name="RoomB7" tags="" position="2455,2953">&lt;&lt;if $b7nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Lift room&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $cartlocation == 'B7'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There is a lift shaft by the northern wall of this room. This lift goes down to the technical tunnels. On the wall, to the left of the shaft, there is a fuse box. Next to the lift there is an automatic cart. The only door in this room leads west.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There is a lift shaft by the northern wall of this room. This lift goes down to the technical tunnels. On the wall, to the left of the shaft, there is a fuse box. The only door in this room leads west.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Go to the lift|checkliftb7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the fuse box|checkliftbox]]&lt;/span&gt;\

&lt;&lt;if $cartlocation == 'B7'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B7'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the western door|RoomB2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;


&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Lift room&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $cartlocation == 'B7'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There is a lift shaft by the northern wall of this room. This lift goes down to the technical tunnels. On the wall, to the left of the shaft, there is a fuse box. Next to the lift there is an automatic cart. The only door in this room leads west.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There is a lift shaft by the northern wall of this room. This lift goes down to the technical tunnels. On the wall, to the left of the shaft, there is a fuse box. The only door in this room leads west.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go to the lift|checkliftb7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the fuse box|checkliftbox]]&lt;/span&gt;\

&lt;&lt;if $cartlocation == 'B7'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B7'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the western door|RoomB2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b7nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="69" name="RoomB3" tags="" position="2210,2557">&lt;&lt;if $b3nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, north-western part&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $dockingmoduleopen&gt;&gt;
&lt;&lt;if $cartlocation == 'B3'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the north-western part of the corridor. In the eastern wall there is a half-open door which leads to the technician's office. In the western wall there is the lock which leads to the docking module. It's open. Next to the lock there is an automatic cart. The corridor leads north-east and south.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the north-western part of the corridor. In the eastern wall there is a half-open door which leads to the technician's office. In the western wall there is the lock which leads to the docking module. It's open. The corridor goes north-east and south.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;if $cartlocation == 'B3'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the north-western part of the corridor. In the eastern wall there is a half-open door which leads to the technician's office. In the western wall there is the lock which leads to the docking module. It's closed. Next to the lock there is an automatic cart. The corridor leads north-east and south.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the north-western part of the corridor. In the eastern wall there is a half-open door which leads to the technician's office. In the western wall there is the lock which leads to the docking module. It's closed. The corridor goes north-east and south.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $dockingmoduleopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the lock|RoomB12]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Examine the lock|checklockb3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the eastern door|RoomB8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north-east|RoomB4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomB2]]&lt;/span&gt;
&lt;&lt;if $cartlocation == 'B3'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B3'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, north-western part&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $dockingmoduleopen&gt;&gt;
&lt;&lt;if $cartlocation == 'B3'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the north-western part of the corridor. In the eastern wall there is a half-open door which leads to the technician's office. In the western wall there is the lock which leads to the docking module. It's open. Next to the lock there is an automatic cart. The corridor leads north-east and south.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the north-western part of the corridor. In the eastern wall there is a half-open door which leads to the technician's office. In the western wall there is the lock which leads to the docking module. It's open. The corridor goes north-east and south.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;if $cartlocation == 'B3'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the north-western part of the corridor. In the eastern wall there is a half-open door which leads to the technician's office. In the western wall there is the lock which leads to the docking module. It's closed. Next to the lock there is an automatic cart. The corridor leads north-east and south.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the north-western part of the corridor. In the eastern wall there is a half-open door which leads to the technician's office. In the western wall there is the lock which leads to the docking module. It's closed. The corridor goes north-east and south.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;timed 3s t8n&gt;&gt;&lt;&lt;if $dockingmoduleopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the lock|RoomB12]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Examine the lock|checklockb3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the eastern door|RoomB8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north-east|RoomB4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomB2]]&lt;/span&gt;
&lt;&lt;if $cartlocation == 'B3'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B3'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b3nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="70" name="RoomB6" tags="" position="3429,2432">&lt;&lt;if $b6nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, north-eastern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the north-eastern part of the corridor. In the western wall there is a narrow door. In the eastern wall there is a small window with thick glass. The corridor goes north-west and south.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What's through the window?|lookwindow]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomB9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north-west|RoomB4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomB5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, north-eastern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the north-eastern part of the corridor. In the western wall there is a narrow door. In the eastern wall there is a small window with thick glass. The corridor goes north-west and south.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What's through the window?|lookwindow]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomB9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north-west|RoomB4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomB5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b6nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="71" name="lookwindow" tags="" position="3604,2437">&lt;&lt;if $lookwindownofade&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Not much, really. My camera shows a bit of the planetoid's surface and the walls of segment II.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: No traces of the Outworlders?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: None at all. They're long gone by now.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB6]]&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Not much, really. My camera shows a bit of the planetoid's surface and the walls of segment II.&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: No traces of the Outworlders?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: None at all. They're long gone by now.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 3s t8n&gt;&gt;[[Back|RoomB6]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;set $lookwindownofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="72" name="RoomB9" tags="" position="3039,2378">&lt;&lt;if $b9nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Lumber room&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $cartlocation == 'B9'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a room which serves as a storage area. Things are in disarray here. Several large, metal bottles are propped against the wall. Many electronic parts are scattered across a long table. In the corner there is a small automatic cart. Pipes of the central lubrication system are running under the ceiling. Oil is slowly dripping from one of the pipe joints into a pool on the floor. There are doors in the southern and in the eastern wall of the room.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a room which serves as a storage area. Things are in disarray here. Several large, metal bottles are propped against the wall. Many electronic parts are scattered across a long table. Pipes of the central lubrication system are running under the ceiling. Oil is slowly dripping from one of the pipe joints into a pool on the floor. There are doors in the southern and in the eastern wall of the room.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;&lt;if $selitem == 'glassempty'&gt;&gt;&lt;span id="tab"&gt;[[Fill the glass with oil|fillglass]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the bottles|checkbottles]]&lt;/span&gt;
&lt;&lt;if $cartlocation == 'B9'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B9'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Check the parts on the table|partscheckb9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomB6]]&lt;/span&gt;

&lt;&lt;if $brokendooropen&gt;&gt;&lt;span id="tab"&gt;[[Go through the southern door|RoomB14]]&lt;/span&gt;
&lt;&lt;elseif $brokendoorblocked&gt;&gt;&lt;span id="tab"&gt;[[Go through the southern door|b14blocked]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span id="tab"&gt;[[Go through the southern door|b14open]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Lumber room&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $cartlocation == 'B9'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a room which serves as a storage area. Things are in disarray here. Several large, metal bottles are propped against the wall. Many electronic parts are scattered across a long table. In the corner there is a small automatic cart. Pipes of the central lubrication system are running under the ceiling. Oil is slowly dripping from one of the pipe joints into a pool on the floor. There are doors in the southern and in the eastern wall of the room.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a room which serves as a storage area. Things are in disarray here. Several large, metal bottles are propped against the wall. Many electronic parts are scattered across a long table. Pipes of the central lubrication system are running under the ceiling. Oil is slowly dripping from one of the pipe joints into a pool on the floor. There are doors in the southern and in the eastern wall of the room.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;&lt;timed 3s t8n&gt;&gt;&lt;&lt;if $selitem == 'glassempty'&gt;&gt;&lt;span id="tab"&gt;[[Fill the glass with oil|fillglass]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the bottles|checkbottles]]&lt;/span&gt;
&lt;&lt;if $cartlocation == 'B9'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B9'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Check the parts on the table|partscheckb9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomB6]]&lt;/span&gt;

&lt;&lt;if $brokendooropen&gt;&gt;&lt;span id="tab"&gt;[[Go through the southern door|RoomB14]]&lt;/span&gt;
&lt;&lt;elseif $brokendoorblocked&gt;&gt;&lt;span id="tab"&gt;[[Go through the southern door|b14blocked]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span id="tab"&gt;[[Go through the southern door|b14open]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b9nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="73" name="RoomB4" tags="" position="2549,2225">&lt;&lt;if $b4nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, northern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the northern part of the corridor. It's outside of my cameras' field of view. I only know that in the north there is the lock leading to section II. The corridor goes south-east and south-west.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the lock|B4checklock]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the lock's surroundings|B4checkaround]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-west|RoomB3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-east|RoomB6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section III corridor, northern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the northern part of the corridor. It's outside of my cameras' field of view. I only know that in the north there is the lock leading to section II. The corridor goes south-east and south-west.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the lock|B4checklock]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the lock's surroundings|B4checkaround]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-west|RoomB3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-east|RoomB6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b4nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="74" name="B4checklock" tags="" position="2558,2080">&lt;&lt;if $b4checklocknofade&gt;&gt;The metal door, bent and bulged, is closed. Something large and heavy is blocking it on the other side. You manage to locate the lock opening panel – your hand touches the remains of a cover and tangled wires.

&lt;span class = 'sandra'&gt;SANDRA: It's blocked.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: I expected as much. You must find another way. In the southern part of this section there's a lift which goes down to the technical tunnels. You should head there.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;The metal door, bent and bulged, is closed. Something large and heavy is blocking it on the other side. You manage to locate the lock opening panel – your hand touches the remains of a cover and tangled wires.

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: It's blocked.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I expected as much. You must find another way. In the southern part of this section there's a lift which goes down to the technical tunnels. You should head there.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 5s t8n&gt;&gt;[[Back|RoomB4]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;set $b4checklocknofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="75" name="B4checkaround" tags="" position="2696,2122">&lt;&lt;if $mulliganfound&gt;&gt;You search the area around the lock. The floor is littered with pieces of metal and plastic. A few meters from the lock lies the body of Jim Mulligan, chief technician.


&lt;span id="tab"&gt;[[Examine Mulligan's body|examinemulliganbody]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You search the area around the lock. The floor is littered with pieces of metal and plastic. A few metres from the lock you discover a dead body.


&lt;span id="tab"&gt;[[Examine the body|examinemulliganbody]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomB4]]&lt;/span&gt;


</tw-passagedata><tw-passagedata pid="76" name="examinemulliganbody" tags="" position="2814,2129">&lt;&lt;if $mulliganfound&gt;&gt;The body of Jim Mulligan is lying on the floor.

&lt;&lt;if $mulliganscard&gt;&gt;
&lt;span id="tab"&gt;[[Search the body|nomulliganagain]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Search the body|searchmulliganbody]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;span id="tab"&gt;[[Back|RoomB4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I found a body, Odys.&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It could be Jim Mulligan. Before the attack he was working in his office, in this section.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Mulligan? The chief technician?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Jim Mulligan was responsible for the inspections and maintenance of the facility's mechanical systems. As far as I know, he was a taciturn, withdrawn man, but also a conscientious professional.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $mulliganfound to true&gt;&gt;\


&lt;&lt;timed 6s t8n&gt;&gt;&lt;&lt;if $mulliganscard&gt;&gt;
&lt;span id="tab"&gt;[[Search the body|nomulliganagain]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Search the body|searchmulliganbody]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;span id="tab"&gt;[[Back|RoomB4]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="77" name="searchmulliganbody" tags="" position="2944,2127">Large, hairy hands and a coarse uniform prove that this is indeed the body of Jim Mulligan. You found no wounds on the body, which means he was killed by the gas. In one of Mulligan's pockets you find a keycard. When you reach towards the man's head, your hand touches a metal filter – Mulligan is wearing a breath mask.
&lt;&lt;set $mulliganscard to true&gt;&gt;\

Item received: &lt;span class="items"&gt;Mulligan's keycard&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Mulligan died even though he was wearing a breath mask. What do you make out of this?|askaboutmask]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|examinemulliganbody]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="78" name="askaboutmask" tags="" position="2896,2239">&lt;span class = 'odys'&gt;ODYS: It's hard for me to judge as I can't see the body. I suppose he received a lethal dose of vulcanium even before he put the mask on.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|examinemulliganbody]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="79" name="nomulliganagain" tags="" position="2894,2020">&lt;span class = 'sandra'&gt;SANDRA: I've touched him once. I don't want to do that again.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|examinemulliganbody]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="80" name="mulliganscard" tags="noreturn" position="873,0">&lt;span class="items"&gt;The keycard which belonged to Jim Mulligan, the chief technician. Found on his body.&lt;/span&gt;
&lt;&lt;if$mulliganscode&gt;&gt;&lt;span class="items"&gt;There's a row of numbers imprinted on the card: 36109.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class="items"&gt;You turn the card in your hands. The edges are chipped. You find raised letters which form Mulligan's name, and some flat grooves. The grooves form a string of numbers: 36109. Mulligan must have written it on the card, pressing so hard that the pen etched the grooves.&lt;/span&gt;
&lt;&lt;set $mulliganscode to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="81" name="RoomB12" tags="" position="1916,2560">&lt;&lt;if $b12nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Docking module, corridor&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in a short corridor which leads to the docking module. The corridor goes west and east.&lt;/span&gt;


&lt;span id="tab"&gt;[[Go west|RoomB13]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go east|RoomB3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Docking module, corridor&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in a short corridor which leads to the docking module. The corridor goes west and east.&lt;/span&gt;


&lt;&lt;timed 1s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go west|RoomB13]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go east|RoomB3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b12nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="82" name="checklockb3" tags="" position="2061,2656">&lt;span class = 'odys'&gt;ODYS: The docking module lock is shut and the panel on the wall has no power. The lock can, however, be opened remotely, from the technician's office.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="83" name="RoomB8" tags="" position="2421,2610">&lt;&lt;if $b8nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Technician's office&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $mulliganspapers&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the technician's office. Against the wall, to your left, there is a long desk with a big computer monitor on it. There's also a plate with a half-eaten toast on the desk. To the right of the desk there is a locker.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the technician's office. Against the wall, to your left, there is a long desk with a big computer monitor on it. There are also some papers and a plate with a half-eaten toast on the desk. To the right of the desk there is a locker.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the computer|mulliganspc]]&lt;/span&gt;
&lt;&lt;if $mulliganspapers&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Check the papers on the desk|paperscheck]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the locker|lockercheck]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomB3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Technician's office&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $mulliganspapers&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the technician's office. Against the wall, to your left, there is a long desk with a big computer monitor on it. There's also a plate with a half-eaten toast on the desk. To the right of the desk there is a locker.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the technician's office. Against the wall, to your left, there is a long desk with a big computer monitor on it. There are also some papers and a plate with a half-eaten toast on the desk. To the right of the desk there is a locker.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the computer|mulliganspc]]&lt;/span&gt;
&lt;&lt;if $mulliganspapers&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Check the papers on the desk|paperscheck]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the locker|lockercheck]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomB3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b8nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="84" name="checkcartb" tags="noreturn" position="2276,2313">&lt;&lt;if $carton&gt;&gt;
&lt;&lt;if $bottleoncart&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's an automated cart, used to transport heavy objects. It can be programmed to go to a particular spot in the facility. The cart is turned on. There is a large bottle on it.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's an automated cart, used to transport heavy objects. It can be programmed to go to a particular spot in the facility. The cart is turned on.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's an automated cart, used to transport heavy objects. It can be programmed to go to a particular spot in the facility. The cart is turned off. It's equipped with a keycard reader.&lt;/span&gt;

&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;
&lt;span id="tab"&gt;[[Use your card to unlock the cart|cartonfail]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'mulliganscard'&gt;&gt;
&lt;span id="tab"&gt;[[Use Mulligan's card to unlock the cart|cartonsuccess]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;


</tw-passagedata><tw-passagedata pid="85" name="programcartb" tags="noreturn" position="1822,2063">&lt;&lt;if $bottleinstation&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: First I have to disconnect the bottle from the filling station.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There's a knob on the cart for selecting the destination.&lt;/span&gt;

&lt;&lt;if $cartlocation == 'B3'&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the docking module lock|$return][$cartlocation to 'B3']]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B9'&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the lumber room|$return][$cartlocation to 'B9']]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B7'&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the room with the lift|$return][$cartlocation to 'B7']]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B14'&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;if $brokendooropen&gt;&gt;
&lt;span id="tab"&gt;[[Go to the small storage area by the lumber room|$return][$cartlocation to 'B14']]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B13'&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;if $dockingmoduleopen&gt;&gt;
&lt;span id="tab"&gt;[[Go to the docking module|$return][$cartlocation to 'B13']]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B7' &amp;&amp; $fuseinstalled == 2&gt;&gt;
&lt;span id="tab"&gt;[[Go down in the lift|$return][$cartlocation to 'B11']]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="86" name="cartonfail" tags="noreturn" position="2154,2019">You put the keycard to the panel, but nothing happens. It seems you don't have the required authorisation. 


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="87" name="cartonsuccess" tags="noreturn" position="2326,2203">You put Jim Mulligan's keycard to the cart's panel. The cart turns on.
&lt;&lt;set $carton to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="88" name="mulliganspc" tags="" position="2564,2342">&lt;&lt;if $mulliganscodeentered&gt;&gt;
&lt;&lt;if $dockingmoduleopen&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The screen shows two options now. Both are data sets, of no use to us.&lt;/span&gt;


&lt;span id="tab"&gt;[[Choose option 1|mulliganspc1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Choose option 2|mulliganspc2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB8]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The screen shows three options. The first and the second one are data sets, of no use to us. Option 3 opens the lock to the docking module.&lt;/span&gt;


&lt;span id="tab"&gt;[[Choose option 1|mulliganspc1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Choose option 2|mulliganspc2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Choose option 3|mulliganspc3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB8]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The computer is locked. It asks for the access code.&lt;/span&gt;

&lt;&lt;if $mulliganscode&gt;&gt;
&lt;span id="tab"&gt;[[Enter the code: 36109|codeentered]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB8]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Enter the code|dontknowcode]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB8]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="89" name="mulliganspc1" tags="" position="2421,2420">&lt;span class = 'odys'&gt;ODYS: That's a set of data about the docking module and cargo ships' arrivals. Nothing useful.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|mulliganspc]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="90" name="mulliganspc2" tags="" position="2533,2472">&lt;span class = 'odys'&gt;ODYS: That's a list of facility staff and their positions. I'm sure you know it well.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Right.|mulliganspc]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I'm not sure. I think I'm forgetting some important things. Can you read out the list for me? Just to… check things.|readlist]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="91" name="mulliganspc3" tags="" position="2719,2630">You hear a short signal and then the sound of the lock opening comes from the corridor.
&lt;&lt;set $dockingmoduleopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|mulliganspc]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="92" name="codeentered" tags="" position="2773,2520">You carefully count the number keys on the keyboard and input the code written on Mulligan's keycard. You hear a sound confirming your input.

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: How do you know the code, Sandra?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Mulligan wrote it on his keycard. Carved, actually.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Good for us, though it's a safety violation.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The screen shows three options. The first and the second one are data sets, of no use to us. Option 3 opens the lock to the docking module.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $mulliganscodeentered to true&gt;&gt;\


&lt;&lt;timed 11s t8n&gt;&gt;&lt;span id="tab"&gt;[[Choose option 1|mulliganspc1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Choose option 2|mulliganspc2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Choose option 3|mulliganspc3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|mulliganspc]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
</tw-passagedata><tw-passagedata pid="93" name="dontknowcode" tags="" position="2694,2418">&lt;span class = 'sandra'&gt;SANDRA: I'd have to know it first.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: I'm trying to access the code database, but with no success. I'm unsure how to proceed. If Mulligan had kept the code written somewhere, it would help us a lot.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|mulliganspc]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="94" name="readlist" tags="" position="2589,2620">&lt;span class = 'odys'&gt;ODYS: As you wish. Here's the list:

Marsh, Robert. Facility executive officer.

Zinov, Sasha, PhD. Chief IT engineer.

Romani, Alice, PhD. Facility science officer.

Santos, Maria, Dr. Physician.

Mulligan, James. Chief technician.

Nowicki, Sandra. Research assistant.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|mulliganspc]]&lt;/span&gt;	</tw-passagedata><tw-passagedata pid="95" name="fillglass" tags="" position="2881,2356">&lt;&lt;set $glassempty to false&gt;&gt;\
&lt;&lt;set $glassfull to true&gt;&gt;\
&lt;&lt;set $selitem to 'none'&gt;&gt;\
You hear the oil dripping into the glass.

Item lost: &lt;span class="items"&gt;Empty glass&lt;/span&gt;

Item received: &lt;span class="items"&gt;Glass filled with oil&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB9]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="96" name="glassempty" tags="noreturn" position="1145,18">&lt;span class="items"&gt;A normal glass. It's empty and a bit sticky.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="97" name="glassfull" tags="noreturn" position="1017,105">&lt;span class="items"&gt;The glass is full of lubricating oil.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="98" name="paperscheck" tags="" position="2589,2737">You rummage through papers you can't read. You learn nothing.

&lt;span class = 'odys'&gt;ODYS: These are documents and technical reports Mulligan was working on.&lt;/span&gt;


&lt;span id="tab"&gt;[[Take the papers|paperstaken]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="99" name="paperstaken" tags="" position="2760,2768">Item received: &lt;span class="items"&gt;Mulligan's papers&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: Excuse me, Sandra, but why are you taking these?&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: I've just thought that maybe some paper would come in handy later on.&lt;/span&gt;
&lt;&lt;set $mulliganspapers to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomB8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="100" name="mulliganspapers" tags="noreturn" position="707,330">&lt;span class="items"&gt;Papers found in Jim Mulligan's office.&lt;/span&gt;

&lt;&lt;if $sight&gt;&gt;&lt;span class="items"&gt;You look over the papers. Two reports catch your eyes. One is a printout from the automatic diagnostic system, with schematic drawings. It shows that some of the mining machines, as well as pipelines and vulcanium tanks, have exceeded wear limits. The second report is an inspection form, filled in by hand and signed by Mulligan. Numbers in the form suggest that the machinery is in perfect state.&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $mulliganspapersread to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="101" name="lockercheck" tags="" position="2443,2742">You open the locker. The smell of booze assaults your nostrils.

&lt;&lt;if $bourbon&gt;&gt;\
&lt;&lt;if $glasstaken&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The locker is empty.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Inside the locker there is an empty, dirty glass.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;if $glasstaken&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Inside the locker there is a partially empty bottle of bourbon.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Inside the locker there is a partially empty bottle of bourbon and an empty, dirty glass.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourbon&gt;&gt;\
&lt;&lt;else&gt;&gt;\


&lt;span id="tab"&gt;[[Take the bottle|takebottle]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $glasstaken&gt;&gt;\
&lt;&lt;else&gt;&gt;\

&lt;span id="tab"&gt;[[Take the glass|takeglass]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;span id="tab"&gt;[[Back|RoomB8]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="102" name="takebottle" tags="noreturn" position="2326,2808">Item received: &lt;span class="items"&gt;Bottle of bourbon&lt;/span&gt;
&lt;&lt;set $bourbon to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="103" name="takeglass" tags="noreturn" position="2479,2843">Item received: &lt;span class="items"&gt;Empty glass&lt;/span&gt;
&lt;&lt;set $glassempty to true&gt;&gt;\
&lt;&lt;set $glasstaken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="104" name="bourbon" tags="noreturn" position="1196,153">&lt;span class="items"&gt;A bellied bottle, half-empty. Even with the cap on, it gives off a strong smell of alcohol – likely, some cheap brand.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="105" name="checkbottles" tags="" position="3037,2488">These are tall metal bottles. They reach the height of your shoulders.

&lt;span class = 'odys'&gt;ODYS: These bottles can be filled with vulcanium when needed, and used, for example, as an emergency energy source. The bottles in this room are empty.&lt;/span&gt;


&lt;span id="tab"&gt;[[Take a bottle|loadbottle]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB9]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="106" name="loadbottle" tags="" position="3003,2723">&lt;&lt;if $carton == true &amp;&amp; $bottleoncart == false &amp;&amp; $cartlocation == 'B9'&gt;&gt;It's not easy, but you manage to load one bottle on the automatic cart.
&lt;&lt;set $bottleoncart to true&gt;&gt;
&lt;&lt;elseif $carton == true &amp;&amp; $bottleoncart == true &amp;&amp; $cartlocation == 'B9'&gt;&gt;
&lt;span class = 'sandra'&gt;SANDRA: There already is a bottle on the cart. Another one won't fit.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Too heavy... I can't carry it around on my back.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkbottles]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="107" name="partscheckb9" tags="" position="2918,2498">You search through the parts, trying to recognise them by shape.

&lt;&lt;if $fuse1btaken&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's just some useless junk.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB9]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Most of these are just junk, but I can see a fuse close to the left edge of the table. It doesn't seem burnt out.&lt;/span&gt;


&lt;span id="tab"&gt;[[Take the fuse|takefuseb9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB9]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="108" name="takefuseb9" tags="" position="2926,2608">Item received: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;
&lt;&lt;set $fuse1b to true&gt;&gt;&lt;&lt;set $fuse1btaken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomB9]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="109" name="fuse1b" tags="noreturn" position="1341,141">&lt;span class="items"&gt;A universal fuse, used in many systems on the station.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="110" name="RoomB14" tags="" position="2893,2752">&lt;&lt;if $b14nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Storage room&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $bottleb14taken &amp;&amp; $cartlocation == 'B14'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The automatic cart takes almost the entire space in this small storage room. Rusty metal barrels are placed along one wall. The only door in the room leads north.&lt;/span&gt;
&lt;&lt;elseif $bottleb14taken&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This small storage area is almost empty. The only door in the room leads north.&lt;/span&gt;
&lt;&lt;elseif $cartlocation == 'B14'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The automatic cart takes almost the entire space in this small storage room. Along one wall some rusty barrels are placed. A large bottle is propped against one of them. The only door in the room leads north.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;This small storage area is almost empty. Along one wall some rusty barrels are placed. A large bottle is propped against one of them. The only door in the room leads north.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $bottleb14taken&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Examine the bottle|checkbottleb14]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B14'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B14'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the northern door|RoomB9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Storage room&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $bottleb14taken &amp;&amp; $cartlocation == 'B14'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The automatic cart takes almost the entire space in this small storage room. Rusty metal barrels are placed along one wall. The only door in the room leads north.&lt;/span&gt;
&lt;&lt;elseif $bottleb14taken&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This small storage area is almost empty. The only door in the room leads north.&lt;/span&gt;
&lt;&lt;elseif $cartlocation == 'B14'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The automatic cart takes almost the entire space in this small storage room. Along one wall some rusty barrels are placed. A large bottle is propped against one of them. The only door in the room leads north.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;This small storage area is almost empty. Along one wall some rusty barrels are placed. A large bottle is propped against one of them. The only door in the room leads north.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;timed 2s&gt;&gt;&lt;&lt;if $bottleb14taken&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Examine the bottle|checkbottleb14]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B14'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B14'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the northern door|RoomB9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b14nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;

</tw-passagedata><tw-passagedata pid="111" name="b14blocked" tags="" position="3140,2475">&lt;span class = 'odys'&gt;ODYS: This door is locked and has no power. There is no way to open it.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB9]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="112" name="b14open" tags="" position="3248,2478">&lt;span class = 'odys'&gt;ODYS: This door leads to a small storage area, but it is shut.&lt;/span&gt;


&lt;span id="tab"&gt;[[Press the door opening button|b14open1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB9]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="113" name="b14open1" tags="" position="3203,2588">&lt;span class = 'odys'&gt;ODYS: Wait, Sandra – there's something wrong with this door's control circuits –&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Let's check this. (Press the button)|b14fail]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What do you mean?|b14open2]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="114" name="b14fail" tags="" position="3113,2732">As soon as you press the button, there is a loud crack and you smell burnt wires.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: That's what I was talking about – you destroyed the control circuits. There is no way to open this door now. Let's just hope nothing necessary is stuck behind it.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Whoops…&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $brokendoorblocked to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Back|RoomB9]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="115" name="b14open2" tags="" position="3255,2732">&lt;span class = 'odys'&gt;ODYS: I detect circuit overload. But I know how to fix that. Open the cover on that panel. There are two wires inside. Don't be afraid, these are low voltage. Disconnect the left wire.&lt;/span&gt;


&lt;span id="tab"&gt;[[Disconnect the wire as instructed by Odys|b14open3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="116" name="b14open3" tags="" position="3257,2847">You open the cover and pull the wire on the left until it comes loose.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Now you may open the door.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;You press the button on the panel.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Only the right half of the door has opened, but that will do.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $brokendooropen to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Back|RoomB9]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="117" name="checkbottleb14" tags="" position="2933,2871">&lt;span class = 'odys'&gt;ODYS: It's a large bottle filled with vulcanium, which can be used, for example, as an emergency energy source.&lt;/span&gt;


&lt;span id="tab"&gt;[[Take the bottle|loadbottleb14]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB14]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="118" name="loadbottleb14" tags="" position="2928,3022">&lt;&lt;if $carton == true &amp;&amp; $bottleoncart == false &amp;&amp; $cartlocation == 'B14'&gt;&gt;It's not easy, but you manage to load the bottle on the automatic cart.
&lt;&lt;set $bottleoncart to true&gt;&gt;&lt;&lt;set $bottlefull to true&gt;&gt;&lt;&lt;set $bottleb14taken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomB14]]&lt;/span&gt;
&lt;&lt;elseif $carton == true &amp;&amp; $bottleoncart == true &amp;&amp; $cartlocation == 'B14' &amp;&amp; $bottlefull == true&gt;&gt;
&lt;span class = 'sandra'&gt;SANDRA: There already is a full bottle on the cart. Another one won't fit.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkbottleb14]]&lt;/span&gt;
&lt;&lt;elseif $carton == true &amp;&amp; $bottleoncart == true &amp;&amp; $cartlocation == 'B14' &amp;&amp; $bottlefull == false&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I can swap the empty bottle on the cart with the full one.&lt;/span&gt;

It takes a lot of time and effort, but finally you manage to swap the bottles. The full bottle is now on the cart.


&lt;span id="tab"&gt;[[Back|RoomB14]]&lt;/span&gt;
&lt;&lt;set $bottlefull to true&gt;&gt;&lt;&lt;set $bottleb14taken to true&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Too heavy... I can't carry it around on my back.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkbottleb14]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="119" name="RoomB13" tags="" position="1659,2553">&lt;&lt;if $b13nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Docking module, platform&lt;/center&gt;&lt;/span&gt;\

You hear the hum of pumps working.

&lt;&lt;if $cartlocation == 'B13'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This oval room has an airlock leading to the exterior. Near the lock there is a manual filling station. A handwritten note is hanging on the wall close to the station. Next to the station there is an automatic cart. The only door leads east.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This oval room has an airlock leading to the exterior. Near the lock there is a manual filling station. A handwritten note is hanging on the wall close to the station. The only door leads east.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the lock|checklockb13]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the filling station|checkfillstation]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Check the note on the wall|readnote]]&lt;/span&gt;
&lt;&lt;if $cartlocation == 'B13'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B13'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the eastern door|RoomB12]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Docking module, platform&lt;/center&gt;&lt;/span&gt;\

You hear the hum of pumps working.

&lt;&lt;if $cartlocation == 'B13'&gt;&gt;&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This oval room has an airlock leading to the exterior. Near the lock there is a manual filling station. A handwritten note is hanging on the wall close to the station. Next to the station there is an automatic cart. The only door leads east.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;else&gt;&gt;&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This oval room has an airlock leading to the exterior. Near the lock there is a manual filling station. A handwritten note is hanging on the wall close to the station. The only door leads east.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;\


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the lock|checklockb13]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the filling station|checkfillstation]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Check the note on the wall|readnote]]&lt;/span&gt;
&lt;&lt;if $cartlocation == 'B13'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B13'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the eastern door|RoomB12]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b13nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

</tw-passagedata><tw-passagedata pid="120" name="checklockb13" tags="" position="1724,2702">&lt;span class = 'odys'&gt;ODYS: It's a docking lock for cargo ships which pick up vulcanium from the facility. It would be dangerous to open it.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB13]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="121" name="checkfillstation" tags="" position="1554,2698">&lt;span class = 'odys'&gt;ODYS: The station has a hose connected to a gas tank. If the automatic filling is not working, the vulcanium compartments of the docking ship can be filled using the hose, but this procedure is extremely time-consuming. The station can also be used to fill a bottle with gas.&lt;/span&gt;

&lt;span class = 'odys'&gt;Current pressure is shown on the display: $pressure&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the control panel|checkfillpanel]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the filling connector|checkconnector]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB13]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="122" name="checkfillpanel" tags="" position="1607,2867">&lt;span class = 'odys'&gt;ODYS: The electronic control panel is out of order. Its cover is ajar. The only working control elements are a large valve used to increase the gas pressure and a smaller one, used to reduce it.&lt;/span&gt;

&lt;&lt;if $bottleinstation == true &amp;&amp; $bottlefull == true&gt;&gt;
&lt;span id="tab"&gt;[[Start the filling process|fillbottlefull]]&lt;/span&gt;
&lt;&lt;elseif $bottleinstation == true &amp;&amp; $bottlefull == false&gt;&gt;
&lt;span id="tab"&gt;[[Start the filling process|fillbottle]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Change the filling pressure|changepressure]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open the control panel cover|openpanel]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|checkfillstation]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="123" name="fillbottlefull" tags="" position="1461,2905">&lt;span class = 'sandra'&gt;SANDRA: There's no need to do that, the bottle is already full.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkfillpanel]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="124" name="fillbottle" tags="" position="1607,3017">&lt;&lt;if $pressure == 15&gt;&gt;You hear the bottle filling with the gas.
&lt;&lt;set $bottlefull to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkfillpanel]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You hear a voice message: ERROR: INCORRECT MANUAL FILLING PRESSURE.


&lt;span id="tab"&gt;[[Back|checkfillpanel]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="125" name="changepressure" tags="" position="1874,2972">&lt;span class = 'odys'&gt;ODYS: The current pressure value is $pressure.&lt;/span&gt;


&lt;span id="tab"&gt;[[Increase the pressure with the large valve|pressureup]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Decrease the pressure with the small valve|pressuredown]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Switch the valves to auto mode to reset the pressure|pressurereset]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|checkfillpanel]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="126" name="pressureup" tags="" position="1969,3130">&lt;&lt;set $pressure to $pressure * 3&gt;&gt;\
&lt;span class = 'odys'&gt;ODYS: The manometer shows a pressure value of $pressure.&lt;/span&gt;

&lt;&lt;if $pressure &gt; 40&gt;&gt;You hear a voice message: ERROR. PRESSURE TOO HIGH. RESETTING TO THE DEFAULT VALUE...
&lt;&lt;set $pressure to 17&gt;&gt;\


&lt;span id="tab"&gt;[[Back|changepressure]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Back|changepressure]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="127" name="pressuredown" tags="" position="1764,3127">&lt;&lt;set $pressure to $pressure - 4&gt;&gt;
&lt;&lt;if $pressure &lt; 0&gt;&gt;
&lt;&lt;set $pressure to 0&gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;span class = 'odys'&gt;ODYS: The manometer shows a pressure value of $pressure.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|changepressure]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="128" name="pressurereset" tags="" position="1862,3238">Both valves rotate back to their initial positions.
&lt;&lt;set $pressure to 17&gt;&gt;\


&lt;span id="tab"&gt;[[Back|changepressure]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="129" name="openpanel" tags="" position="1517,3125">&lt;&lt;if $fuse2btaken&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There are three fuses missing from the panel.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Two out of three fuses are missing from the panel. The third one is still in place.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;&lt;if $fuse2btaken&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span id="tab"&gt;[[Take the fuse|takefuse2b]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;span id="tab"&gt;[[Back|checkfillpanel]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="130" name="takefuse2b" tags="" position="1517,3275">Item received: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;
&lt;&lt;set $fuse2b to true&gt;&gt;&lt;&lt;set $fuse2btaken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|openpanel]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="131" name="fuse2b" tags="noreturn" position="1346,0">&lt;span class="items"&gt;A universal fuse, used in many systems on the station.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="132" name="checkconnector" tags="" position="1184,2902">&lt;&lt;if $valvegreased&gt;&gt;The connector is greased, it can be easily opened and closed.

&lt;&lt;else&gt;&gt;You struggle with the connector for a while, but to no avail – it's seized.

&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $valvegreased == false &amp;&amp; $selitem == 'glassfull'&gt;&gt;
&lt;span id="tab"&gt;[[Grease the connector|greaseconnector]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $valvegreased == true &amp;&amp; $cartlocation == 'B13' &amp;&amp; $bottleoncart == true &amp;&amp; $bottlefull == false &amp;&amp; $bottleinstation == false&gt;&gt;
&lt;span id="tab"&gt;[[Connect the empty bottle to the station|connectbottle]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bottleinstation == true &amp;&amp; $bottlefull == true&gt;&gt;
&lt;span id="tab"&gt;[[Disconnect the filled bottle from the station|disconnectbottle]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;
&lt;span id="tab"&gt;[[Back|checkfillstation]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="133" name="greaseconnector" tags="" position="1015,2905">You pour lubrication oil on the connector. 

Item lost: &lt;span class = 'items'&gt;Glass filled with oil&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Empty glass&lt;/span&gt;
&lt;&lt;set $valvegreased to true&gt;&gt;&lt;&lt;set $glassfull to false&gt;&gt;&lt;&lt;set $glassempty to true&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkconnector]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="134" name="connectbottle" tags="" position="1239,3067">You push the cart next to the filling station and connect the hose to the bottle.
&lt;&lt;set $bottleinstation to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkfillstation]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="135" name="disconnectbottle" tags="" position="1097,3063">You disconnect the hose from the bottle, which is now filled with vulcanium. 
&lt;&lt;set $bottleinstation to false&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkfillstation]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="136" name="readnote" tags="" position="1511,2498">&lt;span class = 'odys'&gt;ODYS: It's a handwritten note that says "Manual filling only with 15. J. Mulligan".&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB13]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="137" name="checkliftb7" tags="" position="2283,3059">&lt;&lt;if $fuseinstalled == 2&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The lift is working – you can call the cabin.&lt;/span&gt;


&lt;span id="tab"&gt;[[Go down in the lift|RoomB10]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB7]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;&lt;if $checkliftb7nofade&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The lift door is closed. There's no cabin behind it.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Can I call it?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: The buttons are not active. The lift has an emergency power supply and should be working even when the main system is offline – but it isn't.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB7]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The lift door is closed. There's no cabin behind it.&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Can I call it?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The buttons are not active. The lift has an emergency power supply and should be working even when the main system is offline – but it isn't.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Back|RoomB7]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;set $checkliftb7nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="138" name="RoomB10" tags="" position="3181,3316">&lt;span class="header"&gt;&lt;center&gt;Lower technical tunnel&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $b10again&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are at the beginning of a technical tunnel which goes deep into the planetoid. The tunnel is lit by red emergency lights. It stretches east. In the west it ends with a lift shaft leading to the upper level.&lt;/span&gt;

&lt;span id="tab"&gt;
[[Go up in the lift|RoomB7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go east|RoomB11]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;You ride in the loud, rickety lift for what seems like eternity.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I've never been in this part of the facility before. What do you know about the tunnels, Odys?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Technical tunnels, drilled in the bedrock, run underneath all sections of the facility and connect with the mining areas. They were designed to enable a quick access to the mines, if need arises. They lead to the main generator room and to the vulcanium tanks as well. Unfortunately, only a part of the tunnel system has cameras installed. Everywhere else you'll have to rely on yourself. I also don't know what the situation near the destroyed tank is. The gas concentration is really high down in the tunnels, but you're safe thanks to your mask. You have to find your way through the tunnels and get to section II.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;&lt;/span&gt;


&lt;&lt;timed 6s t8n&gt;&gt;You get off the lift. It's really cold in the tunnel. You feel a strong air current and hear ventilation humming.&lt;&lt;/timed&gt;&gt;

&lt;span class = 'odys'&gt;&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are at the beginning of a technical tunnel which leads deep into the planetoid. The tunnel is lit by red emergency lights. It stretches east. In the west it ends with a lift shaft leading to the upper level.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b10again to true&gt;&gt;\

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span id="tab"&gt;
[[Go up in the lift|RoomB7]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go east|RoomB11]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;\


</tw-passagedata><tw-passagedata pid="139" name="checkliftbox" tags="" position="2430,3109">&lt;&lt;if $liftboxagain &amp;&amp; $fuseinstalled == 0&gt;&gt;You open the fuse box. There are still two fuses missing.
&lt;&lt;elseif $liftboxagain &amp;&amp; $fuseinstalled == 1&gt;&gt;You open the fuse box. There is still one fuse missing.
&lt;&lt;elseif $liftboxagain &amp;&amp; $fuseinstalled == 2&gt;&gt;You open the fuse box. Both fuses are in place. Emergency power to the lift is on.
&lt;&lt;else&gt;&gt;You open the fuse box.

&lt;span class = 'odys'&gt;ODYS: That's the fuse box for the lift's emergency power system. Two fuses are missing from the box. If you replace them, you will be able to use the lift.&lt;/span&gt;
&lt;&lt;set $liftboxagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $selitem == 'fuse1b' &amp;&amp; $fuseinstalled &lt; 2&gt;&gt;
&lt;span id="tab"&gt;[[Install the fuse in the box|installfuse1b]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'fuse2b' &amp;&amp; $fuseinstalled &lt; 2&gt;&gt;
&lt;span id="tab"&gt;[[Install the fuse in the box|installfuse2b]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomB7]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="140" name="installfuse1b" tags="" position="2628,2956">You carefully place the fuse in the right position.
&lt;&lt;set $fuseinstalled to $fuseinstalled + 1&gt;&gt;\
&lt;&lt;set $selitem to 'none'&gt;&gt;&lt;&lt;set $fuse1b to false&gt;&gt;\

Item lost: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="141" name="installfuse2b" tags="" position="2640,3076">You carefully place the fuse in the right position.
&lt;&lt;set $fuseinstalled to $fuseinstalled + 1&gt;&gt;\
&lt;&lt;set $selitem to 'none'&gt;&gt;&lt;&lt;set $fuse2b to false&gt;&gt;\

Item lost: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="142" name="RoomB11" tags="" position="3393,3312">&lt;&lt;if $b11nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Lower technical corridor, cave-in&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $backtobfromc&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Welcome back, Sandra. You are under section III, by the cave-in.&lt;/span&gt;
&lt;&lt;elseif $debriscleared &amp;&amp; $cartlocation == 'B11'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The tunnel leads deep into the planetoid, through a partially cleared cave-in. Near the pile of rubble there are two six-legged mining robots and an automatic cart.&lt;/span&gt;
&lt;&lt;elseif $debriscleared&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The tunnel leads deep into the planetoid, through a partially cleared cave-in. Near the pile of rubble there are two six-legged mining robots.&lt;/span&gt;
&lt;&lt;elseif $cartlocation == 'B11'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The technical tunnel ends here with a cave-in. A pile of rubble blocks the way. Mixed with the rocks are remains of the tunnel supports. A few metres from the cave-in there is a lock. Near the pile of rubble there is an automatic cart.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The technical tunnel ends here with a cave-in. A pile of rubble blocks the way. Mixed with the rocks are remains of the tunnel supports. A few metres from the cave-in there is a lock.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $debriscleared&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;
&lt;span id="tab"&gt;[[So, the way is blocked?|askaboutdebris]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $debriscleared&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cave-in|checkdebris]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the lock|checklockb11]]&lt;/span&gt;
&lt;&lt;if $debriscleared == false &amp;&amp; $cartlocation == 'B11' &amp;&amp; $bottleoncart == true &amp;&amp; $bottlefull == true&gt;&gt;
&lt;span id="tab"&gt;[[Open the valve on the gas bottle|releasegas]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B11'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B11'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $debriscleared&gt;&gt;
&lt;span id="tab"&gt;[[Examine the robots|checkrobots]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lockclosed&gt;&gt;
&lt;span id="tab"&gt;[[Go west|lockb11closed]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go west|RoomB10][$backtobfromc to false]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $debriscleared&gt;&gt;
&lt;&lt;if $wastoc&gt;&gt;\
&lt;span id="tab"&gt;[[Go east|RoomC1]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;span id="tab"&gt;[[Go east|intropartC]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $askaboutmaze&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Any idea how I could avoid getting lost in the tunnels?|mazeask]]&lt;/span&gt;
&lt;/span&gt;&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Lower technical corridor, cave-in&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $debriscleared &amp;&amp; $cartlocation == 'B11'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The tunnel leads deep into the planetoid, through a partially cleared cave-in. Near the pile of rubble there are two six-legged mining robots and an automatic cart.&lt;/span&gt;
&lt;&lt;elseif $debriscleared&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The tunnel leads deep into the planetoid, through a partially cleared cave-in. Near the pile of rubble there are two six-legged mining robots.&lt;/span&gt;
&lt;&lt;elseif $cartlocation == 'B11'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The technical tunnel ends here with a cave-in. A pile of rubble blocks the way. Mixed with the rocks are remains of the tunnel supports. A few metres from the cave-in there is a lock. Near the pile of rubble there is an automatic cart.&lt;/span&gt;
&lt;&lt;elseif $backtobfromc&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Welcome back, Sandra. You are under section III, by the cave-in.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The technical tunnel ends here with a cave-in. A pile of rubble blocks the way. Mixed with the rocks are remains of the tunnel supports. A few metres from the cave-in there is a lock.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;timed 2s t8n&gt;&gt;&lt;&lt;if $debriscleared&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;
&lt;span id="tab"&gt;[[So, the way is blocked?|askaboutdebris]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $debriscleared&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cave-in|checkdebris]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the lock|checklockb11]]&lt;/span&gt;
&lt;&lt;if $debriscleared == false &amp;&amp; $cartlocation == 'B11' &amp;&amp; $bottleoncart == true &amp;&amp; $bottlefull == true&gt;&gt;
&lt;span id="tab"&gt;[[Open the valve on the gas bottle|releasegas]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B11'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart|checkcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cartlocation == 'B11'&gt;&gt;&lt;&lt;if$carton&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $debriscleared&gt;&gt;
&lt;span id="tab"&gt;[[Examine the robots|checkrobots]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lockclosed&gt;&gt;
&lt;span id="tab"&gt;[[Go west|lockb11closed]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go west|RoomB10][$backtobfromc to false]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $debriscleared&gt;&gt;
&lt;&lt;if $wastoc&gt;&gt;\
&lt;span id="tab"&gt;[[Go east|RoomC1]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;span id="tab"&gt;[[Go east|intropartC]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $askaboutmaze&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Any idea how I could avoid getting lost in the tunnels?|mazeask]]&lt;/span&gt;
&lt;/span&gt;&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $b11nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="143" name="askaboutdebris" tags="" position="3390,3169">&lt;span class = 'odys'&gt;ODYS: Yes. To go further, you need to find some means of clearing the rubble.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="144" name="checkdebris" tags="" position="3283,3462">You find large rock fragments, which block the passage completely. You hear noises – shuffling and metal scratching against the rock – from the other side of the cave-in.


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[There's something on the other side.|somethingthere]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="145" name="somethingthere" tags="" position="3358,3634">&lt;&lt;if $somethingtherenofade&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Robots. Under normal circumstances, they would be mining for gas in the lower tunnels. It appears their central control system has failed and nothing instructs them what to do.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Can I make them clear this rubble?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: I believe it's possible, but you need to find a way to command the robots. Their integral algorithms are rather primitive, I'm afraid. These robots are equipped with vulcanium concentration sensors. If they are not programmed to mine in a particular spot, they bore towards the highest concentration detected, which usually means a gas pocket in the rock. When they reach a pocket, they drill into it, collect the gas and deposit it in one of the underground storage tanks.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: I see... the gas spread out in the tunnels after the explosion. The robots detect it everywhere around and don't know where to dig.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Robots. Under normal circumstances, they would be mining for gas in the lower tunnels. It appears their central control system has failed and nothing instructs them what to do.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Can I make them clear this rubble?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I believe it's possible, but you need to find a way to command the robots. Their integral algorithms are rather primitive, I'm afraid. These robots are equipped with vulcanium concentration sensors. If they are not programmed to mine in a particular spot, they bore towards the highest concentration detected, which usually means a gas pocket in the rock. When they reach a pocket, they drill into it, collect the gas and deposit it in one of the underground storage tanks.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I see... the gas spread out in the tunnels after the explosion. The robots detect it everywhere around and don't know where to dig.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 8s t8n&gt;&gt;[[Back|RoomB11]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;set $somethingtherenofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="146" name="checklockb11" tags="" position="3605,3489">&lt;&lt;if $lockboxrepaired&gt;&gt;&lt;span class = 'odys'&gt;ODYS: That's an airtight lock, designed to cut off the tunnels from the upper level in case of an emergency. It can be opened and closed with the control buttons.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: That is an airtight lock, designed to cut off the tunnels from the upper level in case of an emergency. It's blocked in the open position. The control buttons on both sides of the lock are inactive. On the wall near the lock there is an electrical box.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the electrical box|checklockbox]]&lt;/span&gt;
&lt;&lt;if $lockboxrepaired &amp;&amp; $lockclosed&gt;&gt;
&lt;span id="tab"&gt;[[Open the lock|openlockb11]]&lt;/span&gt;
&lt;&lt;elseif $lockboxrepaired&gt;&gt;
&lt;span id="tab"&gt;[[Close the lock|closelock11b]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="147" name="lockb11closed" tags="" position="3638,3304">A shut lock blocks your way.


&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="148" name="checklockbox" tags="" position="3605,3639">You open the cover of the box.

&lt;&lt;if $lockboxrepaired&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The indicator lights inside the box are on. Power to the lock was restored.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There are no parts missing from the box, but the indicator lights show it is inactive.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $lockboxrepaired&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Try to switch on the power|B11puzzle]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="149" name="B11puzzle" tags="" position="3601,3788">&lt;&lt;if $b11puzzleagain&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The first lever is in the $lever1name position.

The second lever is in the $lever2name position.

The third lever is in the $lever3name position.

The fourth lever is in the $lever4name position.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There are four lever switches inside the box. The first and the second lever are in the upper position. Their indicator lights are green. The third and the fourth lever are in the lower position. Their indicators are red. I attempted to connect to the box controller, but I only received a fault message. The switches may not work properly.&lt;/span&gt;
&lt;&lt;set $b11puzzleagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Switch the first lever|lever1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Switch the second lever|lever2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Switch the third lever|lever3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Switch the fourth lever|lever4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Reset all levers to starting positions|leversreset]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;


</tw-passagedata><tw-passagedata pid="150" name="lever1" tags="" position="3378,3938">You switch the lever.
&lt;&lt;if $lever1 == 1&gt;&gt;&lt;&lt;set $lever1 to 0&gt;&gt;&lt;&lt;set $lever1name to 'lower'&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set$lever1 to 1&gt;&gt;&lt;&lt;set $lever1name to 'upper'&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lever3 == 1&gt;&gt;&lt;&lt;set $lever3 to 0&gt;&gt;&lt;&lt;set $lever3name to 'lower'&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set$lever3 to 1&gt;&gt;&lt;&lt;set $lever3name to 'upper'&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lever1 == 1 &amp;&amp; $lever2 == 1 &amp;&amp; $lever3 == 1 &amp;&amp; $lever4 == 1&gt;&gt;&lt;&lt;set $lockboxrepaired to true&gt;&gt;
&lt;span class = 'odys'&gt;ODYS: All indicators are now green. You repaired the box!&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checklockb11]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Back|B11puzzle]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="151" name="lever2" tags="" position="3528,3938">You switch the lever.
&lt;&lt;if $lever2 == 1&gt;&gt;&lt;&lt;set $lever2 to 0&gt;&gt;&lt;&lt;set $lever2name to 'lower'&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set$lever2 to 1&gt;&gt;&lt;&lt;set $lever2name to 'upper'&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lever1 == 1 &amp;&amp; $lever2 == 1 &amp;&amp; $lever3 == 1 &amp;&amp; $lever4 == 1&gt;&gt;&lt;&lt;set $lockboxrepaired to true&gt;&gt;
&lt;span class = 'odys'&gt;ODYS: All indicators are now green. You repaired the box!&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checklockb11]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Back|B11puzzle]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="152" name="lever3" tags="" position="3678,3938">You switch the lever.
&lt;&lt;if $lever2 == 1&gt;&gt;&lt;&lt;set $lever2 to 0&gt;&gt;&lt;&lt;set $lever2name to 'lower'&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set$lever2 to 1&gt;&gt;&lt;&lt;set $lever2name to 'upper'&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lever3 == 1&gt;&gt;&lt;&lt;set $lever3 to 0&gt;&gt;&lt;&lt;set $lever3name to 'lower'&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set$lever3 to 1&gt;&gt;&lt;&lt;set $lever3name to 'upper'&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lever1 == 1 &amp;&amp; $lever2 == 1 &amp;&amp; $lever3 == 1 &amp;&amp; $lever4 == 1&gt;&gt;&lt;&lt;set $lockboxrepaired to true&gt;&gt;
&lt;span class = 'odys'&gt;ODYS: All indicators are now green. You repaired the box!&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checklockb11]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Back|B11puzzle]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="153" name="lever4" tags="" position="3828,3938">You switch the lever. It immediately switches back.
&lt;&lt;if $lever1 == 1&gt;&gt;&lt;&lt;set $lever1 to 0&gt;&gt;&lt;&lt;set $lever1name to 'lower'&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set$lever1 to 1&gt;&gt;&lt;&lt;set $lever1name to 'upper'&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lever4 == 1&gt;&gt;&lt;&lt;set $lever4 to 0&gt;&gt;&lt;&lt;set $lever4name to 'lower'&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set$lever4 to 1&gt;&gt;&lt;&lt;set $lever4name to 'upper'&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lever1 == 1 &amp;&amp; $lever2 == 1 &amp;&amp; $lever3 == 1 &amp;&amp; $lever4 == 1&gt;&gt;&lt;&lt;set $lockboxrepaired to true&gt;&gt;
&lt;span class = 'odys'&gt;ODYS: All indicators are now green. You repaired the box!&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checklockb11]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Back|B11puzzle]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="154" name="leversreset" tags="" position="3616,4148">You reset the levers.
&lt;&lt;set $lever1 to 1&gt;&gt;\
&lt;&lt;set $lever2 to 1&gt;&gt;\
&lt;&lt;set $lever3 to 0&gt;&gt;\
&lt;&lt;set $lever4 to 0&gt;&gt;\
&lt;&lt;set $lever1name to 'upper'&gt;&gt;\
&lt;&lt;set $lever2name to 'upper'&gt;&gt;\
&lt;&lt;set $lever3name to 'lower'&gt;&gt;\
&lt;&lt;set $lever4name to 'lower'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|B11puzzle]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="155" name="openlockb11" tags="" position="3991,3529">You press the button. You hear the massive lock open slowly.
&lt;&lt;set $lockclosed to false&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checklockb11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="156" name="closelock11b" tags="" position="3993,3400">You press the button. You hear the massive lock slam shut.
&lt;&lt;set $lockclosed to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checklockb11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="157" name="releasegas" tags="" position="3643,3065">&lt;&lt;if $lockclosed&gt;&gt;Pressurised vulcanium escapes from the bottle and fills the cut-off part of the tunnel. A moment later sounds of hectic movement and drilling start coming from the other side of the cave-in.

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The robots started drilling through the rubble. Well done, Sandra!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;The sounds grow louder and louder; pieces of rock fall to the floor. You step back to a safe distance. After a few minutes you hear a loud rumble and then the sounds of drilling stop.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The robots have cleared a passage through the rubble. You can go down to the tunnels now.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $bottlefull to false&gt;&gt;&lt;&lt;set $debriscleared to true&gt;&gt;\


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;&lt;&lt;timed 8s t8n&gt;&gt;[[What about the robots?|robotsask]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 9s t8n&gt;&gt;[[Back|RoomB11]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;Pressurised vulcanium escapes from the bottle and disperses in the intensely ventilated tunnel.

&lt;span class = 'sandra'&gt;SANDRA: Oh no... I have to fill the bottle and bring it back here.&lt;/span&gt;
&lt;&lt;set $bottlefull to false&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="158" name="robotsask" tags="" position="3861,3046">&lt;span class = 'odys'&gt;ODYS: The gas dispersed when they created a passage through the rubble. The robots stopped moving.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="159" name="intropartC" tags="" position="4279,3190">With difficulty you squeeze through a narrow opening in the cave-in. Finally, you get to the other side.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I'm really impressed by your determination, Sandra. So far, you've been doing great.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Are you trying to comfort me?&lt;/span&gt;&lt;&lt;/timed&gt;&gt; 

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Yes, but that doesn't mean I'm lying. I hope you'll do just as well in the technical tunnels.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I've never been there. Will you guide me?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I can't, Sandra. There are no cameras in the tunnels. I would be a blind leading the blind. We won't even hear each other. I'm going to give you all the important information I have, but then you'll be on your own.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 8s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Are you telling me to navigate through the tunnels blindly? That's madness.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: That's your only chance. As long as you stay calm, everything will be all right.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 10s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The tunnels form a tangled maze, with several large chambers. You must reach the lift which goes up to section II eastern wing. Fortunately, that area escaped significant damage. The lift is blocked on the upper level, but I'll take care of that. However, you must help me first.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 12s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Me? Help you?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 13s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Yes. As I mentioned, my functionality is severely limited. If my functions are unlocked, I will be able to control the lift, among other things. I have a reason to believe that resetting the main power generator will remove the lockdown.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 15s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: And the generator room can be accessed from the mine tunnels.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 16s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I see you understand the situation. That's good. Should you need to contact me, just return here.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 17s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[All right. Until then.|intropartCending]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I have some questions before I go.|intropartC1]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

</tw-passagedata><tw-passagedata pid="160" name="checkrobots" tags="" position="3768,3198">The mining robots don't react to your presence – at least not in any audible way.

&lt;span class = 'odys'&gt;ODYS: They won't move until they receive a command from the central control system, or detect an increased concentration of mine gas.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="161" name="mazeask" tags="" position="3121,3465">&lt;span class = 'odys'&gt;ODYS: Wandering blindly through these tunnels must be a difficult experience. I'm sorry I can't support you any better. I can only offer a suggestion – use senses other than sight. Counting steps and turns can also be helpful – if nothing else, at least you'll be able to get back here.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomB11]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="162" name="RoomC1" tags="" position="5015,3135">&lt;span class="header"&gt;&lt;center&gt;Descending tunnel&lt;/center&gt;&lt;/span&gt;\

You are in a rocky tunnel, gently declining to the east. The ground is uneven here. To the west there is a partially cleared cave-in. From the east you hear some muffled noises.


&lt;span id="tab"&gt;[[Listen|c1listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go east|RoomC2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go west|RoomB11][$backtobfromc to true]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;set $wastoc to true&gt;&gt;
</tw-passagedata><tw-passagedata pid="163" name="intropartC1" tags="" position="4399,3077">&lt;span class = 'odys'&gt;ODYS: Of course.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Can you describe this place to me?|intropartC1_2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What should I expect in the tunnels?|intropartC1_3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Do you at least have an idea which direction should I head in?|intropartC1_4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I have no more questions. Later, Odys.|intropartCending]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="164" name="intropartC1_2" tags="" position="4382,2922">&lt;span class = 'odys'&gt;ODYS: You are in a narrow, descending tunnel drilled in the rock. The ground is uneven. It's semi-dark in here – lamps in the lower tunnels are not working.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: I'm a bit worried it's dark in there. I know – it's irrational, I can't see anyway.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|intropartC2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="165" name="intropartC1_3" tags="" position="4531,3062">&lt;span class = 'odys'&gt;ODYS: Turns and dead ends, to be sure. You may also run into mining robots. Besides, tunnels near the destroyed gas tank likely collapsed.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|intropartC2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="166" name="intropartC1_4" tags="" position="4474,3227">&lt;span class = 'odys'&gt;ODYS: Of course. The lift to section II is in the north, and the main generator room is located next to the room with the lift.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|intropartC2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="167" name="intropartCending" tags="" position="4768,3147">&lt;span class = 'odys'&gt;ODYS: I'll be waiting.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|RoomC1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="168" name="intropartC2" tags="" position="4598,2922">&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Can you describe this place to me?|intropartC1_2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What should I expect in the tunnels?|intropartC1_3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Do you at least have an idea which direction should I head in?|intropartC1_4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I have no more questions. Later, Odys.|intropartCending]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="169" name="c1listen" tags="" position="4869,3272">You listen closely. After a while you begin to distinguish a metallic thudding and a quieter, low buzz. Whatever machines emit these noises, they must be far away.


&lt;span id="tab"&gt;[[Back|RoomC1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="170" name="RoomC2" tags="" position="5383,3145">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

You are in a small chamber carved in the rock. Several tunnels exit the room.  
&lt;&lt;if $c2again&gt;&gt;They lead north, north-east, east and west.
&lt;&lt;else&gt;&gt;You circle the room with your hand touching the stone wall and discover three more exits, leading north, north-east and east.
&lt;&lt;set $c2again to true&gt;&gt;\

&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc5&gt;&gt;
A smell of bourbon is coming from the northern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc6&gt;&gt;
A smell of bourbon is coming from the north-eastern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc3&gt;&gt;A smell of bourbon is coming from the eastern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $selitem == 'bourbon' &amp;&amp; $mazebegun == false &amp;&amp; $askaboutmaze == true&gt;&gt;
&lt;span id="tab"&gt;[[Use bourbon to mark your path|bourbonstart]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2&gt;&gt;\
&lt;&lt;elseif $mazebegun&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc2]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c2listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go west|RoomC1]]&lt;/span&gt;
&lt;&lt;if $mazebegun&gt;&gt;
&lt;span id="tab"&gt;[[Go north|RoomC5]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go north|cannotentermaze]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $mazebegun&gt;&gt;
&lt;span id="tab"&gt;[[Go north-east|RoomC6]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go north-east|cannotentermaze]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $mazebegun&gt;&gt;
&lt;span id="tab"&gt;[[Go east|RoomC3]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go east|cannotentermaze]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="171" name="RoomC5" tags="" position="5351,2766">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

After wandering the tunnels for some time, you reach a chamber carved in rock. It has three exits, leading: north, north-east and south.
&lt;&lt;if $bourboninc2&gt;&gt;
A smell of bourbon is coming from the southern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc8&gt;&gt;
A smell of bourbon is coming from the northern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc9&gt;&gt;
A smell of bourbon is coming from the north-eastern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc5&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc5]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c5listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomC8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north-east|RoomC9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomC2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="172" name="cannotentermaze" tags="" position="5309,3295">&lt;span class = 'sandra'&gt;SANDRA: The maze Odys talked about must begin here. I need to find some way of marking my trail before I go there. A way that works for someone blind.&lt;/span&gt;
&lt;&lt;set $askaboutmaze to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC2]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="173" name="RoomC6" tags="" position="5667,2816">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

After wandering the tunnels for some time, you reach a chamber carved in rock. It has three exits, leading: north, south and south-west.
&lt;&lt;if $bourboninc2&gt;&gt;
A smell of bourbon is coming from the south-western tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc3&gt;&gt;
A smell of bourbon is coming from the southern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc9&gt;&gt;
A smell of bourbon is coming from the northern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc6&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc6]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c6listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomC9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-west|RoomC2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomC3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="174" name="RoomC3" tags="" position="5736,3152">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $c3longroad&gt;&gt;You follow the tunnel for a long time, making a U-turn, and reach a rock chamber. It has five exits, leading: west, north, north-east, east and south-east.&lt;&lt;set $c3longroad to false&gt;&gt;
&lt;&lt;else&gt;&gt;After wandering the tunnels for some time, you reach a chamber carved in rock. It has five exits, leading: west, north, north-east, east and south-east.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2&gt;&gt;
A smell of bourbon is coming from the western tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc6&gt;&gt;
A smell of bourbon is coming from the northern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc7&gt;&gt;
A smell of bourbon is coming from the north-eastern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc4&gt;&gt;
A smell of bourbon is coming from the eastern tunnel.

A smell of bourbon is coming from the south-eastern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc3&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c3listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go west|RoomC2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomC6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north-east|RoomC7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go east|RoomC4][$c4longroad to true]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-east|RoomC4][$c4longroad to false]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="175" name="bourbonstart" tags="" position="5439,3295">&lt;span class = 'sandra'&gt;SANDRA: That's a silly idea. But it might just work. This bourbon has quite a smell – even the breath mask can't block that stench.&lt;/span&gt;
&lt;&lt;set $mazebegun to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC2]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="176" name="bourbonc2" tags="" position="5374,3405">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc2 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="177" name="bourbonreset" tags="noreturn" position="5615,3391">&lt;span class = 'sandra'&gt;SANDRA: I should start marking my trail anew.&lt;/span&gt;
&lt;&lt;set $bourboninc2 to false&gt;&gt;\
&lt;&lt;set $bourboninc3 to false&gt;&gt;\
&lt;&lt;set $bourboninc4 to false&gt;&gt;\
&lt;&lt;set $bourboninc5 to false&gt;&gt;\
&lt;&lt;set $bourboninc6 to false&gt;&gt;\
&lt;&lt;set $bourboninc7 to false&gt;&gt;\
&lt;&lt;set $bourboninc8 to false&gt;&gt;\
&lt;&lt;set $bourboninc9 to false&gt;&gt;\
&lt;&lt;set $bourboninc10 to false&gt;&gt;\
&lt;&lt;set $bourboninc11 to false&gt;&gt;\
&lt;&lt;set $bourboninc12 to false&gt;&gt;\
&lt;&lt;set $bourboninc12 to false&gt;&gt;\


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="178" name="c2listen" tags="" position="5203,3428">Quite loud metallic thudding is coming from the east. A barely audible buzz is coming from the north-east.


&lt;span id="tab"&gt;[[Back|RoomC2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="179" name="bourbonc3" tags="" position="5764,3333">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc3 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="180" name="c3listen" tags="" position="5934,3397">Loud metallic thudding is coming from the north-east. A barely audible buzz is coming from the north.


&lt;span id="tab"&gt;[[Back|RoomC3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="181" name="RoomC7" tags="" position="6059,2826">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

You reach another chamber. The metallic noises – thudding, scratching and drilling – are very loud now. Their source must be nearby. The chamber has three exits, leading: north, east and south-west.
&lt;&lt;if $bourboninc3&gt;&gt;
A smell of bourbon is coming from the south-western tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc10&gt;&gt;
A smell of bourbon is coming from the northern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc7&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc7]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c7listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomC10]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go east|robotsc7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-west|RoomC3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="182" name="RoomC4" tags="" position="6228,3285">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $c4longroad&gt;&gt;You follow a descending tunnel for a long time, making a U-turn at one point. Finally you reach a large rock chamber. There are many niches and crevices, large and small, in its walls. The chamber has two exits, leading: north-west and east.
&lt;&lt;else&gt;&gt;You follow a descending corridor and reach a large rock chamber. There are many niches and crevices, large and small, in its walls. The chamber has two exits, leading: north-west and east.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc3&gt;&gt;
A smell of bourbon is coming from the north-western tunnel.

A smell of bourbon is coming from the eastern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc4&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc4]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c4listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north-west|RoomC3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go east|RoomC3][$c3longroad to true]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="183" name="bourbonc4" tags="" position="6228,3435">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc4 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="184" name="c4listen" tags="" position="6118,3435">Quite loud metallic thudding is coming from the north-west and from the east.


&lt;span id="tab"&gt;[[Back|RoomC4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="185" name="bourbonc5" tags="" position="5224,2788">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc5 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="186" name="c5listen" tags="" position="5241,2955">Quiet metallic thudding is coming from the north-east. A quiet buzz is coming from the north-east.  


&lt;span id="tab"&gt;[[Back|RoomC5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="187" name="RoomC8" tags="" position="5357,2570">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

After wandering the tunnels for some time, you reach a chamber carved in rock. It has only one exit, leading south. There is a large pile of rubble on the western side of the chamber.
&lt;&lt;if $bourboninc5&gt;&gt;
A smell of bourbon is coming from the southern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc8&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc8]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c8listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the rubble|rubblec8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomC5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="188" name="RoomC9" tags="" position="5702,2582">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

After wandering the tunnels for some time, you reach a chamber carved in rock. It has five exits, leading: north-west, north, east, south and south-west.
&lt;&lt;if $bourboninc5&gt;&gt;
A smell of bourbon is coming from the south-western tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc6&gt;&gt;
A smell of bourbon is coming from the southern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc10&gt;&gt;
A smell of bourbon is coming from the eastern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc11&gt;&gt;
A smell of bourbon is coming from the north-western tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc12&gt;&gt;
A smell of bourbon is coming from the northern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc9&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc9]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c9listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomC12]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go east|RoomC10]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomC6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-west|RoomC5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north-west|RoomC11]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="189" name="bourbonc6" tags="" position="5624,2978">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc6 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC6]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="190" name="c6listen" tags="" position="5774,2978">Quite loud metallic thudding is coming from the south. A quiet buzz is coming from the north.


&lt;span id="tab"&gt;[[Back|RoomC6]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="191" name="bourbonc7" tags="" position="6059,2978">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc7 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="192" name="c7listen" tags="" position="6199,2999">Metallic thudding, deafeningly loud, drowns out all other sounds. There must be mining robots working nearby.


&lt;span id="tab"&gt;[[Back|RoomC7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="193" name="RoomC10" tags="" position="6064,2576">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

After wandering the tunnels for some time, you reach a chamber carved in rock. It has two exits, leading: west and south. In the eastern wall there is a niche, about one meter deep.
&lt;&lt;if $bourboninc7&gt;&gt;
A smell of bourbon is coming from the southern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc9&gt;&gt;
A smell of bourbon is coming from the western tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc10&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc10]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c10listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the niche|nichec10]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go west|RoomC9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomC7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;


</tw-passagedata><tw-passagedata pid="194" name="robotsc7" tags="" position="6279,2836">Heading towards the source of the noises, you approach the robots, working near a tunnel exit. The robots don't react to your presence in any way.


&lt;span id="tab"&gt;[[Examine the robots|checkrobotsc7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the tunnel|checkpassagec7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go back to the chamber|RoomC7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="195" name="checkrobotsc7" tags="" position="6405,2921">&lt;span class = 'sandra'&gt;SANDRA: They must be the same type of robots as those that cleared the cave-in.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|robotsc7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="196" name="checkpassagec7" tags="" position="6392,2732">The robots are working on the left side of the corridor. You cautiously pass by them, clinging to the right hand wall, and after a few metres you reach a dead end. Apparently this is a new tunnel and the robots have just started drilling it.


&lt;span id="tab"&gt;[[Back|robotsc7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="197" name="bourbonc8" tags="" position="5196,2482">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc8 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="198" name="c8listen" tags="" position="5201,2612">Barely audible metallic thudding is coming from the south. A barely audible buzz is coming from the south. 


&lt;span id="tab"&gt;[[Back|RoomC8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="199" name="rubblec8" tags="" position="5061,2498">Among the rubble you find some bent pieces of metal, which once could have formed the tunnel supports.

&lt;span class = 'sandra'&gt;SANDRA: I think there used to be a tunnel here, leading to the room with the gas tank. It collapsed when the tank exploded.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomC8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="200" name="bourbonc9" tags="" position="5582,2501">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc9 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC9]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="201" name="c9listen" tags="" position="5576,2639">Quite loud metallic thudding is coming from the east. A quite loud buzz is coming from the north. 


&lt;span id="tab"&gt;[[Back|RoomC9]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="202" name="RoomC12" tags="" position="5692,2254">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

You reach a room with even floor made of metal panels. A rock tunnel leads south from the room. There are two doors here – in the northern and in the eastern wall.
&lt;&lt;if $bourboninc9&gt;&gt;
A smell of bourbon is coming from the southern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc12&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc12]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c12listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomC15]]&lt;/span&gt;
&lt;&lt;if $doorc12open&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|RoomC14]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|c14closed]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go south|RoomC9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="203" name="RoomC11" tags="" position="5297,2173">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

After wandering the tunnels for some time, you reach a chamber carved in rock. It has two exits, leading: north-west and south-east. There is a large pile of rubble on the western side of the chamber.
&lt;&lt;if $bourboninc9&gt;&gt;
A smell of bourbon is coming from the south-eastern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc13&gt;&gt;
A smell of bourbon is coming from the north-western tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc11&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc11]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c11listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the rubble|rubblec11]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north-west|RoomC13]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-east|RoomC9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="204" name="bourbonc10" tags="" position="6190,2611">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc10 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC10]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="205" name="c10listen" tags="" position="6192,2454">Loud metallic thudding is coming from the south. A quiet buzz is coming from the west.


&lt;span id="tab"&gt;[[Back|RoomC10]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="206" name="nichec10" tags="" position="6059,2368">You reach into the hole drilled in the rock. It is about one meter deep.

&lt;span class = 'sandra'&gt;SANDRA: Seems like the robots started working on a new tunnel here, but left it unfinished for some reason.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomC10]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="207" name="bourbonc11" tags="" position="5381,2305">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc11 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="208" name="c11listen" tags="" position="5472,2196">Quiet metallic thudding is coming from the south-east. A quiet buzz is coming from the south-east.


&lt;span id="tab"&gt;[[Back|RoomC11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="209" name="rubblec11" tags="" position="5211,2303">It's a huge pile of rubble. It's made of porous rocks, mixed with some metal fragments.

&lt;span class = 'sandra'&gt;SANDRA: It seems there used to be a tunnel here, leading to the room with the gas tank. It collapsed when the tank exploded.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomC11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="210" name="RoomC13" tags="" position="5049,1953">&lt;span class="header"&gt;&lt;center&gt;In the technical tunnels&lt;/center&gt;&lt;/span&gt;\

After wandering the tunnels for some time you reach a chamber carved in rock. There is only one exit here, leading south-east. There is a massive door in the western wall.
&lt;&lt;if $bourboninc11&gt;&gt;
A smell of bourbon is coming from the south-eastern tunnel.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $bourboninc13&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon|bourbonc13]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $bourboninc2 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc3 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc4 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc5 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc6 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc7 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc8 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc9 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc10 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc11 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc12 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;elseif $bourboninc13 == true&gt;&gt;
&lt;span id="tab"&gt;[[Wait until the smell of bourbon fades away|bourbonreset]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Listen|c13listen]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the door|checkdoorc13]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south-east|RoomC11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="211" name="bourbonc12" tags="" position="5863,2224">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc12 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC12]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="212" name="c12listen" tags="" position="5863,2329">A loud, buzzing noise is coming through the eastern door, drowning out all other sounds.


&lt;span id="tab"&gt;[[Back|RoomC12]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="213" name="RoomC15" tags="" position="5662,1723">&lt;span class="header"&gt;&lt;center&gt;Lift room&lt;/center&gt;&lt;/span&gt;\

You are in a large room. Its walls and floor are panelled. On the western side of the room you discover a rounded lift shaft, protruding from the wall. There are doors in the northern and in the southern wall of the room.


&lt;span id="tab"&gt;[[Examine the lift|liftc15]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|c15north]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomC12]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="214" name="RoomC14" tags="" position="6402,2215">&lt;span class="header"&gt;&lt;center&gt;Generator room&lt;/center&gt;&lt;/span&gt;\

You are in a large room. You feel a strong air current. The noise of machinery whizzing and buzzing is almost deafening. There is a door in the western wall of the room.


&lt;&lt;if $genchecked&gt;&gt;\
&lt;span id="tab"&gt;[[Check the generator|noisec14]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;span id="tab"&gt;[[Check the source of the noise|noisec14]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Check the source of the draught|ventc14]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomC12]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="215" name="c14closed" tags="" position="5940,2094">The door is locked. There is a smooth panel to the right of the door.

&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;
&lt;span id="tab"&gt;[[Use your keycard|c14unlockfalse]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'mulliganscard'&gt;&gt;
&lt;span id="tab"&gt;[[Use Mulligan's keycard|c14unlock]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomC12]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="216" name="c14unlockfalse" tags="" position="6053,1987">You put your keycard to the panel, but nothing happens.

&lt;span class = 'sandra'&gt;SANDRA: No access rights, I guess.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomC12]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="217" name="c14unlock" tags="" position="6073,2142">You put Jim Mulligan's keycard to the panel. The door opens.
&lt;&lt;set $doorc12open to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the door|RoomC14]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomC12]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="218" name="bourbonc13" tags="" position="5004,1826">You spill some bourbon on the rock floor.
&lt;&lt;set $bourboninc13 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomC13]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="219" name="c13listen" tags="" position="5151,1823">Barely audible metallic thudding is coming from the south-east. A barely audible buzz is coming from the south-east.


&lt;span id="tab"&gt;[[Back|RoomC13]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="220" name="checkdoorc13" tags="" position="4887,1948">This massive door, which takes up almost an entire wall of the room, is locked. There are numerous bulges and bends on its metal surface. 
&lt;&lt;if $achievementdoor == true&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set $achievementdoor to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the door panel|panelc13]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomC13]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="221" name="panelc13" tags="" position="4737,1938">You find a panel with several buttons on one side of the door. The cover under the panel, which has a round hole, is locked and bent.

&lt;span class = 'sandra'&gt;SANDRA: Someone locked it in a hurry and used too much force.&lt;/span&gt;


&lt;span id="tab"&gt;[[Try to open the door|trydoorc13]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|checkdoorc13]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="222" name="trydoorc13" tags="" position="4589,1933">Pressing the buttons on the panel has no effect.


&lt;span id="tab"&gt;[[Back|checkdoorc13]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="223" name="noisec14" tags="" position="6581,2218">&lt;&lt;set $genchecked to true&gt;&gt;\
The noise comes from a massive, metal piece of machinery, which takes up most of the eastern part of the room. Its housing is almost perfectly flat, apart from a small door, which is about one meter high.
&lt;&lt;if $genagain&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;
SANDRA: This must be the main generator.&lt;/span&gt;
&lt;&lt;set $genagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $gendooropen&gt;&gt;
&lt;span id="tab"&gt;[[Examine the space behind the generator door|genniche]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Open the generator door|gendoor]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Step back from the generator|RoomC14]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="224" name="genniche" tags="" position="6742,2118">You cautiously reach into the opening and locate a lever switch.


&lt;span id="tab"&gt;[[Switch the lever|genreset]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|noisec14]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="225" name="gendoor" tags="" position="6748,2293">&lt;&lt;if $selitem == 'wrench'&gt;&gt;
The socket wrench you found fits the hole in the door perfectly. You struggle with the lock for a while, but finally you manage to open the door. 
&lt;&lt;set $gendooropen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|noisec14]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
The door is locked and has no handle, only a round socket.

&lt;span class = 'sandra'&gt;SANDRA: I need some tool to open that.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|noisec14]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="226" name="genreset" tags="" position="6879,2060">&lt;&lt;if $resetperformed&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I've already reset the system. There's no need to fiddle with it and risk an electrocution.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|noisec14]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You pull the lever. The noise dies down and the airflow stops.

&lt;&lt;timed 2s t8n&gt;&gt;You wait a while and switch the lever back. The generator springs back to life.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I've restarted it, just like Odys said. I hope he was right and this is really going to help us.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $resetperformed to true&gt;&gt;\


&lt;&lt;timed 4s t8n&gt;&gt;&lt;span id="tab"&gt;[[Back|noisec14]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="227" name="ventc14" tags="" position="6402,2365">You go along the arching wall and reach the place where the draught is the strongest. The source of the airflow is somewhere close to the ceiling.

&lt;span class = 'sandra'&gt;SANDRA: At least the ventilation is working. But I'm not going to take my mask off.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomC14]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="228" name="liftc15" tags="" position="5837,1623">&lt;&lt;if $resetperformed &amp;&amp; $wrench&gt;&gt;The lift door slides open when you push the button. You put forward one foot to make sure the cabin is behind the door.


&lt;span id="tab"&gt;[[Go up in the lift|IntroD]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Move away from the lift|RoomC15]]&lt;/span&gt;
&lt;&lt;elseif $wrench&gt;&gt;The lift door is locked. This most likely means there is no cabin behind it.


&lt;span id="tab"&gt;[[Try to call the lift|c15nolift]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Move away from the lift|RoomC15]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;The lift door is locked. This most likely means there is no cabin behind it. Near the lift door you step on some object.

&lt;span class = 'sandra'&gt;SANDRA: Odys said he would be able to bring the lift down here if I reset the main generator.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the object on the floor|takewrench]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Try to call the lift|c15nolift]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Move away from the lift|RoomC15]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;

</tw-passagedata><tw-passagedata pid="229" name="IntroD" tags="" position="5888,1286">&lt;span class = 'odys'&gt;ODYS: It's good to see you again, Sandra. We are in section II of the station, and I regained access to most systems. This means I can support you in many more ways now.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Did you send the distress call?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Unfortunately, even though you removed the lockdown, I still can't do that. To send the signal, one has to press the confirmation button on a console in the command centre, and I have no hands.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: What? This is unbelievably stupid! What if everyone… if I lost consciousness? You must be able to call help!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I fully agree with you, but it wasn't me who programmed the system. Such are the applicable regulations, which OSMiC must follow. Right or wrong, questioning them will not help us now. You must find the code. Under normal circumstances I could share it with you, but there were some... complications. Fortunately, there is one place where you can obtain the code – Sasha Zinov's computer. Zinov locked it, so that remote access is impossible.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 10s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Zinov… our IT specialist? Why did he lock his computer?|IntroD2]]&lt;/span&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="230" name="c15nolift" tags="" position="5842,1808">Whichever button you press, nothing happens.


&lt;span id="tab"&gt;[[Back|liftc15]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="231" name="takewrench" tags="" position="5987,1773">You bend down and pick up the object. It's a socket wrench.

Item received: &lt;span class = 'items'&gt;Socket wrench&lt;/span&gt;
&lt;&lt;set $wrench to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|liftc15]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="232" name="wrench" tags="noreturn" position="917,336">&lt;span class="items"&gt;A heavy wrench with a long handle.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="233" name="c15north" tags="" position="5507,1597">The door is locked.

&lt;span class = 'sandra'&gt;SANDRA: There's nothing for me in the further tunnels anyway.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomC15]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="234" name="IntroD2" tags="" position="5893,1134">&lt;span class = 'odys'&gt;ODYS: When the Outworlders attacked, he panicked. Desperately trying to save himself, he escaped to his office, locked the door and cut off all communication with the rest of the facility.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: But what for?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: He wasn't thinking logically. He believed isolation could make him safe if the aliens got on the station. But it didn't save him from the gas. You shouldn't think ill of Sasha. Blind fear is an impulse few people can resist. It's an evolutionary adaptation.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: But that just doesn't seem like him at all. He used to be so composed – or so I remember.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: That's true, but he's never found himself in such dire circumstances before. Anyway, we better not waste any more time on such considerations, Sandra. Sasha is dead, but you can still save yourself. You must reach Zinov's office. We're now in section II, where the crew quarters are – you should know its plan well.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 8s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I remember some places, like my room, but not the plan of the whole section.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Don't worry, Sandra. I'll try to fill in the gaps. &lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 10s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Sasha's office is located in the north-western part of this section. You should head that way. You'll meet certain obstacles on your way, but we'll worry about those when the time's right.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 12s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Got it. Let's go, then.|RoomD1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Before I go, I want to ask you some questions.|IntroD3]]&lt;/span&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="235" name="RoomD1" tags="" position="9881,1759">&lt;&lt;if $d1nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Lift room&lt;/center&gt;&lt;/span&gt;\
&lt;&lt;if $d1again&gt;&gt;\
&lt;&lt;else&gt;&gt;
It's really cold in this part of the station, even though you feel the still air, which means the ventilation is not working.
&lt;&lt;set $d1again to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in a large room. In its centre there is a lift shaft. The room is mostly empty. Pipe stacks are running under the ceiling and by the walls. The only door in the room leads west.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Why is it so cold in here?|coldask]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go down in the lift|takeliftd1]]&lt;/span&gt;
&lt;&lt;if $lifttofix == true &amp;&amp; $fusesfromd1taken == false&gt;&gt;
&lt;span id="tab"&gt;[[Remove fuses from the lift control panel|takefusesd1]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the western door|RoomD2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Lift room&lt;/center&gt;&lt;/span&gt;\
&lt;&lt;if $d1again&gt;&gt;\
&lt;&lt;else&gt;&gt;
It's really cold in this part of the station, even though you feel the still air, meaning the ventilation is not working.
&lt;&lt;set $d1again to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a large room. In its centre there is a lift shaft. The room is mostly empty. Pipe stacks are running under the ceiling and by the walls. The only door in the room leads west.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Why is it so cold in here?|coldask]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go down in the lift|takeliftd1]]&lt;/span&gt;
&lt;&lt;if $lifttofix == true &amp;&amp; $fusesfromd1taken == false&gt;&gt;
&lt;span id="tab"&gt;[[Remove fuses from the lift control panel|takefusesd1]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the western door|RoomD2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d1nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="236" name="IntroD3" tags="" position="5725,1224">&lt;span class = 'odys'&gt;ODYS: Of course.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What's the situation in this section? You said the damage was greatest here.|IntroD3_1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Was Sasha the one who cut you off from the control systems, Odys?|IntroD3_2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[You haven't asked me how I feel in a while.|IntroD3_3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Can you tell me how the rooms are arranged in this section?|IntroD3_4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I have no more questions.|RoomD1]]&lt;/span&gt;&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="237" name="IntroD3_1" tags="" position="5610,1023">&lt;span class = 'odys'&gt;ODYS: The southern part is in ruin. There's no way of getting through it. The northern part of the section seems to have suffered less damage, but the lock reading to the northern corridor is frozen.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Frozen? How is that possible?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: There is a room used for storing refrigerant tanks just behind the lock. Damage to the tanks unsealed them and escaping refrigerant caused local icing. We need to find a way of defrosting the lock.&lt;/span&gt;
&lt;&lt;set $freezeexplain to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|IntroD3B]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="238" name="IntroD3_2" tags="" position="5455,1106">&lt;span class= 'odys'&gt;ODYS: Yes. He accidentally blocked most of my access rights when he was cutting of the systems. Fortunately, you were able to undo this.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Earlier you told me that you had suffered in the attack.|IntroD3_2_1]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|IntroD3B]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="239" name="IntroD3_3" tags="" position="5501,1241">&lt;span class = 'odys'&gt;ODYS: And how are you feeling?&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Better, thanks. The stickiness in the lungs is gone, and my memory is coming back. If I could see, I'd manage to find my way through this section, I think.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: That's great news, Sandra. I'm glad to hear that.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|IntroD3B]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="240" name="IntroD3_4" tags="" position="5630,1349">&lt;span class = 'odys'&gt;ODYS: Section II is shaped like an equal-armed cross, with two main corridors intersecting. You're at the end of the eastern arm now. In this part there's the bathroom, a large storage room and Dr. Romani's laboratory. In the southern part the crew quarters are located. That area has suffered the greatest damage. Some rooms may be inaccessible.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: I remember my room was in the south, near the main intersection.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: The western part contains more private quarters, the canteen and the gym. In the north there are some technical rooms and Sasha Zinov's office.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|IntroD3B]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="241" name="IntroD3B" tags="" position="5796,1014">&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What's the situation in this section? You said the damage was greatest here.|IntroD3_1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Was Sasha the one who cut you off from the control systems, Odys?|IntroD3_2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[You haven't asked me how I feel in a while.|IntroD3_3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Can you tell me how the rooms are arranged in this section?|IntroD3_4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I have no more questions.|RoomD1]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="242" name="IntroD3_2_1" tags="" position="5278,1009">&lt;span class = 'odys'&gt;ODYS: I decided the reason behind my limitations is not important. Also, I didn't want to speak ill of Sasha. If the reset had granted me access rights to the code, there would have been no need to mention his insanity at all. Unfortunately, his computer is still locked, so I had to tell you about what happened. Still, his panic was caused by the attack. So I was telling the truth, from a certain point of view.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[I understand.|IntroD3B]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I'd be happier if you told me just the truth and let me have my own point of view.|IntroD3_2_2]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="243" name="IntroD3_2_2" tags="" position="5228,1138">&lt;span class = 'odys'&gt;ODYS: Of course. I am sorry; now I see I could have been wrong, but I only did what I believed was tactful and appropriate.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|IntroD3B]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="244" name="coldask" tags="" position="10026,1882">&lt;span class = 'odys'&gt;ODYS: That's because refrigerant is leaking from the tanks in the northern part of the section.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="245" name="takeliftd1" tags="" position="10005,2012">&lt;&lt;if $fusesfromd1taken&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The lift won't move without the fuses. There's no reason to go back there, anyway.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There's no reason to go back there, Sandra.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="246" name="takefusesd1" tags="" position="9895,2042">You open the lift control panel and remove two fuses.

Item received: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: All right – now you can start the lift to section I.&lt;/span&gt;
&lt;&lt;set $fusesfromd1taken to true&gt;&gt;\
&lt;&lt;set $fuse1d to true&gt;&gt;\
&lt;&lt;set $fuse2d to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="247" name="RoomD2" tags="" position="9556,1759">&lt;&lt;if $d2nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II eastern corridor, eastern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the eastern corridor of section II. Some of the lamps aren't working, but other than that, there's no visible damage here. The corridor goes west. There are also three doors here: to the north, to the east and to the south.&lt;/span&gt;


&lt;span id="tab"&gt;[[Go west|RoomD3]]&lt;/span&gt;
&lt;&lt;if $bathroomentered&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomD4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|goingtobath]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II eastern corridor, eastern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the eastern corridor of section II. Some of the lamps aren't working, but other than that, there's no visible damage here. The corridor goes west. There are also three doors here: to the north, to the east and to the south.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go west|RoomD3]]&lt;/span&gt;
&lt;&lt;if $bathroomentered&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomD4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|goingtobath]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d2nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="248" name="fuse1d" tags="noreturn" position="1173,350">&lt;span class="items"&gt;A universal fuse, used in many systems on the station.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="249" name="fuse2d" tags="noreturn" position="1338,345">&lt;span class="items"&gt;A universal fuse, used in many systems on the station.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="250" name="RoomD3" tags="" position="9314,1754">&lt;&lt;if $d3nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II eastern corridor, western part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the eastern corridor of section II. The corridor goes east. There are two doors here, to the north and to the south, and a massive lock to the west.&lt;/span&gt;


&lt;span id="tab"&gt;[[Go east|RoomD2]]&lt;/span&gt;
&lt;&lt;if $eastlockopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the lock|RoomD8]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the lock|eastlock]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the northern door|RoomD6]]&lt;/span&gt;
&lt;&lt;if $labdooropen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|RoomD7]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|labclosed]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II eastern corridor, western part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the eastern corridor of section II. The corridor goes east. There are two doors here, to the north and to the south, and a massive lock to the west.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go east|RoomD2]]&lt;/span&gt;
&lt;&lt;if $eastlockopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the lock|RoomD8]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the lock|eastlock]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the northern door|RoomD6]]&lt;/span&gt;
&lt;&lt;if $labdooropen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|RoomD7]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|labclosed]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d3nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="251" name="RoomD4" tags="" position="9536,1634">&lt;&lt;if $bathroomentered&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set $bathroomentered to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;span class="header"&gt;&lt;center&gt;Bathroom&lt;/center&gt;&lt;/span&gt;\

You enter the room. The door closes behind you. You are standing on a broad floor grate, which must be covering a drain. You hear water dripping from above. The air smells of cigarette smoke.


&lt;span id="tab"&gt;[[Examine the dripping noise|bathdrip]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Search the room|bathsearch]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the source of the smell|bathsmell]]&lt;/span&gt;
&lt;&lt;if $bathroomasked&gt;&gt;
&lt;span id="tab"&gt;[[Leave the bathroom|RoomD2]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Leave the bathroom|bathask]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

</tw-passagedata><tw-passagedata pid="252" name="goingtobath" tags="" position="9463,1869">&lt;&lt;if $goingtobathnofade&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Wait, Sandra. That's the bathroom – obviously, there are no cameras or microphones there, so I won't be able to see or hear you. There's no need for you to go there and risk some accident.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Thanks for the warning. You're right, I shouldn't go there if I don't have to. (stay in the corridor)|RoomD2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Let's not be overly cautious. It's just a bathroom. I want to search it – maybe I'll find something useful. (enter the bathroom)|RoomD4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Didn't it cross your mind that maybe I just need to use the toilet?|needtoilet]]&lt;/span&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Wait, Sandra. That's the bathroom – obviously, there are no cameras or microphones there, so I won't be able to see or hear you. There's no need for you to go there and risk some accident.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Thanks for the warning. You're right, I shouldn't go there if I don't have to. (stay in the corridor)|RoomD2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Let's not be overly cautious. It's just a bathroom. I want to search it – maybe I'll find something useful. (enter the bathroom)|RoomD4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Didn't it cross your mind that maybe I just need to use the toilet?|needtoilet]]&lt;/span&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $goingtobathnofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="253" name="RoomD5" tags="" position="9566,1955">&lt;&lt;if $d5nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Storage room&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in a room used as a storage area. Large metal containers are standing against the walls. Near one of the containers there is a space suit, complete with a helmet. The containers are covered in a thick layer of dust. The only door in the room leads north.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the containers|checkcontainers]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the space suit|checksuit]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Storage room&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in a room used as a storage area. Large metal containers are standing against the walls. Near one of the containers there is a space suit, complete with a helmet. The containers are covered in a thick layer of dust. The only door in the room leads north.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the containers|checkcontainers]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the space suit|checksuit]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d5nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="254" name="bathdrip" tags="" position="9466,1524">You move forward towards the source of the dripping. A moment later you feel cold water falling on your head and dripping under your collar.

&lt;span class = 'sandra'&gt;SANDRA: A pipe under the ceiling is leaking.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="255" name="bathsearch" tags="" position="9530,1394">It takes you quite some time to examine the entire bathroom. Unfortunately, you don't find anything useful.


&lt;span id="tab"&gt;[[Back|RoomD4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="256" name="bathsmell" tags="" position="9660,1462">The smell isn't coming from one particular place. It's faint, but omnipresent.

&lt;span class = 'sandra'&gt;SANDRA: Jim Mulligan used to smoke in the bathroom... he even lost his lighter here. He was so mad about that…&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="257" name="bathask" tags="" position="9716,1635">&lt;span class = 'odys'&gt;ODYS: Did you find anything useful in the bathroom?&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Nothing at all. You were right, it was just a waste of time.&lt;/span&gt;
&lt;&lt;set $bathroomasked to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomD2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="258" name="needtoilet" tags="" position="9391,1982">&lt;&lt;if $needtoiletnofade&gt;&gt;&lt;span class = 'odys'&gt;ODYS: And do you need to?&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Errr... No.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: In that case, I advise against going there.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Thanks for the warning. You're right, I shouldn't go there if I don't have to. (stay in the corridor)|RoomD2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Let's not be overly cautious. It's just a bathroom. I want to search it – maybe I'll find something useful. (enter the bathroom)|RoomD4]]&lt;/span&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: And do you need to?&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Errr... No.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: In that case, I advise against going there.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Thanks for the warning. You're right, I shouldn't go there if I don't have to. (stay in the corridor)|RoomD2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Let's not be overly cautious. It's just a bathroom. I want to search it – maybe I'll find something useful. (enter the bathroom)|RoomD4]]&lt;/span&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $needtoiletnofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="259" name="RoomD8" tags="" position="8811,1777">&lt;&lt;if $d8nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Central intersection&lt;/center&gt;&lt;/span&gt;\

It's noticeably cold here.

&lt;&lt;if $hatchopen &amp;&amp; $coffeecartlocation == 'D8'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the main intersection, exactly in the middle of section II. It's an octagonal room with massive locks in the northern, eastern, southern and western wall. There's a coffee machine on a cart here. One of the ceiling lamps is smashed. Glass shards litter the floor. Near the eastern lock, just under the ceiling, there is a metal hatch on the wall. It leads to a ventilation duct. There is a ladder on the wall, reaching the hatch. The hatch is open.&lt;/span&gt;
&lt;&lt;elseif $hatchopen&gt;&gt;&lt;span class = 'odys'&gt; ODYS: You are in the main intersection, exactly in the middle of section II. It's an octagonal room with massive locks in the northern, eastern, southern and western wall. One of the ceiling lamps is smashed. Glass shards litter the floor. Near the eastern lock, just under the ceiling, there is a metal hatch on the wall. It leads to a ventilation duct. There is a ladder on the wall, reaching the hatch. The hatch is open.&lt;/span&gt;
&lt;&lt;elseif $coffeecartlocation == 'D8'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the main intersection, exactly in the middle of section II. It's an octagonal room with massive locks in the northern, eastern, southern and western wall. There's a coffee machine on a cart here. One of the ceiling lamps is smashed. Glass shards litter the floor. Near the eastern lock, just under the ceiling, there is a metal hatch on the wall. It leads to a ventilation duct. There is a ladder on the wall, reaching the hatch. The hatch is closed.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the main intersection, exactly in the middle of section II. It's an octagonal room with massive locks in the northern, eastern, southern and western wall. One of the ceiling lamps is smashed. Glass shards litter the floor. Near the eastern lock, just under the ceiling, there is a metal hatch on the wall. It leads to a ventilation duct. There is a ladder on the wall, reaching the hatch. The hatch is closed.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Where do the ventilation ducts lead to?|askvent]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $hatchopen&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Can you open the hatch?|askhatch]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the eastern lock|RoomD3]]&lt;/span&gt;
&lt;&lt;if $southlockopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern lock|RoomD9]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern lock|opensouthlock]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $westlockopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western lock|RoomD19]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western lock|openwestlock]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $northlockthawed&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern lock|RoomD15]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern lock|lockisfrozen]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $hatchopen &amp;&amp; $labdooropen&gt;&gt;
&lt;span id="tab"&gt;[[Get to the lab through ventilation ducts|nochuted8]]&lt;/span&gt;
&lt;&lt;elseif $hatchopen&gt;&gt;
&lt;span id="tab"&gt;[[Get to the lab through ventilation ducts|RoomD7]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D8'&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartd]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $northlockthawed == false &amp;&amp; $coffeecartlocation == 'D8'&gt;&gt;
&lt;span id="tab"&gt;[[Use hot water from the coffee machine to defrost the lock|unfreezestart]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D8' &amp;&amp; $selitem == 'cup'&gt;&gt;
&lt;span id="tab"&gt;[[Make yourself a coffee|makecoffee]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cleaningrobottaken == true &amp;&amp; $hatchopen == false&gt;&gt;
&lt;span id="tab"&gt;[[Bring the cleaning robot near the hatch|openhatch]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;





&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Central intersection&lt;/center&gt;&lt;/span&gt;\

It's noticeably cold here.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;&lt;if $hatchopen &amp;&amp; $coffeecartlocation == 'D8'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the main intersection, exactly in the middle of section II. It's an octagonal room with massive locks in the northern, eastern, southern and western wall. There's a coffee machine on a cart here. One of the ceiling lamps is smashed. Glass shards litter the floor. Near the eastern lock, just under the ceiling, there is a metal hatch on the wall. It leads to a ventilation duct. There is a ladder on the wall, reaching the hatch. The hatch is open.&lt;/span&gt;
&lt;&lt;elseif $hatchopen&gt;&gt;&lt;span class = 'odys'&gt; ODYS: You are in the main intersection, exactly in the middle of section II. It's an octagonal room with massive locks in the northern, eastern, southern and western wall. One of the ceiling lamps is smashed. Glass shards litter the floor. Near the eastern lock, just under the ceiling, there is a metal hatch on the wall. It leads to a ventilation duct. There is a ladder on the wall, reaching the hatch. The hatch is open.&lt;/span&gt;
&lt;&lt;elseif $coffeecartlocation == 'D8'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the main intersection, exactly in the middle of section II. It's an octagonal room with massive locks in the northern, eastern, southern and western wall. There's a coffee machine on a cart here. One of the ceiling lamps is smashed. Glass shards litter the floor. Near the eastern lock, just under the ceiling, there is a metal hatch on the wall. It leads to a ventilation duct. There is a ladder on the wall, reaching the hatch. The hatch is closed.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the main intersection, exactly in the middle of section II. It's an octagonal room with massive locks in the northern, eastern, southern and western wall. One of the ceiling lamps is smashed. Glass shards litter the floor. Near the eastern lock, just under the ceiling, there is a metal hatch on the wall. It leads to a ventilation duct. There is a ladder on the wall, reaching the hatch. The hatch is closed.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Where do the ventilation ducts lead to?|askvent]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $hatchopen&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Can you open the hatch?|askhatch]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the eastern lock|RoomD3]]&lt;/span&gt;
&lt;&lt;if $southlockopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern lock|RoomD9]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern lock|opensouthlock]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $westlockopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western lock|RoomD19]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western lock|openwestlock]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $northlockthawed&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern lock|RoomD15]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern lock|lockisfrozen]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $hatchopen &amp;&amp; $labdooropen&gt;&gt;
&lt;span id="tab"&gt;[[Get to the lab through ventilation ducts|nochuted8]]&lt;/span&gt;
&lt;&lt;elseif $hatchopen&gt;&gt;
&lt;span id="tab"&gt;[[Get to the lab through ventilation ducts|RoomD7]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D8'&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartd]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $northlockthawed == false &amp;&amp; $coffeecartlocation == 'D8'&gt;&gt;
&lt;span id="tab"&gt;[[Use hot water from the coffee machine to defrost the lock|unfreezestart]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D8' &amp;&amp; $selitem == 'cup'&gt;&gt;
&lt;span id="tab"&gt;[[Make yourself a coffee|makecoffee]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cleaningrobottaken == true &amp;&amp; $hatchopen == false&gt;&gt;
&lt;span id="tab"&gt;[[Bring the cleaning robot near the hatch|openhatch]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d8nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="260" name="eastlock" tags="" position="9092,1797">&lt;span class = 'odys'&gt;ODYS: It's emergency-locked.&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Can I use my card?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You don't need to. Thanks to the reset, I can control most doors in this section. Wait a moment – here you go.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;You hear the lock rising slowly.&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $eastlockopen to true&gt;&gt;\


&lt;&lt;timed 5s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go through the lock|RoomD8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD3]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="261" name="RoomD6" tags="" position="9301,1545">&lt;&lt;if $d6nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Boiler room&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in a large room. Pipes, running both vertically and horizontally, take up most of the space here. There is a valve panel on the wall, used for controlling the water flow, ventilation and heating. In the north-eastern corner of the room, next to a pipe stack going through the floor, there is a trapdoor. The only door in the room leads south.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the valves|valvesd6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the trapdoor|hatchd6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Boiler room&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in a large room. Pipes, running both vertically and horizontally, take up most of the space here. There is a valve panel on the wall, used for controlling the water flow, ventilation and heating. In the north-eastern corner of the room, next to a pipe stack going through the floor, there is a trapdoor. The only door in the room leads south.&lt;/span&gt;


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the valves|valvesd6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the trapdoor|hatchd6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d6nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="262" name="RoomD7" tags="" position="9379,2225">&lt;&lt;if $d7nofade&gt;&gt;\
&lt;&lt;if $labentered&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set $labentered to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;span class="header"&gt;&lt;center&gt;Dr. Romani's laboratory&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $labdooropen == true &amp;&amp; $coffeecartlocation == 'D7'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the laboratory. The walls and floor are laid with white tiles. High up on the eastern wall there is the opening of the ventilation duct. Underneath, and somewhat to the left, there is a large automatic cart with a coffee machine on it. Against the western wall there is a long table. On the table there is a computer monitor, a complicated laboratory apparatus and some glassware. There are also some notes on the table. On a chair by the table there is a body of a woman, dressed in a white lab coat, with her head on the computer keyboard. Against the eastern wall there are several lab cabinets, housing glassware and reagents.&lt;/span&gt;
&lt;&lt;elseif $labdooropen&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the laboratory. The walls and floor are laid with white tiles. High up on the eastern wall there is the opening of the ventilation duct. Against the western wall there is a long table. On the table there is a computer monitor, a complicated laboratory apparatus and some glassware. There are also some notes on the table. On a chair by the table there is a body of a woman, dressed in a white lab coat, with her head on the computer keyboard. Against the eastern wall there are several lab cabinets, housing glassware and reagents.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the laboratory. The walls and floor are laid with white tiles. High up on the eastern wall there is the opening of the ventilation duct, through which you came in. Underneath, and somewhat to the left, there is a large automatic cart with a coffee machine on it. Against the western wall there is a long table. On the table there is a computer monitor, a complicated laboratory apparatus and some glassware. There are also some notes on the table. On a chair by the table there is a body of a woman, dressed in a white lab coat, with her head on the computer keyboard. Against the eastern wall there are several lab cabinets, housing glassware and reagents.
The only door in this room leads north. It's locked, and there's a glowing red sign above which says "Experiment in progress".&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $labdooropen&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Examine the door|checklabdoor]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $askaboutromani&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[This woman must be Doctor Romani?|askromani]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D7'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart and the coffee machine|checkcoffeemach]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D7' &amp;&amp; $labdooropen == true&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartd]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D7' &amp;&amp; $selitem == 'cup'&gt;&gt;
&lt;span id="tab"&gt;[[Make yourself a coffee|makecoffee]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the laboratory apparatus|checklabeq]]&lt;/span&gt;
&lt;&lt;if $startexperiment == true &amp; $labdooropen == false&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[About the experiment...|moreaboutexp]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $startexperiment == true &amp; $labdooropen == false&gt;&gt;
&lt;span id="tab"&gt;[[Complete Dr. Romani's experiment|dothescience]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the body on the chair|searchromani]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the cabinets|checkreagents]]&lt;/span&gt;
&lt;&lt;if $labdooropen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomD3]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $labdooropen&gt;&gt;
&lt;span id="tab"&gt;[[Get to the central intersection through ventilation ducts|chuteno]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Get to the central intersection through ventilation ducts|RoomD8]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;





&lt;&lt;else&gt;&gt;&lt;&lt;if $labentered&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;&lt;set $labentered to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;span class="header"&gt;&lt;center&gt;Dr. Romani's laboratory&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $labdooropen == true &amp;&amp; $coffeecartlocation == 'D7'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the laboratory. The walls and floor are laid with white tiles. High up on the eastern wall there is the opening of the ventilation duct. Underneath, and somewhat to the left, there is a large automatic cart with a coffee machine on it. Against the western wall there is a long table. On the table there is a computer monitor, a complicated laboratory apparatus and some glassware. There are also some notes on the table. On a chair by the table there is a body of a woman, dressed in a white lab coat, with her head on the computer keyboard. Against the eastern wall there are several lab cabinets, housing glassware and reagents.&lt;/span&gt;
&lt;&lt;elseif $labdooropen&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the laboratory. The walls and floor are laid with white tiles. High up on the eastern wall there is the opening of the ventilation duct. Against the western wall there is a long table. On the table there is a computer monitor, a complicated laboratory apparatus and some glassware. There are also some notes on the table. On a chair by the table there is a body of a woman, dressed in a white lab coat, with her head on the computer keyboard. Against the eastern wall there are several lab cabinets, housing glassware and reagents.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the laboratory. The walls and floor are laid with white tiles. High up on the eastern wall there is the opening of the ventilation duct, through which you came in. Underneath, and somewhat to the left, there is a large automatic cart with a coffee machine on it. Against the western wall there is a long table. On the table there is a computer monitor, a complicated laboratory apparatus and some glassware. There are also some notes on the table. On a chair by the table there is a body of a woman, dressed in a white lab coat, with her head on the computer keyboard. Against the eastern wall there are several lab cabinets, housing glassware and reagents.
The only door in this room leads north. It's locked, and there's a glowing red sign above which says "Experiment in progress".&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;timed 3s t8n&gt;&gt;&lt;&lt;if $labdooropen&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Examine the door|checklabdoor]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $askaboutromani&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[This woman must be Doctor Romani?|askromani]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D7'&gt;&gt;
&lt;span id="tab"&gt;[[Examine the cart and the coffee machine|checkcoffeemach]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D7' &amp;&amp; $labdooropen == true&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartd]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D7' &amp;&amp; $selitem == 'cup'&gt;&gt;
&lt;span id="tab"&gt;[[Make yourself a coffee|makecoffee]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the laboratory apparatus|checklabeq]]&lt;/span&gt;
&lt;&lt;if $startexperiment == true &amp; $labdooropen == false&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[About the experiment...|moreaboutexp]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $startexperiment == true &amp; $labdooropen == false&gt;&gt;
&lt;span id="tab"&gt;[[Complete Dr. Romani's experiment|dothescience]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the body on the chair|searchromani]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the cabinets|checkreagents]]&lt;/span&gt;
&lt;&lt;if $labdooropen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomD3]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $labdooropen&gt;&gt;
&lt;span id="tab"&gt;[[Get to the central intersection through ventilation ducts|chuteno]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Get to the central intersection through ventilation ducts|RoomD8]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d7nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="263" name="labclosed" tags="" position="9281,1872">The door is locked.


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Can you open it, Odys?|canyouopenlab]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="264" name="canyouopenlab" tags="" position="9274,1982">&lt;span class = 'odys'&gt;ODYS: I'm trying, but the system denies me access. This is the door to the laboratory. There's a glowing red sign above which says "Experiment in progress".&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Yes, I remember – there was this security lock thing. When Doctor Romani was using that huge machine, no one could enter or leave the lab.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: If you want to get there, you must find another way. Maybe you'll be able to get in through the ventilation ducts – the camera in the laboratory shows a duct opening under the ceiling.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="265" name="checkcontainers" tags="" position="9683,1826">&lt;span class = 'odys'&gt;ODYS: These are massive, metal containers, used to transport provisions to the facility. Containers in this room contain supplies for the staff, like food and clothes.&lt;/span&gt; 

&lt;span class = 'sandra'&gt;SANDRA: Can I open them somehow?&lt;/span&gt; 

&lt;span class = 'odys'&gt;ODYS: The covers are too heavy to raise by hand. Normally, specialised robots perform the task.&lt;/span&gt; 


&lt;span id="tab"&gt;[[Back|RoomD5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="266" name="checksuit" tags="" position="9699,1957">&lt;&lt;if $tube&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's a hard suit designed to cover the entire body. It's used when going outside the station.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD5]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's a hard suit designed to cover the entire body. It's used when going outside the station. It hasn't been used in a while, but someone's been doing maintenance on it recently and replaced one of the elastic tubes. The old tube is still lying on the floor, near the suit.&lt;/span&gt;


&lt;span id="tab"&gt;[[Take the elastic tube|taketube]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD5]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="267" name="taketube" tags="" position="9699,2063">You pick up a piece of tube. It feels brittle, but isn't torn.

Item received: &lt;span class = 'items'&gt;Elastic tube&lt;/span&gt;
&lt;&lt;set $tube to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="268" name="tube" tags="noreturn" position="562,346">&lt;span class="items"&gt;A short elastic tube, which used to be part of a space suit.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="269" name="valvesd6" tags="" position="9161,1443">&lt;span class = 'odys'&gt;ODYS: All valves are in their normal, open positions. According to the message on a display next to the panel, the heating is malfunctioning and is working in backup mode.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: I'd better not touch that.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD6]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="270" name="hatchd6" tags="" position="9359,1413">&lt;span class = 'odys'&gt;ODYS: It's a service trapdoor, leading to the northern tunnels. There is no reason to go down there, and it could even be dangerous – explosives are stored in one of the rooms.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD6]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="271" name="askvent" tags="" position="8704,1795">&lt;span class = 'odys'&gt;ODYS: They run through most of the facility. The northern duct is blocked, but you could get to Doctor Romani's laboratory through the southern duct.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="272" name="askhatch" tags="" position="8582,1912">&lt;&lt;if $askhatchnofade&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I don't see it in the system... but I have an idea how to open it.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Let me guess – this won't be easy.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: No, it's nothing complicated, in fact. Duct covers have integrated receivers which open them automatically when time for cleaning the duct comes. Cleaning is done by specialised robots.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: So if I find one of these robots and bring it here, the cover will open. Isn't there a more direct method? Like a handle on the cover?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: No, unfortunately not. Normally I could open the cover remotely. But it's impossible now due to a malfunction.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I don't see it in the system... but I have an idea how to open it.&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Let me guess – this won't be easy.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: No, it's nothing complicated, in fact. Duct covers have integrated receivers which open them automatically when time for cleaning the duct comes. Cleaning is done by specialised robots.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: So if I find one of these robots and bring it here, the cover will open. Isn't there a more direct method? Like a handle on the cover?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: No, unfortunately not. Normally I could open the cover remotely. But it's impossible now due to a malfunction.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[Back|RoomD8]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;set $askhatchnofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="273" name="RoomD9" tags="" position="8693,2335">&lt;&lt;if $d9nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II southern corridor, northern part&lt;/center&gt;&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section II. This part of the corridor didn't suffer serious damage. Only the ceiling lamps are shattered. The corridor leads south to a spot where several floor panels have collapsed into a tunnel below. To the north there is a lock. There is one door on the eastern side of the corridor and another one on the western side.&lt;/span&gt;


&lt;span id="tab"&gt;[[Go south|RoomD10]]&lt;/span&gt;
&lt;&lt;if $sandrasroomopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|RoomD12]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|opensandrasroom]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $santosroomopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|RoomD13]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|opensantosroom]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the lock|RoomD8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II southern corridor, northern part&lt;/center&gt;&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section II. This part of the corridor didn't suffer serious damage. Only the ceiling lamps are shattered. The corridor leads south to a spot where several floor panels have collapsed into a tunnel below. To the north there is a lock. There is one door on the eastern side of the corridor and another one on the western side.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go south|RoomD10]]&lt;/span&gt;
&lt;&lt;if $sandrasroomopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|RoomD12]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|opensandrasroom]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $santosroomopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|RoomD13]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|opensantosroom]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the lock|RoomD8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d9nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="274" name="opensouthlock" tags="" position="8854,1902">&lt;span class = 'odys'&gt;ODYS: Wait – I'll open the lock for you. Done. A word of caution before you head south. Structural damage is extensive there. There is a huge gap in the floor in one place, some ceiling panels barely hold in place and several rooms have practically collapsed. I will warn you about every danger, but be cautious all the time – with no exceptions.&lt;/span&gt;
&lt;&lt;set $southlockopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the lock|RoomD9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="275" name="RoomD19" tags="" position="8090,1756">&lt;&lt;if $d19nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II western corridor, eastern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the western corridor of section II. The corridor goes west. There is a door to the north and another one to the south. To the east there is a lock.&lt;/span&gt;


&lt;span id="tab"&gt;[[Go west|RoomD20]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD21]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD22]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the lock|RoomD8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;


&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II western corridor, eastern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the western corridor of section II. The corridor goes west. There is a door to the north and another one to the south. To the east there is a lock.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go west|RoomD20]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD21]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD22]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the lock|RoomD8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d19nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="276" name="openwestlock" tags="" position="8560,1783">&lt;span class = 'odys'&gt;ODYS: On the other side of this airlock there are the quarters of some crew members and common rooms – the canteen and the gym. I'll open the lock for you.&lt;/span&gt;
&lt;&lt;set $westlockopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the lock|RoomD19]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="277" name="RoomD15" tags="" position="8824,1335">&lt;&lt;if $d15nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II northern corridor, southern part&lt;/center&gt;&lt;/span&gt;\

It's so cold here you start to shiver.

&lt;span class = 'odys'&gt;ODYS: You are in the northern corridor of section II. The floor here is covered in hoar frost. The only door in this part of the corridor is in the eastern wall, but it's completely iced over. The corridor goes north. To the south there is a lock.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the iced door|frozendoor]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomD16]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the lock|RoomD8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II northern corridor, southern part&lt;/center&gt;&lt;/span&gt;\

It's so cold here you start to shiver.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the northern corridor of section II. The floor here is covered in hoar frost. The only door in this part of the corridor is in the eastern wall, but it's completely iced over. The corridor goes north. To the south there is a lock.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the iced door|frozendoor]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomD16]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the lock|RoomD8]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d15nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="278" name="lockisfrozen" tags="" position="8702,1543">You touch the lock and immediately take back your hand – the metal is so cold it burns.

&lt;span class = 'odys'&gt;ODYS: The lock is iced over. There's a layer of ice on the other side, which makes raising the lock impossible. We need to find a way of melting the ice.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Can't you just turn up the heating?|askheating]]&lt;/span&gt;&lt;/span&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Why is the lock iced over?|asklockfrozen]]&lt;/span&gt;&lt;/span&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Do you know how to defrost the lock?|howthawlock]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="279" name="askheating" tags="" position="8579,1422">&lt;span class = 'odys'&gt;ODYS: It's set on full power – which, in its current state, is really low. It will melt the ice eventually, but it may take many hours. We can't afford to wait this long.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|lockisfrozen]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="280" name="asklockfrozen" tags="" position="8562,1532">&lt;span class = 'odys'&gt;ODYS: Just behind the lock there's a room used to store refrigerant tanks. The tanks must have unsealed and escaping refrigerant caused ice buildup.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|lockisfrozen]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="281" name="howthawlock" tags="" position="8664,1653">&lt;span class = 'odys'&gt;ODYS: The best way would be to find a powerful heating device, but that's impossible, I'm afraid. Enough boiling water should also melt the ice.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|lockisfrozen]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="282" name="programcartd" tags="noreturn" position="10426,1886">&lt;span class = 'odys'&gt;ODYS: You can send the cart to a particular spot in this section.&lt;/span&gt;


&lt;&lt;if $coffeecartlocation == 'D8'&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the central intersection|$return][$coffeecartlocation to 'D8']]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D22'&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the canteen|$return][$coffeecartlocation to 'D22']]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D7'&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the laboratory|$return][$coffeecartlocation to 'D7']]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="283" name="unfreezestart" tags="" position="8452,1643">&lt;&lt;if $unfreezeagain&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: This could actually work.&lt;/span&gt;


&lt;&lt;set $unfreezeagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;span id="tab"&gt;[[Turn on the coffee machine|coffeeon]]&lt;/span&gt;
&lt;&lt;if $selitem == 'cup'&gt;&gt;
&lt;span id="tab"&gt;[[Place the cup in the machine|putcupin]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cupincart == true &amp;&amp; $holeincup == false &amp;&amp; $selitem == 'knife'&gt;&gt;
&lt;span id="tab"&gt;[[Cut a hole in the cup|cuthole]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $holeincup == true &amp;&amp; $selitem == 'tube'&gt;&gt;
&lt;span id="tab"&gt;[[Put tube through the hole in the cup|mounttube]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="284" name="coffeeon" tags="" position="8322,1644">&lt;&lt;if $cupincart == true &amp;&amp; $holeincup == true &amp;&amp; $tubeinhole == true&gt;&gt;
Boiling water pours from the tube and on the bottom edge of the lock.

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I hope this works.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;You wait several minutes, during which a pool of steaming water grows on the floor.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The ice freezing the lock in place has melted! Now I can open the way.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 10s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Coffee machine. A most brilliant invention.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 12s t8n&gt;&gt;Wading in the warm water, you switch off the machine.&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $northlockthawed to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 14s t8n&gt;&gt;[[Back|RoomD8]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;elseif $cupincart == true &amp;&amp; $holeincup == true&gt;&gt;
Boiling water pours into the cup and out of the hole.

&lt;span class = 'sandra'&gt;SANDRA: That's something, but I still have to direct the stream onto the lock. Otherwise I'll just waste water.&lt;/span&gt;

You turn off the coffee machine. 


&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;
&lt;&lt;elseif $cupincart == true&gt;&gt;
You turn on the machine. The cup fills with boiling water.

&lt;span class = 'sandra'&gt;SANDRA: The machine fills the cup and switches off. I won't defrost the lock by pouring water cup by cup. I need to find a way of cheating the fill level sensor.&lt;/span&gt;

You empty the cup.


&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
You turn on the machine, but nothing happens.

&lt;span class = 'sandra'&gt;SANDRA: I forgot – it's equipped with a sensor. Water won't run unless there's a cup in the machine.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="285" name="cup" tags="noreturn" position="1497,45">&lt;span class="items"&gt;A standard cup for hot and cold drinks.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="286" name="knife" tags="noreturn" position="1534,161">&lt;span class="items"&gt;A small, but really sharp knife.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="287" name="putcupin" tags="" position="8455,1540">You place the cup in the machine.

Item lost: &lt;span class = 'items'&gt;Plastic cup&lt;/span&gt;
&lt;&lt;set $cup to false&gt;&gt;&lt;&lt;set $cupincart to true&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|unfreezestart]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="288" name="cuthole" tags="" position="8560,1657">You cut a round hole in the side of the cup.
&lt;&lt;set $holeincup to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|unfreezestart]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="289" name="mounttube" tags="" position="8477,1415">You push one end of the tube into the hole in the cup.

&lt;span class = 'sandra'&gt;SANDRA: Now I just need to point the other end at the lock... like this.&lt;/span&gt;

Item lost: &lt;span class = 'items'&gt;Elastic tube&lt;/span&gt;
&lt;&lt;set $tubeinhole to true&gt;&gt;&lt;&lt;set $tube to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|unfreezestart]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="290" name="makecoffee" tags="noreturn" position="10420,1711">&lt;&lt;if $coffeedrunk == 0&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I could really use a cup of coffee.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: The start button is on the ri– I see you don't need any help.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: No, that's one thing I remember. I hope this cup is more or less clean.&lt;/span&gt;

You drink a cup of hot, strong coffee. It makes you feel better.
&lt;&lt;set $coffeedrunk to 1&gt;&gt;\


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;
&lt;&lt;elseif $coffeedrunk == 1&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I think I need another one.&lt;/span&gt;

Another cup of coffee makes you feel energised.
&lt;&lt;set $coffeedrunk to 2&gt;&gt;\


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;
&lt;&lt;elseif $coffeedrunk == 2&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: One more won't hurt me.&lt;/span&gt;

The third cup makes your head clearer.

&lt;span class = 'odys'&gt;ODYS: I'm not sure if you should drink so much coffee in your current state...&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Take it easy. That was the last one. And I really needed that.&lt;/span&gt;
&lt;&lt;set $coffeedrunk to 3&gt;&gt;&lt;&lt;set $achievementcoffee to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Tempting, but I shouldn't overdo it.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="291" name="openhatch" tags="" position="8693,1947">You climb the ladder, with the robot in your backpack. You hear the duct cover open.

&lt;span class = 'odys'&gt;ODYS: It worked! You should be able to get into the duct – the opening is right above the ladder. The duct is low, you'll have to move on your hands and knees. Go right from here – you'll reach the exit in the laboratory.&lt;/span&gt;
&lt;&lt;set $hatchopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Get to the laboratory through the ventilation duct|RoomD7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="292" name="RoomD10" tags="" position="8692,2701">&lt;&lt;if $d10nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II southern corridor, the breach&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $d10again&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section II. You're close to a gaping breach in the floor.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section II. You're close to a gaping breach in the floor. You can walk around it if you stay very close to the eastern wall. Be careful – the breach itself is not that deep, but there are electrical cables running down there, and falling floor panels have damaged the insulation on some of them. If you fall into the breach, electrocution will kill you.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Go north|RoomD9]]&lt;/span&gt;
&lt;&lt;if $d10again&gt;&gt;
&lt;span id="tab"&gt;[[Go south|RoomD11]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Walk around the breach to the south|crossd10]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $d10again&gt;&gt;
&lt;span id="tab"&gt;[[Examine the door on the eastern side of the corridor|2checkambdoor]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II southern corridor, the breach&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $d10again&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section II. You're close to a gaping breach in the floor.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section II. You're close to a gaping breach in the floor. You can walk around it if you stay very close to the eastern wall. Be careful – the breach itself is not that deep, but there are electrical cables running down there, and falling floor panels have damaged the insulation on some of them. If you fall into the breach, electrocution will kill you.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go north|RoomD9]]&lt;/span&gt;
&lt;&lt;if $d10again&gt;&gt;
&lt;span id="tab"&gt;[[Go south|RoomD11]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Walk around the breach to the south|crossd10]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $d10again&gt;&gt;
&lt;span id="tab"&gt;[[Examine the door on the eastern side of the corridor|2checkambdoor]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d10nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;



</tw-passagedata><tw-passagedata pid="293" name="RoomD12" tags="" position="8523,2336">&lt;&lt;if $d12nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Sandra's room&lt;/center&gt;&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: You are in your own room. There's a bed and a desk here. There are many loose, handwritten notes on the desk, and a computer, which is switched on. The door is in the eastern wall of the room.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the notes on the desk|ownnnotes]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the computer|sandrasPC]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Sandra's room&lt;/center&gt;&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: You are in your own room. There's a bed and a desk here. There are many loose, handwritten notes on the desk, and a computer, which is switched on. The door is in the eastern wall of the room.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the notes on the desk|ownnnotes]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the computer|sandrasPC]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]
&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d12nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="294" name="opensandrasroom" tags="" position="8615,2470">&lt;span class = 'odys'&gt;ODYS: This door leads to your room. I'll open it for you.&lt;/span&gt;
&lt;&lt;set $sandrasroomopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the door|RoomD12]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD9]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="295" name="RoomD13" tags="" position="9025,2345">&lt;&lt;if $d13nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Dr. Santos' Room&lt;/center&gt;&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: You are in Doctor Maria Santos' room. In addition to a bed and a desk with a computer on it, there is a large aquarium here, in the corner of the room. The door is in the western wall of the room.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the desk|santosdesk]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the aquarium|checkfishtank]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomD9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Dr. Santos' Room&lt;/center&gt;&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: You are in Doctor Maria Santos' room. In addition to a bed and a desk with a computer on it, there is a large aquarium here, in the corner of the room. The door is in the western wall of the room.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the desk|santosdesk]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the aquarium|checkfishtank]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomD9]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d13nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="296" name="opensantosroom" tags="" position="8811,2446">&lt;span class = 'odys'&gt;ODYS: This door leads to Doctor Maria Santos' room. I'll open it for you.&lt;/span&gt; 
&lt;&lt;set $santosroomopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the door|RoomD13]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD9]]&lt;/span&gt;



</tw-passagedata><tw-passagedata pid="297" name="RoomD11" tags="" position="8652,3151">&lt;&lt;if $d11nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II southern corridor, southern part&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $cleaningrobottaken&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section II. You can't go further south – the ceiling is collapsed. To the north there is a gaping breach in the floor.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section II. You can't go further south – the ceiling is collapsed. In the pile of rubble there is a small robot, partially buried under one of the collapsed panels. To the north there is a gaping breach in the floor.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What's further south?|asksouth]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $cleaningrobottaken&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Examine the robot|checkcleaningrobot]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cleaningrobottaken&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Pick up the robot|takerobot]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go north|RoomD10]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II southern corridor, southern part&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $cleaningrobottaken&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section II. You can't go further south – the ceiling is collapsed. To the north there is a gaping breach in the floor.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section II. You can't go further south – the ceiling is collapsed. In the pile of rubble there is a small robot, partially buried under one of the collapsed panels. To the north there is a gaping breach in the floor.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What's further south?|asksouth]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $cleaningrobottaken&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Examine the robot|checkcleaningrobot]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $cleaningrobottaken&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Pick up the robot|takerobot]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go north|RoomD10]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d11nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="298" name="crossd10" tags="" position="8540,2749">You move along the breach – slowly, with your back against the wall. Suddenly your hand touches a closed door. Next to the door there is a metal plaque and a keycard panel. You can heat a rhythmic, beeping sound coming through the door.


&lt;span id="tab"&gt;[[Continue south|d10crossed]]&lt;/span&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What door is this?|askambdoor]]&lt;/span&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="299" name="d10crossed" tags="" position="8547,2899">You reach the southern end of the breach.
&lt;&lt;set $d10again to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomD11]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="300" name="checkambdoor" tags="" position="8368,2750">&lt;span class = 'sandra'&gt;SANDRA: Can you open this door, Odys?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: No. It's emergency locked – some machines in the room started malfunctioning badly after the system failure, which makes them even more dangerous. It would be foolish, and deadly dangerous, to try to get into that room.&lt;/span&gt;

&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;
&lt;span id="tab"&gt;[[Use your keycard|tryopenamb]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'mulliganscard'&gt;&gt;
&lt;span id="tab"&gt;[[Use Mulligan's keycard|tryopenamb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Is there any other door here?|anotherdoor]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Continue south|d10crossed]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="301" name="askambdoor" tags="" position="8346,2856">&lt;span class = 'odys'&gt;ODYS: It leads to a robot maintenance room. There's machinery in there which could be really dangerous for a blind person. A sign by the door warns about the danger and restricts access to authorised persons only.&lt;/span&gt;
&lt;&lt;set $askambdoor to true&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the door to the robot maintenance room|checkambdoor]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Continue south|d10crossed]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="302" name="tryopenamb" tags="" position="8353,2614">You put the card to the panel, but nothing happens.

&lt;span class = 'odys'&gt;ODYS: You can't open this door with a keycard. And, really, you shouldn't try. That place is dangerous.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkambdoor]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="303" name="anotherdoor" tags="" position="8187,2756">&lt;span class = 'odys'&gt;ODYS: Yes, in the western wall. It leads to Doctor Romani's quarters. But it opens straight to the breach now – there's no way of getting to that room. I suppose it's devastated anyway – the camera, at least, was destroyed.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkambdoor]]&lt;/span&gt;


</tw-passagedata><tw-passagedata pid="304" name="2checkambdoor" tags="" position="8763,2874">&lt;&lt;if $checkambdooragain&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I don't understand your fascination with that door, Sandra. You have no reason to enter the robot maintenance room. Luckily for us, because that would be tremendously dangerous.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This door leads to a robot maintenance room. There's machinery in there which could be really dangerous for a blind person. A sign by the door warns about the danger and restricts access to authorised persons only.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Can you open this door, Odys?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: No. It's emergency locked – some machines in the room started malfunctioning badly after the system failure, which makes them even more dangerous. It would be foolish, and deadly dangerous, to try to get into that room.&lt;/span&gt;
&lt;&lt;set $checkambdooragain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;
&lt;span id="tab"&gt;[[Use your keycard|2tryopenamb]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'mulliganscard'&gt;&gt;
&lt;span id="tab"&gt;[[Use Mulligan's keycard|2tryopenamb]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'santoscard'&gt;&gt;
&lt;span id="tab"&gt;[[Use Dr. Santos' keycard|openamb]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'sashadeskcard'&gt;&gt;
&lt;span id="tab"&gt;[[Use keycard found on Sasha's desk|openamb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Is there any other door here?|2anotherdoor]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD10]]&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="305" name="2tryopenamb" tags="" position="8927,2756">You put the keycard to the panel, but nothing happens.

&lt;span class = 'odys'&gt;ODYS: You can't open this door with a keycard. And, really, you shouldn't try. That place is dangerous.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|2checkambdoor]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="306" name="2anotherdoor" tags="" position="8932,2879">&lt;span class = 'odys'&gt;ODYS: Yes, in the western wall. It leads to Doctor Romani's quarters. But it opens straight to the breach now – there's no way of getting to that room. I suppose it's devastated anyway – the camera, at least, was destroyed.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|2checkambdoor]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="307" name="openamb" tags="" position="8905,2628">You put the keycard to the panel. You hear a beep and the door opens.

&lt;&lt;if $ambopenagain&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Sandra, listen to me, please. This is not the time for jokes – and dangerous ones.&lt;/span&gt;


&lt;span id="tab"&gt;[[Close the door and move away|RoomD10]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the door|RoomD14]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Sandra, wait. Just hear me out. Zinov somehow hacked this card to work, but in doing so, he violated all safety requirements. You should not be able to unlock this door. The room behind it is full of malfunctioning maintenance equipment. Going there can kill you.&lt;/span&gt;
&lt;&lt;set $ambopenagain to true&gt;&gt;\


&lt;span id="tab"&gt;[[Close the door and move away|RoomD10]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the door|RoomD14]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="308" name="RoomD14" tags="" position="9226,2645">&lt;&lt;if $d14nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Robot maintenance centre&lt;/center&gt;&lt;/span&gt;

You hear buzzing and beeping of machinery, with one, pulsating sound louder than the rest. The air smells of ozone.

&lt;span class = 'odys'&gt;ODYS: You are in the robot maintenance centre. To the right from the door there is a cabin – it's an automatic lubricating station for humanoid service robots. Further in the room there are several charging stations. Due to the recent system failure their outputs are live and pose a lethal threat of electrocution. 

You should leave this room immediately, Sandra. I understand you are curious, but staying here is too risky.&lt;/span&gt;


&lt;span id="tab"&gt;[[Leave the room|gladyouleft]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the charging stations|goinside]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the lubricating station|checkmedstation]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Robot maintenance centre&lt;/center&gt;&lt;/span&gt;

You hear buzzing and beeping of machinery, with one, pulsating sound louder than the rest. The air smells of ozone.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the robot maintenance centre. To the right from the door there is a cabin – it's an automatic lubricating station for humanoid service robots. Further in the room there are several charging stations. Due to the recent system failure their outputs are live and pose a lethal threat of electrocution. 

You should leave this room immediately, Sandra. I understand you are curious, but staying here is too risky.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 4s t8n&gt;&gt;&lt;span id="tab"&gt;[[Leave the room|gladyouleft]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the charging stations|goinside]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the lubricating station|checkmedstation]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d14nofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="309" name="sashadeskcard" tags="noreturn" position="1514,281">&lt;span class="items"&gt;Keycard found on Sasha's desk. Raised letters on the card read "Maria Santos".&lt;/span&gt;
&lt;&lt;set $sashadeskcard to false&gt;&gt;&lt;&lt;set $santoscard to true&gt;&gt;\
&lt;&lt;if $selitem == 'sashadeskcard'&gt;&gt;&lt;&lt;set $selitem to 'santoscard'&gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="310" name="santoscard" tags="noreturn" position="1559,408">&lt;span class="items"&gt;A keycard which belonged to Dr. Maria Santos.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="311" name="asksouth" tags="" position="8425,3098">&lt;span class = 'odys'&gt;ODYS: Part of the crew quarters and the airlock to section III.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Can I get through the cave-in somehow?|askgosouth]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="312" name="askgosouth" tags="" position="8404,3255">&lt;span class = 'odys'&gt;ODYS: Such attempts would be unnecessary, and dangerous.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="313" name="checkcleaningrobot" tags="" position="8802,3144">&lt;&lt;if $cleaningrobotactive&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's a small robot, used for cleaning the rooms. A ceiling panel fell on it and crushed its back legs. It cannot move on its own. It helplessly scratches the floor with its front legs, trying to reach the stain.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's a small robot, used for cleaning the rooms. A ceiling panel fell on it and crushed its back legs. It cannot move on its own. But it's still functional, although in standby mode.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[I remember these robots – they sometimes crawled on walls and ceilings.|robotwalk]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $cleaningrobotactive&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Do you know how to activate it?|askcleaningrobot]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $selitem == 'bourbon' &amp;&amp; $cleaningrobotactive == false&gt;&gt;
&lt;span id="tab"&gt;[[Spill some bourbon near the robot|stainfloor]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD11]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="314" name="robotwalk" tags="" position="8965,3096">&lt;span class = 'odys'&gt;ODYS: Yes, they do that. They clean ventilation ducts as well. Each robot has a signal emitter, so the vents open automatically for cleaning. You can use that to your advantage and open the vent in the central intersection.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkcleaningrobot]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="315" name="askcleaningrobot" tags="" position="8959,3226">&lt;span class = 'odys'&gt;ODYS: It turns on automatically if it detects that its surroundings need cleaning.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkcleaningrobot]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="316" name="stainfloor" tags="" position="8959,3341">You empty the bottle on the floor. You hear quiet squeaking.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The cleaning robot has turned on. It's trying to get to the stain.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;Item lost: &lt;span class = 'items'&gt;Bottle of bourbon&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Empty bottle&lt;/span&gt;
&lt;&lt;set $cleaningrobotactive to true&gt;&gt;&lt;&lt;set $bourbon to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;&lt;&lt;set $emptybottle to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkcleaningrobot]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
</tw-passagedata><tw-passagedata pid="317" name="emptybottle" tags="noreturn" position="1407,496">&lt;span class="items"&gt;An empty bourbon bottle.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="318" name="backpack" tags="noreturn" position="1726,258">&lt;span class="items"&gt;A textile backpack, found in the gym. Worn, but durable.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="319" name="takerobot" tags="" position="8652,3299">&lt;&lt;if $cleaningrobotactive == true &amp;&amp; $selitem == 'backpack'&gt;&gt;You manage to push the robot into the backpack. The robot squeaks quietly, but offers no resistance. You put on the backpack.
&lt;&lt;set $cleaningrobottaken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD11]]&lt;/span&gt;
&lt;&lt;elseif $cleaningrobotactive&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I can't carry it around in my arms. I need something to put it into.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD11]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: First I want to check if it turns on at all.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD11]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="320" name="ownnnotes" tags="" position="8526,2616">&lt;&lt;if $comm&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I used to note down important work stuff. There was too much to remember.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: Your notes are really thorough. I see many concerning chemistry and geology. My database shows this is your first job with OSMiC. I'm sure you had to learn a lot, both about your particular duties and general functioning of the facility.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Well, there wasn't that much. I'm only an assistant. I mostly carried out Dr. Romani's orders. Simple, necessary tasks.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD12]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I used to note down important work stuff. There was too much to remember.&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Your notes are really thorough. I see many concerning chemistry and geology. My database shows this is your first job with OSMiC. I'm sure you had to learn a lot, both about your particular duties and general functioning of the facility.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Well, there wasn't that much. I'm only an assistant. I mostly carried out Dr. Romani's orders. Simple, necessary tasks.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;Absent-mindedly rummaging through the notes, you suddenly touch some small object. You recognise a portable comm device.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I was told to take it with me whenever I went to the exterior module. As usual, I forgot.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;Item received: &lt;span class = 'items'&gt;Portable comm device&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD12]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $comm to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="321" name="comm" tags="noreturn" position="1742,393">&lt;span class="items"&gt;A device which enables communication among the station crew. It has a recording function.&lt;/span&gt;

There is a message recorded on the comm device.


&lt;span id="tab"&gt;[[Play the message|messagelisten]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="322" name="messagelisten" tags="noreturn" position="1742,543">&lt;span class = 'speech'&gt;MARIA SANTOS: ...Sandra? Doctor Santos here. I'm going through my files and I've just noticed it's time for your periodic examination. Could you drop by the medical room on your way back from the module? I'll most likely have picked up my keycard from Sasha by then. If I'm not in the medical room, knock to my quarters' door...&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|comm]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="323" name="sandrasPC" tags="" position="8381,2475">&lt;span class = 'odys'&gt;ODYS: A scientific article is displayed on the screen. It goes into detail about rocks and minerals which build asteroids like this one.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD12]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="324" name="santosdesk" tags="" position="8925,2455">&lt;span class = 'odys'&gt;ODYS: The computer is turned off. There's nothing else on the desk.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD13]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="325" name="checkfishtank" tags="" position="8887,2258">&lt;span class = 'odys'&gt;ODYS: Small, blue jellyfish are floating in the cloudy water.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Doctor Santos mentioned some studies she was conducting on marine life. She examined how the conditions on a space station influence these creatures, or something similar. I think she even received a grant.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Are the jellyfish alive?|jellieslive]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Do you know what exactly Doctor Santos studied?|santosresearch]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD13]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="326" name="jellieslive" tags="" position="8824,2140">&lt;span class = 'odys'&gt;ODYS: They are. Vulcanium doesn't dissolve in water, so it didn't kill them.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkfishtank]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="327" name="santosresearch" tags="" position="9010,2151">&lt;span class = 'odys'&gt;ODYS: Yes, I have access to this information. She studied the effect of artificial gravity on bioluminescent jellyfish, which are a source of medicinally valuable chemicals.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkfishtank]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="328" name="RoomD20" tags="" position="7837,1745">&lt;span class="header"&gt;&lt;center&gt;Section II western corridor, western part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the western corridor of section II. The corridor goes east. There are doors to the north, to the south and to the west.&lt;/span&gt;
&lt;&lt;if $nothinghere&gt;&gt;
&lt;&lt;if $marshroomopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|RoomD25]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|openmarshroom]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $sasharoomopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomD24]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|opensasharoom]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $mulliganroomopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|RoomD23]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|openmulliganroom]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go east|RoomD19]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There's nothing of interest for us in this part of the station. The doors lead to the private rooms of captain Robert Marsh, Sasha Zinov and Jim Mulligan. I advise you turn back.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[You're right, I've no reason to stay here.|RoomD19]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I want to check these rooms. Maybe I'll find something useful.|wanttocheck]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Stop telling me what to do. I thought you were supposed to help me, not order me around.|angrycheck]]&lt;/span&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="329" name="RoomD21" tags="" position="8102,1590">&lt;&lt;if $d21nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Gym&lt;/center&gt;&lt;/span&gt;\

This room smells of old sweat.

&lt;&lt;if $backpack&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the gym. The room is dark and quiet. There is various training equipment here. The only door leads south.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the gym. The room is dark and quiet. There is various training equipment here. A bundle of some sort is lying under a bench in the corner. The only door leads south.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the training equipment|traineq]]&lt;/span&gt;
&lt;&lt;if $backpack&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take the item from under the bench|takebackpack]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the southern door|RoomD19]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;


&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Gym&lt;/center&gt;&lt;/span&gt;\

This room smells of old sweat.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;&lt;if $backpack&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the gym. The room is dark and quiet. There is various training equipment here. The only door leads south.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the gym. The room is dark and quiet. There is various training equipment here. A bundle of some sort is lying under a bench in the corner. The only door leads south.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the training equipment|traineq]]&lt;/span&gt;
&lt;&lt;if $backpack&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take the item from under the bench|takebackpack]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the southern door|RoomD19]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d21nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

</tw-passagedata><tw-passagedata pid="330" name="RoomD22" tags="" position="8090,1930">&lt;&lt;if $d22nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Canteen&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $cuptaken == true &amp;&amp; $coffeecartlocation == 'D22'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the canteen. In the centre of the room there is a long table, and on the table there is a plastic plate with the remains of a meal. Near the edge of the table there is a small music player. Against the southern wall there is a row of machines: a meal dispenser, a tableware dispenser and a machine for returning used tableware. There is a coffee machine on a cart next to them. The only door leads north.&lt;/span&gt;
&lt;&lt;elseif $cuptaken == true&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the canteen. In the centre of the room there is a long table, and on the table there is a plastic plate with the remains of a meal. Near the edge of the table there is a small music player. Against the southern wall there is a row of machines: a meal dispenser, a tableware dispenser and a machine for returning used tableware. The only door leads north.&lt;/span&gt;
&lt;&lt;elseif $coffeecartlocation == 'D22'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the canteen. In the centre of the room there is a long table, and on the table there is a plastic plate with the remains of a meal, and a plastic cup. Near the edge of the table there is a small music player. Against the southern wall there is a row of machines: a meal dispenser, a tableware dispenser and a machine for returning used tableware. There is a coffee machine on a cart next to them. The only door leads north.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the canteen. In the centre of the room there is a long table, and on the table there is a plastic plate with the remains of a meal, and a plastic cup. Near the edge of the table there is a small music player. Against the southern wall there is a row of machines: a meal dispenser, a tableware dispenser and a machine for returning used tableware. The only door leads north.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $musicon&gt;&gt;You hear music coming from the player on the table.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $cuptaken&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take the plastic cup from the table|take cup]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the machines against the wall|checkdispensers]]&lt;/span&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What food is on that plate?|whatfood]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $coffeecartlocation == 'D22'&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartd]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D22' &amp;&amp; $selitem == 'cup'&gt;&gt;
&lt;span id="tab"&gt;[[Make yourself a coffee|makecoffee]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $musicon&gt;&gt;
&lt;span id="tab"&gt;[[Examine the dancing robot|dancingrobot]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the music player|checkmusic]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD19]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;


&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Canteen&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $cuptaken == true &amp;&amp; $coffeecartlocation == 'D22'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the canteen. In the centre of the room there is a long table, and on the table there is a plastic plate with the remains of a meal. Near the edge of the table there is a small music player. Against the southern wall there is a row of machines: a meal dispenser, a tableware dispenser and a machine for returning used tableware. There is a coffee machine on a cart next to them. The only door leads north.&lt;/span&gt;
&lt;&lt;elseif $cuptaken == true&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the canteen. In the centre of the room there is a long table, and on the table there is a plastic plate with the remains of a meal. Near the edge of the table there is a small music player. Against the southern wall there is a row of machines: a meal dispenser, a tableware dispenser and a machine for returning used tableware. The only door leads north.&lt;/span&gt;
&lt;&lt;elseif $coffeecartlocation == 'D22'&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the canteen. In the centre of the room there is a long table, and on the table there is a plastic plate with the remains of a meal, and a plastic cup. Near the edge of the table there is a small music player. Against the southern wall there is a row of machines: a meal dispenser, a tableware dispenser and a machine for returning used tableware. There is a coffee machine on a cart next to them. The only door leads north.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the canteen. In the centre of the room there is a long table, and on the table there is a plastic plate with the remains of a meal, and a plastic cup. Near the edge of the table there is a small music player. Against the southern wall there is a row of machines: a meal dispenser, a tableware dispenser and a machine for returning used tableware. The only door leads north.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $musicon&gt;&gt;You hear music coming from the player on the table.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;timed 3s t8n&gt;&gt;&lt;&lt;if $cuptaken&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take the plastic cup from the table|take cup]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the machines against the wall|checkdispensers]]&lt;/span&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What food is on that plate?|whatfood]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $coffeecartlocation == 'D22'&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartd]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D22' &amp;&amp; $selitem == 'cup'&gt;&gt;
&lt;span id="tab"&gt;[[Make yourself a coffee|makecoffee]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $musicon&gt;&gt;
&lt;span id="tab"&gt;[[Examine the dancing robot|dancingrobot]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the music player|checkmusic]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD19]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d22nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="331" name="wanttocheck" tags="" position="7660,1685"> &lt;span class = 'odys'&gt;ODYS: As you wish.&lt;/span&gt;
 &lt;&lt;set $nothinghere to true&gt;&gt;\
 
 
 &lt;span id="tab"&gt;[[Next|RoomD20]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="332" name="angrycheck" tags="" position="7662,1809">&lt;span class = 'odys'&gt;ODYS: I'm sorry, Sandra. I'm not trying to order you around. My only interest is your safety, which depends on how quickly you act. Forgive me if I was too blunt. If you wish to search these rooms, I won't stop you, but remember – your chances of being rescued grow smaller the more time you waste.&lt;/span&gt;
&lt;&lt;set $nothinghere to true&gt;&gt;\
 
 
 &lt;span id="tab"&gt;[[Next|RoomD20]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="333" name="RoomD25" tags="" position="7255,1717">&lt;&lt;if $d25nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Robert Marsh's room&lt;/center&gt;&lt;/span&gt;\
&lt;&lt;if $marshroomagain&gt;&gt;\
&lt;&lt;else&gt;&gt;
You enter the room and jump, startled by alarming sounds of explosions and torn metal. You realise the sounds are played in a loop. This must be some sort of recording.
&lt;&lt;set $marshroomagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in captain Robert Marsh's room. It's more spacious than the other crew rooms. There is a bed, a wardrobe and a small table here. In the southern end of the room there is a desk with several computer monitors on it. The screens flash, showing many warning messages. The only door is in the eastern wall of the room.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the wardrobe and the table|marshtable]]&lt;/span&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What makes these noises?|askrecording]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD20]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Robert Marsh's room&lt;/center&gt;&lt;/span&gt;\
&lt;&lt;if $marshroomagain&gt;&gt;\
&lt;&lt;else&gt;&gt;
You enter the room and jump, startled by alarming sounds of explosions and torn metal. You realise the sounds are played in a loop. This must be some sort of recording.
&lt;&lt;set $marshroomagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in captain Robert Marsh's room. It's more spacious than the other crew rooms. There is a bed, a wardrobe and a small table here. In the southern end of the room there is a desk with several computer monitors on it. The screens flash, showing many warning messages. The only door is in the eastern wall of the room.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 5s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the wardrobe and the table|marshtable]]&lt;/span&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What makes these noises?|askrecording]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD20]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d25nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="334" name="openmarshroom" tags="" position="7517,1707">&lt;span class = 'odys'&gt;ODYS: This door leads to the room of Robert Marsh, the station's commander. I'll open it for you.&lt;/span&gt;
&lt;&lt;set $marshroomopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the door|RoomD25]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD20]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="335" name="RoomD24" tags="" position="7857,1405">&lt;span class="header"&gt;&lt;center&gt;Sasha Zinov's room&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $sasharoomcameraon &amp;&amp; $d24nofade&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in Sasha Zinov's quarters. It is a very tidy, impersonal room. Other than the bed and the computer desk, there is a bookshelf here with thirty-two books on it. One more book lies open, cover up, on the neatly made bed. The door is in the southern wall of the room.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the bookshelf|sashasbooks]]&lt;/span&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What book is on the bed?|whatbook]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What about the computer?|asksashaspc]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD20]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;elseif $sasharoomcameraon&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in Sasha Zinov's quarters. It is a very tidy, impersonal room. Other than the bed and the computer desk, there is a bookshelf here with thirty-two books on it. One more book lies open, cover up, on the neatly made bed. The door is in the southern wall of the room.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the bookshelf|sashasbooks]]&lt;/span&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What book is on the bed?|whatbook]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What about the computer?|asksashaspc]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD20]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d24nofade to true&gt;&gt;\

&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You managed to get into Sasha Zinov's room. Just like in his office, the camera in here is covered. It's located above the bed, in the north-western corner of the room.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Uncover the camera|roomcamera]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD20]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="336" name="opensasharoom" tags="" position="7757,1564">&lt;span class = 'odys'&gt;ODYS: This door leads to the room of Sasha Zinov, the IT specialist. The lock is coded; I can't open it.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Did Sasha set this code when the Outworlders attacked, too?|asksashascode]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $selitem == 'sashascard'&gt;&gt;
&lt;span id="tab"&gt;[[Use Sasha's keycard to unlock the door|unlocksasharoom]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD20]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="337" name="asksashascode" tags="" position="7599,1460">&lt;span class = 'odys'&gt;ODYS: No, he put this security measure here before. Zinov was distrustful by nature.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|opensasharoom]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="338" name="unlocksasharoom" tags="" position="7569,1575">You put Sasha's keycard to the panel. The door opens.
&lt;&lt;set $sasharoomopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the door|RoomD24]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD20]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="339" name="sashascard" tags="noreturn" position="1902,370">&lt;span class="items"&gt;A keycard which belonged to Sasha Zinov.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="340" name="RoomD23" tags="" position="7842,2087">&lt;&lt;if $d23nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Jim Mulligan's room&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in Jim Mulligan's room. There is a bed, a bookshelf and a computer desk here. A portable communication device is lying on the desk. The only door leads north.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the bookshelf|muligansbooks]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the computer|mullpc]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the comm device|mullcomm]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD20]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;


&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Jim Mulligan's room&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in Jim Mulligan's room. There is a bed, a bookshelf and a computer desk here. A portable communication device is lying on the desk. The only door leads north.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the bookshelf|muligansbooks]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the computer|mullpc]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the comm device|mullcomm]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD20]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d23nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="341" name="openmulliganroom" tags="" position="7837,1895">&lt;span class = 'odys'&gt;ODYS: This door leads to the room of Jim Mulligan, chief technician. I'll open it for you.&lt;/span&gt;
&lt;&lt;set $mulliganroomopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the door|RoomD23]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD20]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="342" name="muligansbooks" tags="" position="7707,2053">&lt;span class = 'odys'&gt;ODYS: It's all technical literature. Paper, properly stored, is much more reliable than most computer systems, so regulations require that certain documents on the station are available in this form too.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD23]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="343" name="mullpc" tags="" position="7728,2175">&lt;span class = 'odys'&gt;ODYS: The computer is switched off.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD23]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="344" name="mullcomm" tags="" position="7847,2228">&lt;span class = 'odys'&gt;ODYS: The comm device is not working. It seems to be broken. Mulligan likely planned to repair it.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD23]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="345" name="marshtable" tags="" position="7180,1867">&lt;span class = 'odys'&gt;ODYS: Only captain's personal things are here – mostly clothing.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD25]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="346" name="askrecording" tags="" position="7330,1867">&lt;span class = 'odys'&gt;ODYS: One of the screens displays a looped camera recording of the Outworlders' bombardment hitting the station. The recording ends abruptly, as the camera was destroyed.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What about the other screens? What do they show?|otherscreens]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What exactly does this recording show?|attackdescr]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD25]]&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="347" name="otherscreens" tags="" position="7255,2017">&lt;span class = 'odys'&gt;ODYS: Alarms and warning messages. Mostly about all sorts of damage to the station. Basically, it's a summary of the most important information sent to the command centre. Thanks to these monitors the captain always has his finger on the pulse.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|askrecording]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="348" name="attackdescr" tags="" position="7405,2017">&lt;span class = 'odys'&gt;ODYS: Not much. Just a stretch of section II southern corridor. The loop ends with shots of the ceiling collapsing. The cannon fire is barely visible as blurry flashes.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|askrecording]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="349" name="roomcamera" tags="" position="7987,1240">You stand on Sasha's bed. You reach up and find a camera with lens taped up. You peel off the tape.

&lt;span class = 'odys'&gt;ODYS: Now I can describe the room to you.&lt;/span&gt;
&lt;&lt;set $sasharoomcameraon to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomD24]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="350" name="sashasbooks" tags="" position="7800,1246">&lt;span class = 'odys'&gt;ODYS: It's mostly IT literature. There are also some novels mixed in.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What kind of novels did Sasha read?|bookgenres]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD24]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="351" name="whatbook" tags="" position="7630,1260">&lt;span class = 'odys'&gt;ODYS: A large tome – it's Joyce's "Ulysses".&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Never heard about it. What's the story?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: I'm sorry, this information is not recorded in my database. You'll have to check it yourself sometime.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Maybe I'll read it when I get my sight back.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD24]]&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="352" name="asksashaspc" tags="" position="8063,1353">&lt;span class = 'odys'&gt;ODYS: It's switched off.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD24]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="353" name="bookgenres" tags="" position="7743,1096">&lt;span class =  'odys'&gt;ODYS: Judging by the books on the shelf, he enjoyed thrillers and spy novels.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD24]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="354" name="traineq" tags="" position="7965,1613">&lt;span class = 'odys'&gt;ODYS: The equipment shows no signs of intensive use.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD21]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="355" name="takebackpack" tags="" position="8023,1480">You bend down and touch the object. You pick it up and turn in your hands. It's a textile backpack. There's some clothing inside.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: The backpack may prove useful, less so these sweaty rags.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;You put the clothes on the bench and take the backpack.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;Item received: &lt;span class = 'items'&gt;Backpack&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $backpack to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Back|RoomD21]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="356" name="take cup" tags="" position="8221,1826">Item received: &lt;span class = 'items'&gt;Plastic cup&lt;/span&gt;
&lt;&lt;set $cup to true&gt;&gt;&lt;&lt;set $cuptaken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD22]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="357" name="checkdispensers" tags="" position="8245,1941">&lt;&lt;if $coffeecartlocation == 'D22' &amp;&amp; $northlockthawed == true&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: The coffee machine is back in its place.&lt;/span&gt;
&lt;&lt;elseif $coffeecartlocation == 'D22'&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: The coffee machine is back in its place, but it's of no use to me here. If I send it to the northern lock, I might be able to thaw the ice with boiling water.&lt;/span&gt;
&lt;&lt;elseif $labentered == true&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: There should be a coffee machine here, too, but Doctor Romani has taken it to her lab. She was the only person on the station who drank more coffee than me.&lt;/span&gt;
&lt;&lt;elseif $expressdial == true&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: That's weird – you didn't mention the coffee machine. It should be here.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: I don't see it anywhere in the room. By the way, it's interesting you realised it's missing.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Nothing special about that. Coffee is the only thing that gets me going in the morning. Only Doctor Romani drank more coffee than me. Listen, Odys – can you check the camera in the lab?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: On it... yes, I see the coffee machine there – I assume that's what you were interested in.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Yes. I have to get to the laboratory.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: The door is locked, but you can get in from the central intersection, through the ventilation duct.&lt;/span&gt;
&lt;&lt;set $expressdial to true&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There's a food dispenser, a tableware dispenser and a machine for returning used tableware here.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the food dispenser|foodmachine]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the tableware dispenser|platesmachine]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the machine for returning used tableware|dirtymachine]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD22]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="358" name="foodmachine" tags="" position="8396,2116">Whichever buttons you press, nothing happens.

&lt;span class = 'odys'&gt;ODYS: This machine is not working – it must be out of order.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkdispensers]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="359" name="platesmachine" tags="" position="8425,1991">&lt;&lt;if $spoon&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There are alarm lights flashing on the dispenser – it needs repairs.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkdispensers]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There are alarm lights flashing on the dispenser – it needs repairs. There is a teaspoon on the dispenser tray.&lt;/span&gt;


&lt;span id="tab"&gt;[[Pick up the teaspoon|takespoon]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|checkdispensers]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="360" name="dirtymachine" tags="" position="8383,1881">&lt;span class = 'odys'&gt;ODYS: This machine seems to be disconnected from the mains.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkdispensers]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="361" name="takespoon" tags="" position="8503,2121">Item received: &lt;span class = 'items'&gt;Teaspoon&lt;/span&gt;
&lt;&lt;set $spoon to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkdispensers]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="362" name="spoon" tags="noreturn" position="1737,118">&lt;span class="items"&gt;A metal teaspoon.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="363" name="whatfood" tags="" position="8260,2075">&lt;span class = 'odys'&gt;ODYS: Some mashed potatoes and a sausage.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD22]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="364" name="checkmusic" tags="" position="8090,2070">&lt;&lt;if $musicon&gt;&gt;The music player is on.


&lt;span id="tab"&gt;[[Turn off the player|musicoff]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD22]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;The music player is off.


&lt;span id="tab"&gt;[[Turn on the player|musicon]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD22]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="365" name="musicoff" tags="" position="8078,2206">You turn off the player. The music stops. You hear a scratching noise – the little robot runs to its hiding place.
&lt;&lt;set $musicon to false&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkmusic]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="366" name="musicon" tags="" position="8201,2196">You turn on the device. It starts playing an energetic tune.

Suddenly you hear a quiet, metallic scratching. Something moves closer to the music player.
&lt;&lt;set $musicon to true&gt;&gt;\
&lt;&lt;if $cookie2taken&gt;&gt;&lt;span class = 'sandra'&gt;
SANDRA: Must be that funny little guy again. Hello there.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkmusic]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;
ODYS: That's astounding – you managed to lure a tiny service robot from its hideout behind the dispensers. It seems to be drawn by the music – what a curious programming oddity. Oh – it's carrying something on its back. A cookie, if I'm not mistaken.&lt;/span&gt;


&lt;span id="tab"&gt;[[Take the cookie|takecookie2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Eat the cookie|eatcookie2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|checkmusic]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="367" name="takecookie2" tags="" position="8106,2338">You bend down and take the foil-wrapped cookie from the robot's manipulator. The little robot takes no notice – he continues jumping to the rhythm.

Item received: &lt;span class = 'items'&gt;Cookie&lt;/span&gt;
&lt;&lt;set $cookie2 to true&gt;&gt;&lt;&lt;set $cookie2taken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkmusic]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="368" name="eatcookie2" tags="" position="8243,2341">&lt;span class = 'sandra'&gt;SANDRA: It's foil-wrapped, so I guess it's safe...&lt;/span&gt;

You open the package and eat the cookie.

&lt;span class = 'sandra'&gt;SANDRA: Chocolate – my favourite.&lt;/span&gt;
&lt;&lt;set $cookie2taken to true&gt;&gt;&lt;&lt;set $cookie2eaten to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkmusic]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="369" name="cookie2" tags="noreturn" position="1901,163">&lt;span class="items"&gt;A cookie you took from the little dancing robot.&lt;/span&gt;


&lt;span id="tab"&gt;[[Eat the cookie|itemeatcookie2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="370" name="itemeatcookie2" tags="noreturn" position="2052,223">&lt;span class = 'sandra'&gt;SANDRA: It's foil-wrapped, so I guess it's safe...&lt;/span&gt;

You open the package and eat the cookie.

&lt;span class = 'sandra'&gt;SANDRA: Chocolate – my favourite.&lt;/span&gt;
&lt;&lt;set $cookie2 to false&gt;&gt;&lt;&lt;set $cookie2eaten to true&gt;&gt;\
&lt;&lt;if $selitem == 'cookie2'&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="371" name="dancingrobot" tags="" position="7976,2326">The little robot is jiggling to the music.&lt;&lt;if $cookie2taken&gt;&gt;&lt;&lt;else&gt;&gt; It's holding a cookie in its manipulator.&lt;&lt;/if&gt;&gt;

&lt;span class = 'odys'&gt;ODYS: I'm afraid its software needs patching.&lt;/span&gt;

&lt;&lt;if $cookie2taken&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take the cookie|takecookie22]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Eat the cookie|eatcookie22]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD22]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="372" name="takecookie22" tags="" position="7888,2465">You bend down and take the foil-wrapped cookie from the robot's manipulator. The little robot takes no notice – he continues jumping to the rhythm.

Item received: &lt;span class = 'items'&gt;Cookie&lt;/span&gt;
&lt;&lt;set $cookie2 to true&gt;&gt;&lt;&lt;set $cookie2taken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD22]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="373" name="eatcookie22" tags="" position="8051,2476">&lt;span class = 'sandra'&gt;SANDRA: It's foil-wrapped, so I guess it's safe...&lt;/span&gt;

You open the package and eat the cookie.

&lt;span class = 'sandra'&gt;SANDRA: Chocolate – my favourite.&lt;/span&gt;
&lt;&lt;set $cookie2taken to true&gt;&gt;&lt;&lt;set $cookie2eaten to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD22]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="374" name="frozendoor" tags="" position="8967,1336">It's icy cold near this door.

&lt;span class = 'odys'&gt;ODYS: The door is completely iced over. You'd need more than a coffee machine to melt the ice. But it wouldn't be a good idea, anyway. There are leaking refrigerant tanks behind the door.&lt;/span&gt; 


&lt;span id="tab"&gt;[[Back|RoomD15]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="375" name="RoomD16" tags="" position="8833,1106">&lt;&lt;if $d16nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II northern corridor, northern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the northern corridor of section II. The corridor goes south. To the north there is the lift to section I. Near the lift door a broken robot is lying on the floor. There is a door in the western wall of the corridor. In the ceiling there is a hatch.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the robot|checkbadrobot]]&lt;/span&gt;
&lt;&lt;if $servicecodetaken &amp;&amp; $lifttoffixed &amp;&amp; $introfplayed&gt;&gt;
&lt;span id="tab"&gt;[[Take lift to section I|RoomF1]]&lt;/span&gt;
&lt;&lt;elseif $servicecodetaken &amp;&amp; $lifttoffixed&gt;&gt;
&lt;span id="tab"&gt;[[Take lift to section I|IntropartF]]&lt;/span&gt;
&lt;&lt;elseif $servicecodetaken&gt;&gt;
&lt;span id="tab"&gt;[[Take lift to section I|brokenlift]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take lift to section I|nocode]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lifttofix == true &amp;&amp; $selitem == 'fuse1d'&gt;&gt;
&lt;span id="tab"&gt;[[Install the fuse in the lift control box|mountfused1]]&lt;/span&gt;
&lt;&lt;elseif $lifttofix == true &amp;&amp; $selitem == 'fuse2d'&gt;&gt;
&lt;span id="tab"&gt;[[Install the fuse in the lift control box|mountfused2]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $sashasofficeopen == true &amp;&amp; $firstblood == true&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|RoomD17]]&lt;/span&gt;
&lt;&lt;elseif $sashasofficeopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|findblood]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|officeclosed]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the hatch|hatchD16]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomD15]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;


&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section II northern corridor, northern part&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the northern corridor of section II. The corridor goes south. To the north there is the lift to section I. Near the lift door a broken robot is lying on the floor. There is a door in the western wall of the corridor. In the ceiling there is a hatch.&lt;/span&gt;


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the robot|checkbadrobot]]&lt;/span&gt;
&lt;&lt;if $servicecodetaken &amp;&amp; $lifttoffixed &amp;&amp; $introfplayed&gt;&gt;
&lt;span id="tab"&gt;[[Take lift to section I|RoomF1]]&lt;/span&gt;
&lt;&lt;elseif $servicecodetaken &amp;&amp; $lifttoffixed&gt;&gt;
&lt;span id="tab"&gt;[[Take lift to section I|IntropartF]]&lt;/span&gt;
&lt;&lt;elseif $servicecodetaken&gt;&gt;
&lt;span id="tab"&gt;[[Take lift to section I|brokenlift]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take lift to section I|nocode]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lifttofix == true &amp;&amp; $selitem == 'fuse1d'&gt;&gt;
&lt;span id="tab"&gt;[[Install the fuse in the lift control box|mountfused1]]&lt;/span&gt;
&lt;&lt;elseif $lifttofix == true &amp;&amp; $selitem == 'fuse2d'&gt;&gt;
&lt;span id="tab"&gt;[[Install the fuse in the lift control box|mountfused2]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $sashasofficeopen == true &amp;&amp; $firstblood == true&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|RoomD17]]&lt;/span&gt;
&lt;&lt;elseif $sashasofficeopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|findblood]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|officeclosed]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the hatch|hatchD16]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomD15]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $d16nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

</tw-passagedata><tw-passagedata pid="376" name="checkbadrobot" tags="" position="8945,1033">You hear the robot move as you come closer.

&lt;span class = 'odys'&gt;ODYS: It's an all-purpose humanoid robot used for heavy work. It's lying on the floor. Its legs were damaged with a series of handgun shots.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Shots? If the aliens have never boarded the station, who shot it?|whoshot]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Can this robot be repaired?|fixbadrobot?]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="377" name="whoshot" tags="" position="9092,1126">&lt;span class = 'odys'&gt;ODYS: Sasha Zinov, according to the camera feed. He was running to his office in panic. He had a gun with him, property of captain Marsh. He was terrified; when he saw the silhouette of the robot, he took it for an Outworlder and fired several shots.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkbadrobot]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="378" name="fixbadrobot?" tags="" position="9087,999">&lt;span class = 'odys'&gt;ODYS: It's certainly possible, but it would require a lot of time, plus appropriate spare parts and tools. And skills, of course.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checkbadrobot]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="379" name="IntropartF" tags="" position="9638,822">&lt;&lt;set $introfplayed to true&gt;&gt;\
You go up in the lift.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I have bad news. An Outworlders' ship has just docked to the section I module. Several aliens have boarded the station. But, please, do not panic. I have a plan. I've already started carrying it out.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;&lt;&lt;timed 3s t8n&gt;&gt;[[I should hide myself.|shouldhide]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 3s t8n&gt;&gt;[[You told me I can defend myself against them.|candefend]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 3s t8n&gt;&gt;[[What plan?|theplan]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="380" name="brokenlift" tags="" position="9225,1133">&lt;&lt;if $lifttofix&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You can't call the lift until you've replaced the fuses.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You press the button, but the lift doesn't come.

&lt;span class = 'odys'&gt;ODYS: That's very unfortunate – it seems that the fuses are burnt out. But I know where to find replacements. Go to the eastern wing of the section and remove fuses from the control box of the lift that goes down to the tunnels.&lt;/span&gt;
&lt;&lt;set $lifttofix to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="381" name="nocode" tags="" position="8964,1166">&lt;span class = 'odys'&gt;ODYS: It's no use going to the command centre without the emergency code. First you have to go to Sasha's office. That's the room west from here.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="382" name="mountfused1" tags="" position="8782,964">&lt;&lt;if $fusesd == 0&gt;&gt;You open the box and install the first fuse.

Item lost: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;
&lt;&lt;set $fusesd to 1&gt;&gt;&lt;&lt;set $fuse1d to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;
&lt;&lt;elseif $fusesd == 1&gt;&gt;You open the box and install the second fuse.

&lt;span class = 'odys'&gt;ODYS: All right – the lift is working now.&lt;/span&gt;

Item lost: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;
&lt;&lt;set $fuse1d to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;&lt;&lt;set $lifttofix to false&gt;&gt;&lt;&lt;set $lifttoffixed to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="383" name="mountfused2" tags="" position="8945,906">&lt;&lt;if $fusesd == 0&gt;&gt;You open the box and install the first fuse.

Item lost: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;
&lt;&lt;set $fusesd to 1&gt;&gt;&lt;&lt;set $fuse2d to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;
&lt;&lt;elseif $fusesd == 1&gt;&gt;You open the box and install the second fuse.

&lt;span class = 'odys'&gt;ODYS: All right – the lift is working now.&lt;/span&gt;

Item lost: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;
&lt;&lt;set $fuse2d to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;&lt;&lt;set $lifttofix to false&gt;&gt;&lt;&lt;set $lifttoffixed to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="384" name="RoomD17" tags="" position="8375,981">&lt;span class="header"&gt;&lt;center&gt;Sasha Zinov's office&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $sashasofficecameraon&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in Sasha Zinov's office. In the centre of the room there is a large desk with an array of computer monitors. Many small items are scattered across the desk. Next to the desk, by a chair, Sasha's body is lying on the floor. Against the eastern wall of the room there is a sideboard with one large drawer. The only door in the room leads east.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the body on the floor|sashasbody]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the desk|pcdesk]]&lt;/span&gt;
&lt;&lt;if $selitem == 'dongle'&gt;&gt;
&lt;span id="tab"&gt;[[Plug the dongle into the computer|dongletopc]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the sideboard|checksideboard]]&lt;/span&gt;
&lt;&lt;if $servicecodetaken == true &amp;&amp; $sashasofficeleft == true&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|RoomD16]]&lt;/span&gt;
&lt;&lt;elseif $servicecodetaken == true&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|congratsd17]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|dontleaved17]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;elseif $sashasofficeagain&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You need to hurry and uncover that camera.&lt;/span&gt;


&lt;span id="tab"&gt;[[Go left from the door|goleft]]&lt;/span&gt;
&lt;&lt;if $gostraight&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go straight from the door|gostraight]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $goright&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go right from the door|goright]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Why did Sasha cover up the camera?|whycameraoff]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;As you enter Sasha's office you hear a three-note signal coming from the corridor. You recognise it – it announces a spaceship approaching the station. 

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: What's going on?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Bad news, Sandra. An Outworlders' ship is nearing the station. I don't know why they returned, but it's very unlikely they have peaceful intentions.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: What can we do? They're going to kill me!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: All is not lost yet. They are far away – our systems have detected their ship, as it doesn't have cloaking activated. It may be a different vessel. If they bombard the station, you'll have little chance of survival, but I suspect the purpose of their visit is different now. They may be scavengers who learned about us from the first ship's crew.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 8s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: They want to plunder the station?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Probably. Many valuable items and materials can be found here. Let's hope you'll be able to avoid – or eliminate – the aliens if they board the station. I'll be constantly analysing the situation and informing you about the best course of action. However, our main priority remains the same – you need to get that code from Sasha's computer. Forget about the Outworlders for now.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 12s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Where is that code?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 13s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The camera in this room shows only black image. Zinov has covered it up with something. You have to uncover the camera, so that I can guide you. The camera is installed under the ceiling, to the left from the door.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $sashasofficeagain to true&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 16s t8n&gt;&gt;[[Go left from the door|goleft]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;if $gostraight&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;&lt;&lt;timed 16s t8n&gt;&gt;[[Go straight from the door|gostraight]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $goright&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;&lt;&lt;timed 16s t8n&gt;&gt;[[Go right from the door|goright]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;&lt;&lt;timed 16s t8n&gt;&gt;[[Why did Sasha cover up the camera?|whycameraoff]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="385" name="findblood" tags="" position="8714,1094">&lt;&lt;set $firstblood to true&gt;&gt;\
In the doorway you step in something wet.


&lt;span id="tab"&gt;[[Enter the room|RoomD17]]&lt;/span&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[There's... some wet stain on the floor here.|itsgrease]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="386" name="officeclosed" tags="" position="8695,1221">The door is locked.

&lt;span class = 'odys'&gt;ODYS: Zinov has barricaded himself in the office... I can't open the door. And the camera inside only shows black image. You have to find a way to get inside.&lt;/span&gt;

&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard|noopen]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'mulliganscard'&gt;&gt;
&lt;span id="tab"&gt;[[Use Mulligan's keycard|noopen]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Press the button on the door|openoffice]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="387" name="itsgrease" tags="" position="8625,956">&lt;span class = 'odys'&gt;ODYS: Yes, I see – it's just oil from a damaged robot.&lt;/span&gt;


&lt;span id="tab"&gt;[[Enter the room|RoomD17]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="388" name="noopen" tags="" position="8540,1226">You put the keycard to the panel, but nothing happens.


&lt;span id="tab"&gt;[[Back|officeclosed]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="389" name="openoffice" tags="" position="8415,1231">You press the button. You hear the door open.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: That's one poor barricade.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I'm as surprised as you are. Only one explanation comes to my mind – Sasha, an experienced programmer, thought about every IT security measure possible, but forgot this simple mechanical detail. Of course, that's good for us.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $sashasofficeopen to true&gt;&gt;\


&lt;&lt;timed 4s t8n&gt;&gt;&lt;span id="tab"&gt;[[Go through the door|findblood]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="390" name="hatchD16" tags="" position="9115,1248">&lt;span class = 'odys'&gt;ODYS: It's a ventilation duct hatch. It's in the ceiling. There's no ladder leading to it.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: I can't get there.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD16]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="391" name="goleft" tags="" position="8380,814.3333333333334">As you go forward, you step on some small, hard object. You lose your balance and have to support yourself with your hand. You find the object which caused you to stumble. It seems to be a chess piece – a king, judging from its shape. Without really thinking about it, you place it in your pocket.

&lt;&lt;timed 2s t8n&gt;&gt;Item received: &lt;span class = 'items'&gt;Chess king&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;You take a few more steps into the room and find a low sideboard. You climb on it and reach up. You quickly locate the camera. The lens is covered up with tape. 
You remove the tape from the camera.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'odys'&gt;&lt;span class = 'odys'&gt;ODYS: Great – now I can see the room.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $sashasofficecameraon to true&gt;&gt;&lt;&lt;set $king to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 6s t8n&gt;&gt;[[Next|RoomD17]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="392" name="gostraight" tags="" position="8262,826">&lt;&lt;set $gostraight to true&gt;&gt;\
You take a few steps into the room and find a desk. There's a computer on it. You start going around the desk and hit a body on the ground with your foot.

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I found Sasha.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Sandra, I beg of you, don't wander around. Uncover the camera; we'll think about the rest later.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Back|RoomD17]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="393" name="goright" tags="" position="8499,942">&lt;&lt;set $goright to true&gt;&gt;\
You head right from the door. After a few metres you reach the wall.

&lt;span class = 'odys'&gt;ODYS: The camera is located to the left from the door, Sandra. There's a sideboard beneath, which you can climb to reach the camera.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD17]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="394" name="whycameraoff" tags="" position="8504,817">&lt;span class = 'odys'&gt;ODYS: He might have been afraid that the aliens would spot him on the screens in the command centre.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD17]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="395" name="sashasbody" tags="" position="8406,677">&lt;span class = 'odys'&gt;ODYS: Like the rest of the crew, Sasha died of gas poisoning. He was working on his computer at the moment of his death.&lt;/span&gt;


&lt;span id="tab"&gt;[[Search the body|searchsasha]]&lt;/span&gt;
&lt;&lt;if $sashasearched&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[I found something here... this must be blood. Where did it come from?|sashasblood]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD17]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="396" name="searchsasha" tags="" position="8286,577">&lt;&lt;if $sashasearched&gt;&gt;&lt;span class= 'sandra'&gt;SANDRA: There's nothing else here.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|sashasbody]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class= 'sandra'&gt;SANDRA: I hope this is the last time.&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;You search the body and find a pistol and a keycard. There's a pool of thick liquid by the body.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class= 'odys'&gt;ODYS: I don't know how Zinov got hold of this weapon, but he was likely planning to use it if the aliens got here. He would probably have shot the first person to come through the door, without thinking twice.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class= 'sandra'&gt;SANDRA: I'd leave the gun here. With things as they are, I could only hurt myself with it.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;Item received: &lt;span class = 'items'&gt;Sasha's keycard&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $sashascard to true&gt;&gt;&lt;&lt;set $sashasearched to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 6s t8n&gt;&gt;[[Back|sashasbody]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;

</tw-passagedata><tw-passagedata pid="397" name="king" tags="noreturn" position="1946,510">&lt;span class="items"&gt;A wooden chess piece. It has a small magnet in the base.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="398" name="sashasblood" tags="" position="8476,557">&lt;span class = 'odys'&gt;ODYS: Zinov hit his head on the edge of the desk when he collapsed to the floor. That's why there's blood on the floor.&lt;/span&gt;
&lt;&lt;set $askaboutblood to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|sashasbody]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="399" name="pcdesk" tags="" position="8095,679">&lt;&lt;if $servicecodetaken&gt;&gt;&lt;span class = 'odys'&gt;ODYS: We've got what we came for. You should go to the command centre ASAP.&lt;/span&gt;
&lt;&lt;elseif $dongle&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You should plug the dongle you found on the desk in the computer.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: We need to unlock Sasha's computer and obtain the emergency code. The computer denies my access requests. A message is displayed on the screen which says "Plug in the hardware key to unlock". The key must be here somewhere; Sasha used it frequently.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the objects on the desk|deskitems]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD17]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="400" name="deskitems" tags="" position="7940,686">&lt;&lt;if $dongletaken == true &amp;&amp; $santoscardtaken == true&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There is an open notebook here.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the notebook|sashaspad]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|pcdesk]]&lt;/span&gt;
&lt;&lt;elseif $dongletaken == true&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There is a keycard and an open notebook here.&lt;/span&gt;


&lt;span id="tab"&gt;[[Take the keycard|takesantoscard]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the notebook|sashaspad]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|pcdesk]]&lt;/span&gt;
&lt;&lt;elseif $santoscardtaken == true&gt;&gt;&lt;span class = 'odys'&gt;ODYS: On the desk there are: a computer dongle and an open notebook.&lt;/span&gt;


&lt;span id="tab"&gt;[[Take the dongle|takedongle]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the notebook|sashaspad]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|pcdesk]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: On the desk there are: a computer dongle, a keycard and an open notebook.&lt;/span&gt;


&lt;span id="tab"&gt;[[Take the dongle|takedongle]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Take the keycard|takesantoscard]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the notebook|sashaspad]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|pcdesk]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="401" name="sashaspad" tags="" position="7786,589">&lt;span class = 'odys'&gt;ODYS: It's open on a page with mathematical diagrams. Zinov used them in his work.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|deskitems]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="402" name="takesantoscard" tags="" position="7768,711">Item received: &lt;span class = 'items'&gt;Keycard found on Sasha's desk&lt;/span&gt;
&lt;&lt;set $sashadeskcard to true&gt;&gt;&lt;&lt;set $santoscardtaken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|deskitems]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="403" name="takedongle" tags="" position="7835,814">&lt;span class = 'odys'&gt;ODYS: This must be what we're looking for. Plug it into the computer; there's a port on the side of the keyboard.&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Dongle&lt;/span&gt;
&lt;&lt;set $dongle to true&gt;&gt;&lt;&lt;set $dongletaken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|deskitems]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="404" name="dongle" tags="noreturn" position="1564,535">&lt;span class="items"&gt;A hardware key which can be plugged into a computer port. Found on Sasha Zinov's desk.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="405" name="dongletopc" tags="" position="8090,474">&lt;&lt;set $dongle to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;&lt;&lt;set $servicecodetaken to true&gt;&gt;\
It takes a few tries, but you manage to plug the dongle in. You hear two beeps.

&lt;&lt;timed 1s t8n&gt;&gt;Item lost: &lt;span class = 'items'&gt;Dongle&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You did it! Sasha's computer is no longer locked. Hang on, I'm looking for the code in the system…&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Got it.	The code for sending a distress call is SE1157. You have to input it on the control panel in the command centre and press the confirmation button. I suggest going to the centre right away.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;&lt;if $askaboutblood&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[You said Sasha cut his head on the desk, but there's no blood here.|nobloodondesk]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Next|RoomD17]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="406" name="nobloodondesk" tags="" position="7935,379">&lt;span class = 'odys'&gt;ODYS: Nothing unusual about that. Blood started to pour from the cut a few seconds after he hit the desk. That's why it's on the floor, but not on the desk.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|RoomD17]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="407" name="congratsd17" tags="" position="8173,1003">&lt;span class = 'odys'&gt;ODYS: You're almost there, Sandra. We are doing great. At first, I estimated the chances of success at 60%. Now they are close to 100%. With this code you can send a call for help. You must go north, to the command centre in section I.&lt;/span&gt;
&lt;&lt;set $sashasofficeleft to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomD16]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="408" name="dontleaved17" tags="" position="8006,937">&lt;span class = 'odys'&gt;ODYS: Sandra, wait. You can't leave this room without the code. Finding it is crucial.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD17]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="409" name="checksideboard" tags="" position="8228,377">&lt;span class = 'odys'&gt;ODYS: There are various personal items on the sideboard – nothing of use to us. There sideboard also has a large drawer.&lt;/span&gt;


&lt;span id="tab"&gt;[[Open the drawer|trydrawer]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD17]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="410" name="trydrawer" tags="" position="8415,369">You pull on the handle, but the drawer won't open.


&lt;span id="tab"&gt;[[Back|RoomD17]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="411" name="checklabdoor" tags="" position="9520,2201">&lt;&lt;if $checklabdornofade&gt;&gt;The door cannot be opened.

&lt;span class = 'sandra'&gt;SANDRA: You can't unlock it, can you?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: No. As long as there's an experiment in progress, the door remains locked.&lt;/span&gt;
&lt;&lt;if $askaboutexp&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span class = 'sandra'&gt;SANDRA: What experiment?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: The large laboratory apparatus is on, and there are some samples prepared on the table. We should investigate this.&lt;/span&gt;
&lt;&lt;set $askaboutexp to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;

&lt;&lt;else&gt;&gt;The door cannot be opened.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: You can't unlock it, can you?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: No. As long as there's an experiment in progress, the door remains locked.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;if $askaboutexp&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: What experiment?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The large laboratory apparatus is on, and there are some samples prepared on the table. We should investigate this.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $askaboutexp to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;&lt;timed 6s t8n&gt;&gt;&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $checklabdornofade to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="412" name="askromani" tags="" position="9210,2198">&lt;span class = 'odys'&gt;ODYS: Yes. I'm sorry, Sandra.&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: No, that's not... I mean... I know they are all dead. I... I accepted this.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: She was your direct superior. Did you like her?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: She was a good boss. Though demanding. I… I rather liked her.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $askaboutromani to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 5s t8n&gt;&gt;[[Back|RoomD7]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="413" name="checkcoffeemach" tags="" position="9199,2328">&lt;&lt;if $coffeemachineexamined&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's an automatic cart. On the cart there's a large coffee machine.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's an automatic cart. On the cart there's a large coffee machine. The machine has independent battery power and a water tank. It's switched on.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: Instead of just making herself a coffee, Doctor Romani nabbed the entire coffee maker. That's very much like her. Maybe I could use the boiling water from the machine to melt the ice on the northern lock...&lt;/span&gt;
&lt;&lt;set $coffeemachineexamined to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="414" name="checklabeq" tags="" position="9592,2383">&lt;&lt;if $labdooropen&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The apparatus turned off after the experiment was completed.&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: On the table there is a huge machine, with many switches and status lamps. Three empty containers are placed on its tray. In each container there is a small chunk of rock. The machine is on, waiting for program start.&lt;/span&gt;


&lt;&lt;if $askexperiment == true &amp;&amp; $labdooropen == false&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What was the purpose of this experiment?|exppurpose]]&lt;/span&gt;
&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Running the program should unlock the door. Can you start it?|canstartprogram?]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $startexperiment&gt;&gt;\
&lt;&lt;elseif $askexperiment&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Do we know where each reagent should go?|whichsubstance]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="415" name="exppurpose" tags="" position="9379,2401">&lt;span class = 'odys'&gt;ODYS: Traces of rare metals were detected in samples of rock from the planetoid. Doctor Romani wanted to test which of three different brand reagents is the most efficient in extracting these metals.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|checklabeq]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="416" name="whichsubstance" tags="" position="9774,2450">&lt;span class = 'odys'&gt;ODYS: To be honest, it doesn't really matter to us. You may add the reagents in any order – the experiment will still be conducted and the door will open. Adding reagents in order which differs from the calibration will, of course, yield false results, but we need not worry about that.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[You're right. It doesn't matter now.|expignore]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Maybe, but I'd like to know anyway. If I'm going to complete Doctor Romani's experiment, I want to do this just like she intended.|expwanttoknow]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="417" name="canstartprogram?" tags="" position="9757,2302">&lt;span class = 'odys'&gt;ODYS: The apparatus sends a "not ready" signal. Wait a moment. I'm analysing data from Doctor Romani's computer.&lt;/span&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Got it. The apparatus is fully calibrated. However, to start the experiment we need to add reagents.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Do you know what reagents?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Even better, they're already prepared in measuring glasses. Doctor Romani was just about to start the procedure when the aliens struck. Luckily for us, she prepared a documentation of the experiment, which describes each step in detail.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $askexperiment to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[Next|checklabeq]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="418" name="expignore" tags="" position="9962,2551">&lt;span class = 'odys'&gt;ODYS: That's a good decision, Sandra. After all, we only need to open the door.&lt;/span&gt;
&lt;&lt;set $startexperiment to true&gt;&gt;&lt;&lt;set $ignoreromaninotes to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="419" name="expwanttoknow" tags="" position="9879,2258">&lt;span class = 'odys'&gt;ODYS: As you wish, Sandra, though it makes matters far more complicated. Doctor Romani calibrated the machine and weighed the reagents, but if you want to complete the experiment according to the plan, you have to identify them.

ODYS: According to her notes, you need to add a substance called Ennex to the first sample, LIN3 to the second sample and Kalden to the third sample. Their physico-chemical properties are almost identical, but the weighed amounts of each reagent differ, as Doctor Romani has taken into account different size of samples. One of the measuring glasses contains 530ml of Ennex, another one – 450ml of LIN3, and the last one – 540ml of Kalden. The glasses are placed in a row, but I don't know if that's the order in which the reagents are to be added.&lt;/span&gt;
&lt;&lt;set $experimentexplained to true&gt;&gt;&lt;&lt;set $startexperiment to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="420" name="moreaboutexp" tags="" position="10092,2160">&lt;&lt;if $ignoreromaninotes&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Can you tell me what was Doctor Romani's plan, after all?|donotignore]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $experimentexplained&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Tell me again, what should I add where if I want to get correct results?|expremind]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $experimentexplained&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Did Doctor Romani mention the expected results in her notes?|results?]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $experimentexplained&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[The procedure seems simple enough, but how can I identify the reagents?|howidentify]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="421" name="donotignore" tags="" position="10245,2125">&lt;span class = 'odys'&gt;ODYS: You might have a point here, though your safety is more important now. Still, it won't hurt us, as long as you complete the experiment quickly enough. All right, I'll give you all the information I found. Doctor Romani calibrated the machine and weighed the reagents, but if you want to complete the experiment according to the plan, you have to identify them.

ODYS: According to her notes, you need to add a substance called Ennex to the first sample, LIN3 to the second sample and Kalden to the third sample. Their physico-chemical properties are almost identical, but the weighed amounts of each reagent differ, as Doctor Romani has taken into account different size of samples. One of the measuring glasses contains 530ml of Ennex, another one – 450ml of LIN3, and the last one – 540ml of Kalden. The glasses are placed in a row, but I don't know if that's the order in which the reagents are to be added.&lt;/span&gt;
&lt;&lt;set $experimentexplained to true&gt;&gt;&lt;&lt;set $ignoreromaninotes to false&gt;&gt;\


&lt;span id="tab"&gt;[[Back|moreaboutexp]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="422" name="expremind" tags="" position="10245,2276">&lt;span class = 'odys'&gt;ODYS: Sample 1: Ennex, 530ml. Sample 2: LIN3, 450ml. Sample 3: Kalden 540ml.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|moreaboutexp]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="423" name="results?" tags="" position="10092,2310">&lt;span class = 'odys'&gt;ODYS: Yes. She expected Ennex to be the most efficient, and Kalden to be the least efficient.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|moreaboutexp]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="424" name="howidentify" tags="" position="10387,2205">&lt;span class = 'odys'&gt;ODYS: I don't know. I suggest you don't worry about the correct order. It won't matter at all if the results are incorrect and, let's say, show Ennex is the optimal reagent instead of LIN3.&lt;/span&gt;
&lt;&lt;if $howidentifyagain&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span class = 'sandra'&gt;SANDRA: Wait a minute – you can see the measuring glasses! Can you tell me how much liquid there is in each of them?&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: No, Sandra. I'm viewing them from above and can't see the small differences in fluid level. You must find another way to identify the reagents.&lt;/span&gt;
&lt;&lt;set $howidentifyagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|moreaboutexp]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="425" name="dothescience" tags="" position="9712,2701">You approach the laboratory table and locate three measuring glasses.


&lt;span id="tab"&gt;[[Weigh the glasses in your hands|checkmass]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Smell the reagents|smell]]&lt;/span&gt;
&lt;&lt;if $selitem == 'spoon'&gt;&gt;
&lt;span id="tab"&gt;[[Tap each glass with the spoon|sounds]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Tell me again, what should I add where if I want to get correct results?|scienceremind]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Add reagents to samples|addreagents]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="426" name="checkmass" tags="" position="9580,2729">You pick up the measuring glasses, one by one. Even if the first and the second one differ in weight, you can't tell the difference. The third glass, however, seems lighter.


&lt;span id="tab"&gt;[[Back|dothescience]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="427" name="smell" tags="" position="9637,2851">None of the reagents smells of anything.


&lt;span id="tab"&gt;[[Back|dothescience]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="428" name="sounds" tags="" position="9787,2851">You cautiously tap the glasses with the teaspoon. The first glass emits a low sound. The second glass emits a slightly higher sound. The sound of the third glass is significantly higher.


&lt;span id="tab"&gt;[[Back|dothescience]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="429" name="scienceremind" tags="" position="9937,2851">&lt;span class = 'odys'&gt;ODYS: Sample 1: Ennex, 530ml. Sample 2: LIN3, 450ml. Sample 3: Kalden 540ml.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|dothescience]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="430" name="addreagents" tags="" position="10124,2849">&lt;span class = 'sandra'&gt;SANDRA: Once I add the reagents, I won't be able to change it...&lt;/span&gt;


&lt;span id="tab"&gt;[[Add the reagents|yesadd]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|dothescience]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="431" name="yesadd" tags="" position="10124,2999">Add the reagent in the first glass to which sample?


&lt;span id="tab"&gt;[[First sample|kaldento1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Second sample|kaldento2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Third sample|kaldento3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="432" name="kaldento1" tags="" position="9974,3149">&lt;&lt;set $kalden to 1&gt;&gt;&lt;&lt;set $probe1full to true&gt;&gt;\
Add the reagent in the second glass to which sample?

&lt;&lt;if $probe1full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[First sample|ennexto1]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe2full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Second sample|ennexto2]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe3full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Third sample|ennexto3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="433" name="kaldento2" tags="" position="10124,3149">&lt;&lt;set $kalden to 2&gt;&gt;&lt;&lt;set $probe2full to true&gt;&gt;\
Add the reagent in the second glass to which sample?

&lt;&lt;if $probe1full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[First sample|ennexto1]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe2full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Second sample|ennexto2]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe3full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Third sample|ennexto3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="434" name="kaldento3" tags="" position="10274,3149">&lt;&lt;set $kalden to 3&gt;&gt;&lt;&lt;set $probe3full to true&gt;&gt;\
Add the reagent in the second glass to which sample?

&lt;&lt;if $probe1full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[First sample|ennexto1]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe2full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Second sample|ennexto2]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe3full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Third sample|ennexto3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="435" name="ennexto1" tags="" position="9962,3297">&lt;&lt;set $ennex to 1&gt;&gt;&lt;&lt;set $probe1full to true&gt;&gt;\
Add the reagent in the third glass to which sample?

&lt;&lt;if $probe1full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[First sample|lin3to1]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe2full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Second sample|lin3to2]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe3full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Third sample|lin3to3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="436" name="ennexto2" tags="" position="10127,3302">&lt;&lt;set $ennex to 2&gt;&gt;&lt;&lt;set $probe2full to true&gt;&gt;\
Add the reagent in the third glass to which sample?

&lt;&lt;if $probe1full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[First sample|lin3to1]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe2full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Second sample|lin3to2]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe3full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Third sample|lin3to3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="437" name="ennexto3" tags="" position="10280,3304">&lt;&lt;set $ennex to 3&gt;&gt;&lt;&lt;set $probe3full to true&gt;&gt;\
Add the reagent in the third glass to which sample?

&lt;&lt;if $probe1full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[First sample|lin3to1]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe2full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Second sample|lin3to2]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $probe3full&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Third sample|lin3to3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="438" name="lin3to1" tags="" position="9945,3446">&lt;&lt;set $lin3 to 1&gt;&gt;&lt;&lt;set $probe1full to true&gt;&gt;\
You pour reagents from the measuring glasses into the sample containers.

&lt;span class = 'odys'&gt;ODYS: Now I can start the processing.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|processexp]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="439" name="lin3to2" tags="" position="10134,3451">&lt;&lt;set $lin3 to 2&gt;&gt;&lt;&lt;set $probe2full to true&gt;&gt;\
You pour reagents from the measuring glasses into the sample containers.

&lt;span class = 'odys'&gt;ODYS: Now I can start the processing.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|processexp]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="440" name="lin3to3" tags="" position="10280,3452">&lt;&lt;set $lin3 to 3&gt;&gt;&lt;&lt;set $probe3full to true&gt;&gt;\
You pour reagents from the measuring glasses into the sample containers.

&lt;span class = 'odys'&gt;ODYS: Now I can start the processing.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|processexp]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="441" name="processexp" tags="" position="10129,3647">&lt;&lt;set $labdooropen to true&gt;&gt;\
&lt;&lt;if $ennex == 1 &amp;&amp; $lin3 == 2 &amp;&amp; $kalden == 3&gt;&gt;&lt;&lt;set $achievementexperiment to true&gt;&gt;&lt;&lt;else&gt;&gt;\&lt;&lt;/if&gt;&gt;\

You hear the laboratory apparatus humming to life. The machine continues making noise for a few minutes, then goes quiet.

&lt;span class = 'odys'&gt;ODYS: Great – the door was unlocked. And I have the results of our experiment. Do you want me to read them out?&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Sure!|expresults]]&lt;/span&gt;

&lt;span id="tab"&gt;[[No. I'd rather focus on getting to Sasha's office.|RoomD7]]&lt;/span&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="442" name="expresults" tags="" position="10129,3797">&lt;span class = 'odys'&gt;ODYS: The experiment shows that &lt;&lt;if $ennex ==1&gt;&gt;Ennex&lt;&lt;elseif $ennex ==2&gt;&gt;LIN3&lt;&lt;else&gt;&gt;Kalden&lt;&lt;/if&gt;&gt; is the most effective reagent.

The least effective one is &lt;&lt;if $kalden ==1&gt;&gt;Ennex.&lt;&lt;elseif $kalden ==2&gt;&gt;LIN3.&lt;&lt;else&gt;&gt;Kalden.&lt;&lt;/if&gt;&gt;
&lt;&lt;if $ennex == 1 &amp;&amp; $kalden == 3&gt;&gt;
&lt;span class = 'odys'&gt;Of course, I can't confirm if you identified the reagents correctly, but the results agree with Doctor Romani's expectations.&lt;/span&gt;

&lt;&lt;if $ignoreromaninotes&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I think I got it right, but it was pure luck.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: Indeed, you were lucky. But the important thing is, we managed to get that door open.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I'm sure I did it right.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: You're certainly inventive, Sandra. The important thing is, the lab door is now unlocked.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomD7]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span class = 'odys'&gt;Of course, I can't confirm if you identified the reagents correctly, especially because our results don't agree with Doctor Romani's expectations.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: I think I messed this up.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: Or maybe Doctor Romani was wrong. It doesn't matter, Sandra – I can open the lab door now, and, after all, that's what we wanted.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|RoomD7]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;

</tw-passagedata><tw-passagedata pid="443" name="searchromani" tags="" position="10215,2441">&lt;span class = 'odys'&gt;ODYS: Like the rest of the crew, Doctor Romani died of gas poisoning. At the moment of her death she was typing on the computer, finishing her preparations for the experiment.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: She was very methodical. For every process, there had to be paperwork filled out – before, during and after. She must have been so focused on her work she didn't realise what was going on until the very last moment.&lt;/span&gt;

&lt;&lt;if $knife&gt;&gt;
&lt;span id="tab"&gt;[[Search the body|romaninothing]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Search the body|takeknife]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="444" name="romaninothing" tags="" position="10140,2591">&lt;span class = 'sandra'&gt;SANDRA: Doctor Romani had nothing but a lab knife with her.&lt;/span&gt; 


&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="445" name="takeknife" tags="" position="10290,2591">In a pocket of Doctor Romani's lab coat you find a small knife.

Item received: &lt;span class = 'items'&gt;Knife&lt;/span&gt;
&lt;&lt;set $knife to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="446" name="checkreagents" tags="" position="9707,2193">&lt;span class = 'odys'&gt;ODYS: On the shelves there are rows of labelled bottles, jars and other containers, and various laboratory equipment.&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: I'd better not touch them – Doctor Romani keeps some nasty chemicals there. I don't want them to drop on my head.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="447" name="chuteno" tags="" position="9482,2311">&lt;span class = 'sandra'&gt;SANDRA: I won't crawl through the duct again – I can go right through the door.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="448" name="gladyouleft" tags="" position="9075,2576">&lt;span class = 'odys'&gt;ODYS: I'm glad you've used common sense. I'll lock that door. Let's go – there's no time to waste.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD10]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="449" name="goinside" tags="" position="9151,2795">&lt;&lt;if $goinsideagain&gt;&gt;Going through the room, you find a desk to your left.


&lt;span id="tab"&gt;[[Examine the desk|meddesk]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go to the back of the room|gofurther]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD14]]&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I beg you, don't ignore my warnings. You came so far. Please, don't put your life at risk.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;Going through the room, you find a desk to your left.&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the desk|meddesk]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go to the back of the room|gofurther]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD14]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $goinsideagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;

</tw-passagedata><tw-passagedata pid="450" name="checkmedstation" tags="" position="9407,2798">&lt;&lt;if $medstationagain&gt;&gt;The machine you touch is some kind of cabin. Its door is open. There's a row of buttons on the side of the cabin.

&lt;span class = 'odys'&gt;ODYS: This is a spray lubrication cabin for humanoid robots. The oil used in there is highly toxic in contact with the skin.&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the buttons|checkmedpanel]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Step into the cabin|entermedstation]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD14]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Why are you ignoring me? I only think about your safety; alas, I have no way of stopping you if you won't listen. You must be rational. You must listen to me. I don't want to fail you, not even by your own wish.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;The machine you touch is some kind of cabin. Its door is open. There's a row of buttons on the side of the cabin.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This is a spray lubrication cabin for humanoid robots. The oil used in there is highly toxic in contact with the skin.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 5s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the buttons|checkmedpanel]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Step into the cabin|entermedstation]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD14]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $medstationagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="451" name="meddesk" tags="" position="9151,2945">&lt;&lt;if $meddeskagain&gt;&gt;&lt;&lt;if $datacylinderin&gt;&gt;On the desk there's a computer monitor and a kind of rack, in which six small, cylindrical objects are placed.
&lt;&lt;else&gt;&gt;On the desk there's a computer monitor and a kind of rack, in which five small, cylindrical objects are placed. There's a slot in the rack for a sixth object.
&lt;&lt;/if&gt;&gt;\


&lt;&lt;if $selitem == 'cylinder'&gt;&gt;
&lt;span id="tab"&gt;[[Place the cylinder in the rack|cylinderin]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|insideamb]]&lt;/span&gt;

&lt;&lt;else&gt;&gt;On the desk there's a computer monitor and a kind of rack, in which five small, cylindrical objects are placed. There's a slot in the rack for a sixth object.

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's an unpowered diagnostic station and spare robot AI cores. Nothing useful. Please, Sandra, turn back before you hurt yourself.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;&lt;if $selitem == 'cylinder'&gt;&gt;
&lt;span id="tab"&gt;[[Place the cylinder in the rack|cylinderin]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|insideamb]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $meddeskagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="452" name="cylinderin" tags="" position="9012,2994">You put the cylinder in the slot. It fits perfectly.

&lt;span class = 'odys'&gt;ODYS: It's great that you returned that AI core, but this doesn't get us anywhere.&lt;/span&gt;
&lt;&lt;set $datacylinderin to true&gt;&gt;&lt;&lt;set $cylinder to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|meddesk]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="453" name="insideamb" tags="" position="9316,2968">You are near the desk in the middle of the room.


&lt;span id="tab"&gt;[[Examine the desk|meddesk]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go to the back of the room|gofurther]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD14]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="454" name="gofurther" tags="" position="9201,3106">&lt;&lt;if $gofurthernofade&gt;&gt;You pass by the desk and approach the machinery at the back of the room.


&lt;span id="tab"&gt;[[Examine the machinery|checkmedeq]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|insideamb]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You pass by the desk and approach the machinery at the back of the room.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I've managed to cut off power to these stations, but I get dozens of error messages. Power may go back on at any given moment. You must leave this room before that happens.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span id="tab"&gt;[[Examine the machinery|checkmedeq]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|insideamb]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $gofurthernofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="455" name="checkmedeq" tags="" position="9201,3256">&lt;&lt;if $checkmedeqnofade&gt;&gt;There is a vertical machine with many dangling wires here, a massive contraption on a robotic arm and a bench covered with soft fake leather.


&lt;span id="tab"&gt;[[Back|insideamb]]&lt;/span&gt;

&lt;&lt;else&gt;&gt;There is a vertical machine with many dangling wires here, a massive contraption on a robotic arm and a bench covered with soft fake leather.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Do you really have to touch everything? You're like a small child. But the "toys" you play with are dangerous.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[You're right. I'm sorry. I'm leaving this room right now.|gladyouleft]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|insideamb]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $checkmedeqnofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="456" name="checkmedpanel" tags="" position="9435,3118">You find a button which is bigger than the others and has a cross etched on it.

&lt;&lt;if $diagnosison&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Press the button with the cross|diagnosison]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|checkmedstation]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="457" name="entermedstation" tags="" position="9633,3118">&lt;&lt;if $diagnosison &amp;&amp; $entermedstationagain&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Sandra? Sandra, are you listening? Leave that cabin at once, do you hear? Leave it at once!&lt;/span&gt;


&lt;span id="tab"&gt;[[Leave the cabin|leavemedstation]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Stay in the cabin|stayinstation]]&lt;/span&gt;
&lt;&lt;elseif $diagnosison&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You're crazy. Are you trying to kill yourself? Just hear me out. You've almost there. Do not despair. I will help you. I won't let you come to harm.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Sandra? Sandra, are you listening? Leave that cabin at once, do you hear? Leave it at once!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 4s t8n&gt;&gt;&lt;span id="tab"&gt;[[Leave the cabin|leavemedstation]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Stay in the cabin|stayinstation]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $entermedstationagain to true&gt;&gt;\
&lt;&lt;else&gt;&gt;You enter the cabin, but nothing happens. The machine is turned off. You step out of the cabin.


&lt;span id="tab"&gt;[[Next|checkmedstation]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="458" name="diagnosison" tags="" position="9435,3268">The machinery emits a series of crackling noises. You hear a robotic female voice:

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'speech'&gt;VOICE: Automatic diagnosis started. Please enter the cabin.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: These instructions are not meant for humans. You are not a robot. You should step back.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $diagnosison to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 8s t8n&gt;&gt;[[Back|checkmedstation]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="459" name="leavemedstation" tags="" position="9719,3007">&lt;span class = 'odys'&gt;ODYS: Thank you, Sandra. Let's leave this place.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|RoomD14]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="460" name="stayinstation" tags="" position="9667,3417">You step into the cabin. You hear the door close behind you. 

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'speech'&gt;VOICE: Vulcanium concentration above limit detected in the air. Creating protective atmosphere in the cabin.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;You feel a strong airflow.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'speech'&gt;VOICE: Creating protective atmosphere completed. Please take off the breath mask.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;You slowly take off the breath mask. The air in the cabin smells of disinfectants. You hear a ventilator working. The cabin blocks all sounds from the outside. Even if Odys is talking to you right now, you can't hear him.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class = 'speech'&gt;VOICE: Preliminary diagnosis completed. Second degree vulcanium poisoning detected. Commencing routine detoxification. Please stand still and breath deeply.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: "Lack of reason"? Yes, I was foolish to trust Odys...&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 10s t8n&gt;&gt;Different substances are vented into the cabin one by one. The air smells sour and burns you in the nose. You feel a pleasant warmth on your face. Suddenly a needle pricks the skin on your forearm.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 12s t8n&gt;&gt;&lt;span class = 'speech'&gt;VOICE: Detoxification completed. Caution: vulcanium concentration above limit outside of the cabin. Please put on your breath mask before leaving the cabin.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 14s t8n&gt;&gt;You put on the mask. The door of the cabin slides open when you touch it. You step out. You feel dizzy and your hands shake with adrenaline – or maybe that's a side effect of the treatment.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 16s t8n&gt;&gt;All around you there is light, dim and milky, and various shapes begin to emerge from it.&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $sight to true&gt;&gt;&lt;&lt;set $achievementsight to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 18s t8n&gt;&gt;[[Next|d14!prologue]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="461" name="RoomD14!" tags="" position="12731,5969">&lt;span class="header"&gt;&lt;center&gt;Section II, medical room&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $thisagain&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D14.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in the medical room. The only door is in the western wall of the room. To the right from the door there is an automatic first aid station. To the left there is a desk. At the back of the room there is a couch, surrounded by various medical devices.


&lt;span id="tab"&gt;[[Examine the cabin|checkcabind14!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the desk|checkdeskd14!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomD10!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;timed 3s t8n&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D14.png" width="100%" height = "100%"/&gt;&lt;/center&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;You are in the medical room. The only door is in the western wall of the room. To the right from the door there is an automatic first aid station. To the left there is a desk. At the back of the room there is a couch, surrounded by various medical devices.&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Examine the cabin|checkcabind14!]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Examine the desk|checkdeskd14!]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Go through the western door|RoomD10!]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Open inventory|Items]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;set $thisagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="462" name="shouldhide" tags="" position="9474,972">&lt;span class = 'odys'&gt;ODYS: You could, but if you don't alarm the emergency services, nobody will come to your aid. I have no idea what the aliens are going to do, but we have to assume that they will search the station. Or that they will take what they want and then bombard us.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: What can I do, then?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: As I mentioned, I have a plan.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Next|theplan]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="463" name="candefend" tags="" position="9634,970">&lt;span class = 'odys'&gt;ODYS: You can. You can use the station against them. And this precisely is my plan.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|theplan]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="464" name="theplan" tags="" position="9788,972">&lt;span class = 'odys'&gt;ODYS: I blocked the lock between the docking module and section I main corridor, but the Outworlders will eventually force their way through. We must kill them before that happens.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Kill them?! But how?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There's a cable assembly which runs under the ceiling of the lock where I trapped the aliens. I've made some calculations – if we apply enough voltage to the assembly, the insulation will fail and the metal room will turn into a deadly electric trap. There's only one problem – the fuse. If I redirect the electric current now, it will blow and the circuit will be broken. You have to get to the fuse box, which is in a room right before the command centre, and replace the main section I fuse with one that can stand the load.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[I'll do this. They are going to pay for murdering the crew.|wantrevenge]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[I've never thought I'll have to kill...|dontwanttokill]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[What if your plan doesn't work?|whatifplanfails]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="465" name="wantrevenge" tags="" position="9638,1122">&lt;span class = 'odys'&gt;ODYS: You must do this, first and foremost, for your own safety, Sandra. But it doesn't surprise me you want justice to be served.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|gointof]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="466" name="dontwanttokill" tags="" position="9788,1122">&lt;span class = 'odys'&gt;ODYS: I'm afraid you have no choice, Sandra. They will show you no mercy. Remember they have blood of your friends on their hands.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|gointof]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="467" name="whatifplanfails" tags="" position="9938,1122">&lt;span class = 'odys'&gt;ODYS: Then you'll be in great danger. But there's no reason to believe my plan will fail. I've calculated everything; the trap will work, but you must hurry and replace the fuse before the aliens force their way through the lock.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|gointof]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="468" name="gointof" tags="" position="10171,1214">&lt;span class = 'odys'&gt;ODYS: You should head straight now and turn left at the lock. You'll find a small room with the main fuse box. Do you have any questions?&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[I didn't think they would come back. I'm afraid.|afraid]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Did you realise that the aliens might return?|knowreturn]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Describe the plan of this section to me.|mapoff]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I have no more questions.|endingintrof]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="469" name="afraid" tags="" position="9953,1368">&lt;span class = 'odys'&gt;ODYS: As I've already mentioned, they surely want to plunder the station. It's only natural that you're afraid, but if you act decisively, you will come to no harm. Please, trust me and do as I say.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|gointof2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="470" name="knowreturn" tags="" position="10103,1368">&lt;span class = 'odys'&gt;ODYS: I knew there was such a possibility, but I decided not to tell you. Otherwise this threat would have been on your mind all the time, petrifying you, making you unable to act.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|gointof2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="471" name="mapoff" tags="" position="10253,1368">&lt;span class = 'odys'&gt;ODYS: Section I isn't large. You are in a straight corridor, which goes through a multimedia room, to the docking module lock. By the lock the corridor turns left and continues west to the command centre. Right before the command centre there is the room with the main fuse box.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|gointof2]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="472" name="endingintrof" tags="" position="10403,1368">&lt;span class = 'odys'&gt;ODYS: All right, then. Move on. Don't worry – I'll keep you informed on the situation. For now, the aliens haven't found a way of getting out of the trap.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|RoomF1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="473" name="gointof2" tags="" position="10286,1127">&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[I didn't think they would come back. I'm afraid.|afraid]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Did you realise that the aliens might return?|knowreturn]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Describe the plan of this section to me.|mapoff]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I have no more questions.|endingintrof]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="474" name="RoomF1" tags="" position="10781,1262">&lt;&lt;if $f1nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Corridor by the lift&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are on the southern end of section I corridor. The corridor leads north. To the south there is a lift down to section II. Next to the lift door, by the western wall, several pipes with service valves are coming through the floor. The pipes bend and run along the corridor, under the ceiling.&lt;/span&gt;

&lt;&lt;if $alienskilled&gt;&gt;\
&lt;span id="tab"&gt;[[Take the lift down to section II|noreturntod]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take the lift down to section II|RoomD16]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the pipe valves|checkvalvesf1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomF2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;


&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Corridor by the lift&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are on the southern end of section I corridor. The corridor leads north. To the south there is a lift down to section II. Next to the lift door, by the western wall, several pipes with service valves are coming through the floor. The pipes bend and run along the corridor, under the ceiling.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;&lt;if $alienskilled&gt;&gt;\
&lt;span id="tab"&gt;[[Take the lift down to section II|noreturntod]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take the lift down to section II|RoomD16]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the pipe valves|checkvalvesf1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomF2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $f1nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="475" name="noreturntod" tags="" position="10664,1398">&lt;span class = 'odys'&gt;ODYS: We have no reason to go back there. You must send the distress signal ASAP, so that help comes before structural damage to station causes decompression.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="476" name="checkvalvesf1" tags="" position="10871,1395">&lt;span class = 'odys'&gt;ODYS: Those pipes carry water and vulcanium. Tampering with the valves could lead to an accident.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF1]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="477" name="RoomF2" tags="" position="10779,1030">&lt;&lt;if $f2nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section I corridor&lt;/center&gt;&lt;/span&gt;\

You hear metallic clattering and grating coming through the eastern wall of the corridor.

&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section I. To the north there is a massive door. The corridor goes south.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What are these noises?|noisesf2]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomF3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomF1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;


&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Section I corridor&lt;/center&gt;&lt;/span&gt;\

You hear metallic clattering and grating coming through the eastern wall of the corridor.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in the southern corridor of section I. To the north there is a massive door. The corridor goes south.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What are these noises?|noisesf2]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomF3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomF1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $f2nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="478" name="noisesf2" tags="" position="10597,1018">&lt;span class = 'odys'&gt;ODYS: Upper mining tunnels are running behind this wall. You hear the robots working.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF2]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="479" name="RoomF3" tags="" position="10767,693">&lt;&lt;if $f3nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Information centre&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $screenexplode&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in an octagonal room. There are broken, sparkling screens under the ceiling, and a charred control panel below. There are cushioned seats against the walls. There are two doors in the room, leading north and south.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in an octagonal room. In the middle of the room there are four large screens, facing four directions, and below the screens there is a control panel. The screens are turned off. There are cushioned seats against the walls. There are two doors in the room, leading north and south.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Isn't the command centre farther away?|centerfurther]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $screenexplode&gt;&gt;
&lt;span id="tab"&gt;[[Go to the control panel|consoledestroyed]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the control panel|consolef3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $infobuttonpressed == true &amp;&amp; $screenexplode == false&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|explosionnorth]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomF5]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $infobuttonpressed == true &amp;&amp; $screenexplode == false&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|explosionsouth]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|RoomF2]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Information centre&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $screenexplode&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in an octagonal room. There are broken, sparkling screens under the ceiling, and a charred control panel below. There are cushioned seats against the walls. There are two doors in the room, leading north and south.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in an octagonal room. In the middle of the room there are four large screens, facing four directions, and below the screens there is a control panel. The screens are turned off. There are cushioned seats against the walls. There are two doors in the room, leading north and south.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Isn't the command centre farther away?|centerfurther]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $screenexplode&gt;&gt;
&lt;span id="tab"&gt;[[Go to the control panel|consoledestroyed]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the control panel|consolef3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $infobuttonpressed == true &amp;&amp; $screenexplode == false&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|explosionnorth]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomF5]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $infobuttonpressed == true &amp;&amp; $screenexplode == false&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|explosionsouth]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|RoomF2]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $f3nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="480" name="centerfurther" tags="" position="10556,741">&lt;span class = 'odys'&gt;ODYS: Yes, it's at the end of the section. You are in the information centre now.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="481" name="explosionnorth" tags="" position="10919,660">As you approach the door you hear a loud, crashing noise and the sound of glass falling to the floor.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: That's not good... I didn't expect that. The info screens have just exploded, Sandra. We're lucky you weren't standing anywhere near. I hope it was just a malfunction, not a sign that the aliens managed to break into our system. We've no time to waste – go now!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $screenexplode to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Go north|RoomF5]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="482" name="RoomF5" tags="" position="10756,503">&lt;&lt;set $meetaliens to true&gt;&gt;
&lt;span class="header"&gt;&lt;center&gt;Corridor by the docking module lock&lt;/center&gt;&lt;/span&gt;\
&lt;&lt;if $alienskilled&gt;&gt;\
&lt;&lt;else&gt;&gt;
You hear a loud noise coming from the north, as if someone was banging on the door.
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $alienskilled&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a corridor. There is a door to the south and a lock to the north. Inside the lock there are four dead, charred bodies of Outworlders and a broken cutter. The corridor turns west by the lock.&lt;/span&gt;


&lt;span id="tab"&gt;[[Go west|RoomF6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomF3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;elseif $f5again&gt;&gt;&lt;span class = 'odys'&gt;ODYS: You are in a corridor. To the south there is a door, and to the north there is the lock in which the aliens are trapped. The corridor turns west.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[What do the aliens look like? How many of them are there?|aliensdescr]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $alienschecked&gt;&gt;
&lt;span id="tab"&gt;[[Go west|RoomF6]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go west|aliensreact]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the southern door|RoomF3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: To the south there is a door, and to the north there is the lock in which the aliens are trapped. The lock has a large window; they can see you, Sandra. Don't be afraid, they can't hurt you now. You have to go west and locate the fuse box.&lt;span&gt;
&lt;&lt;set $f5again to true&gt;&gt;\


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[I don't know if I can do this. They... I…|idontknow]]&lt;/span&gt;

&lt;span id="tab"&gt;[[(say nothing)|saynothing]]&lt;/span&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="483" name="explosionsouth" tags="" position="10901,883">As you approach the door you hear a loud, crashing noise and the sound of glass falling to the floor.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: That's not good... I didn't expect that. The info screens have just exploded, Sandra. We're lucky you weren't standing anywhere near. I hope it was just a malfunction, not a sign that the aliens managed to break into our system. We've no time to waste – go now!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $screenexplode to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Go south|RoomF2]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="484" name="consoledestroyed" tags="" position="10701,830">&lt;span class = 'odys'&gt;ODYS: The panel is now only a pile of charred plastic and wires.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="485" name="consolef3" tags="" position="11084,778">You approach the control panel in the middle of the room. There are several large buttons on it.

&lt;span class = 'odys'&gt;ODYS: This panel was used to switch between camera views, showing different rooms on the station. It's nothing we could make use of now.&lt;/span&gt;


&lt;span id="tab"&gt;[[Press a button|buttonsf3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Step back from the panel|RoomF3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="486" name="buttonsf3" tags="" position="11304,773">The letters on the buttons are raised – you can decipher them with your fingertips.


&lt;span id="tab"&gt;[[Press the button labelled "Command centre"|buttoncommand]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Press the button labelled "Docking platform"|buttondock]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Press the button labelled "Canteen"|buttoncantina]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Press the button labelled "Medical room"|buttonamb]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Press the button labelled "Reactor room"|buttonreactor]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Press the button labelled "Crew quarters – intersection"|buttonintersect]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Step back from the panel|RoomF3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="487" name="buttoncommand" tags="" position="11824,921">&lt;&lt;if $infobuttonpressed == false&gt;&gt;You press the button and sound starts coming from speakers above your head.

&lt;span class = 'odys'&gt;ODYS: I see no reason to play with this, Sandra. You shouldn't waste time.&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $infobuttonpressed == false&gt;&gt;&lt;&lt;set $infobuttonpressed to true&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
A quiet hum of ventilation is coming through the speakers.


&lt;span id="tab"&gt;[[Back|buttonsf3]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="488" name="buttondock" tags="" position="11079,923">&lt;&lt;if $infobuttonpressed == false&gt;&gt;You press the button and sound starts coming from speakers above your head.

&lt;span class = 'odys'&gt;ODYS: I see no reason to play with this, Sandra. You shouldn't waste time.&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $infobuttonpressed == false&gt;&gt;&lt;&lt;set $infobuttonpressed to true&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
You hear the hum of pumps working.


&lt;span id="tab"&gt;[[Back|buttonsf3]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="489" name="buttoncantina" tags="" position="11229,923">&lt;&lt;if $infobuttonpressed == false&gt;&gt;You press the button and sound starts coming from speakers above your head.

&lt;span class = 'odys'&gt;ODYS: I see no reason to play with this, Sandra. You shouldn't waste time.&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $infobuttonpressed == false&gt;&gt;&lt;&lt;set $infobuttonpressed to true&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
You hear the buzzing of broken food machines. &lt;&lt;if $musicon&gt;&gt; You can also hear music.&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;


&lt;span id="tab"&gt;[[Back|buttonsf3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="490" name="buttonamb" tags="" position="11379,923">&lt;&lt;if $infobuttonpressed == false&gt;&gt;You press the button and sound starts coming from speakers above your head.

&lt;span class = 'odys'&gt;ODYS: I see no reason to play with this, Sandra. You shouldn't waste time.&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $infobuttonpressed == false&gt;&gt;&lt;&lt;set $infobuttonpressed to true&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
You hear a monotonous buzz of machinery and a rhythmic, beeping noise.


&lt;span id="tab"&gt;[[Back|buttonsf3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="491" name="buttonreactor" tags="" position="11529,923">&lt;&lt;if $infobuttonpressed == false&gt;&gt;You press the button and sound starts coming from speakers above your head.

&lt;span class = 'odys'&gt;ODYS: I see no reason to play with this, Sandra. You shouldn't waste time.&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $infobuttonpressed == false&gt;&gt;&lt;&lt;set $infobuttonpressed to true&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
A loud, vibrating buzz is coming through the speakers.


&lt;span id="tab"&gt;[[Back|buttonsf3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="492" name="buttonintersect" tags="" position="11679,923">&lt;&lt;if $infobuttonpressed == false&gt;&gt;You press the button and sound starts coming from speakers above your head.

&lt;span class = 'odys'&gt;ODYS: I see no reason to play with this, Sandra. You shouldn't waste time.&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $infobuttonpressed == false&gt;&gt;&lt;&lt;set $infobuttonpressed to true&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
A quiet hum of ventilation is coming through the speakers.


&lt;span id="tab"&gt;[[Back|buttonsf3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="493" name="idontknow" tags="" position="10537,591">&lt;span class = 'odys'&gt;ODYS: I know too well what they did. Hurry up, or they're going to kill you as well. They are trapped, Sandra. You must act before they force their way through the lock.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[How much time do I have?|howmuchtime]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I... understand.|RoomF5]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="494" name="saynothing" tags="" position="10740,341">&lt;span class = 'odys'&gt;ODYS: Be brave, Sandra. We'll get through this.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="495" name="howmuchtime" tags="" position="10322,726">&lt;span class = 'odys'&gt;ODYS: The longer we speak, the less. One of the aliens is trying to start an automatic cutter now.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|RoomF5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="496" name="aliensdescr" tags="" position="10952,498">&lt;span class = 'odys'&gt;ODYS: Does it really matter to you?

…

Fine. Four of them. They're about two metres tall and thinner than an average human. They are wearing full spacesuits with helmets.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF5]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="497" name="RoomF6" tags="" position="10201,329">&lt;&lt;if $f6nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Corridor by the command centre&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $alienskilled&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This corridor leads west, to the command centre. To the east there is the docking module lock. In the northern wall of the corridor there is a narrow door with an electrical warning triangle.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This corridor goes west, to the command centre. To the east there is the docking module lock. In the northern wall of the corridor there is a narrow door with an electrical warning triangle. You must go through that door to replace the fuse.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $f4again&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomF4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|f4firsttime]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $alienskilled == true &amp;&amp; $doortof7open == true&gt;&gt;
&lt;span id="tab"&gt;[[Go west|RoomF7]]&lt;/span&gt;
&lt;&lt;elseif $alienskilled&gt;&gt;
&lt;span id="tab"&gt;[[Go west|openF7]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go west|noopenf7]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go east|RoomF5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Corridor by the command centre&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $alienskilled&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This corridor leads west, to the command centre. To the east there is the docking module lock. In the northern wall of the corridor there is a narrow door with an electrical warning triangle.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: This corridor goes west, to the command centre. To the east there is the docking module lock. In the northern wall of the corridor there is a narrow door with an electrical warning triangle. You must go through that door to replace the fuse.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;timed 2s t8n&gt;&gt;&lt;&lt;if $f4again&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomF4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|f4firsttime]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $alienskilled == true &amp;&amp; $doortof7open == true&gt;&gt;
&lt;span id="tab"&gt;[[Go west|RoomF7]]&lt;/span&gt;
&lt;&lt;elseif $alienskilled&gt;&gt;
&lt;span id="tab"&gt;[[Go west|openF7]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go west|noopenf7]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go east|RoomF5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $f6nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;

</tw-passagedata><tw-passagedata pid="498" name="aliensreact" tags="" position="10969,308">As you approach the lock, the noises get louder and more frantic. You also hear muffled shouts.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Just ignore them, Sandra. They can't do anything to you.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 2s t8n&gt;&gt;You go on, paying no attention to the noises.&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $alienschecked to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 3s t8n&gt;&gt;[[Next|RoomF6]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="499" name="RoomF4" tags="" position="10213,19">&lt;&lt;if $f4nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Room with the fuse box&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in a tiny room. There is a yellow fuse box here. The only door in the room leads south.&lt;/span&gt;

&lt;&lt;if $fuseboxopen&gt;&gt;
&lt;span id="tab"&gt;[[Open the fuse box|openboxf4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Open the fuse box|boxf4closed]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuseboxopen == false &amp;&amp; $selitem == 'wrench'&gt;&gt;
&lt;span id="tab"&gt;[[Use socket wrench to unlock the fuse box door|unlockboxf4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $alienskilled&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|RoomF6]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|noleavef4]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Room with the fuse box&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in a tiny room. There is a yellow fuse box here. The only door in the room leads south.&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;&lt;if $fuseboxopen&gt;&gt;
&lt;span id="tab"&gt;[[Open the fuse box|openboxf4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Open the fuse box|boxf4closed]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuseboxopen == false &amp;&amp; $selitem == 'wrench'&gt;&gt;
&lt;span id="tab"&gt;[[Use socket wrench to unlock the fuse box door|unlockboxf4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $alienskilled&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|RoomF6]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|noleavef4]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $f4nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="500" name="noopenf7" tags="" position="10324,471">The door to the command centre is locked.

&lt;span class = 'odys'&gt;ODYS: First we have to eliminate the aliens. If they get through the lock, no distress call will bring help quickly enough.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF6]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="501" name="RoomF7" tags="" position="9650,389">&lt;&lt;if $f7nofade&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Command centre&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the command centre. It is a large circular room with partially glass walls. There are several control panels here. On the chair in front of the central panel there is a body of a man.&lt;/span&gt;
&lt;&lt;if $coderemind&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span class = 'odys'&gt;ODYS: You've made it, Sandra. Now you only have to input the code using the central panel and confirm it with a button.&lt;/span&gt;
&lt;&lt;set $coderemind to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[This man must be the captain?|askcaptain]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What happens when I've sent the code?|asksendcode]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Do you think more Outworlders may come?|askmorealiens]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go to the central control panel|centralPC]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Leave the command centre|noleavef7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;&lt;else&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Command centre&lt;/center&gt;&lt;/span&gt;\

&lt;span class = 'odys'&gt;ODYS: You are in the command centre. It is a large circular room with partially glass walls. There are several control panels here. On the chair in front of the central panel there is a body of a man.&lt;/span&gt;
&lt;&lt;if $coderemind&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span class = 'odys'&gt;ODYS: You've made it, Sandra. Now you only have to input the code using the central panel and confirm it with a button.&lt;/span&gt;
&lt;&lt;set $coderemind to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[This man must be the captain?|askcaptain]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What happens when I've sent the code?|asksendcode]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Do you think more Outworlders may come?|askmorealiens]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Go to the central control panel|centralPC]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Leave the command centre|noleavef7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $f7nofade to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="502" name="openF7" tags="" position="10196,462">&lt;span class = 'odys'&gt;ODYS: Wait, I'll open the command centre door for you.&lt;/span&gt;

You hear the door slide open.  
&lt;&lt;set $doortof7open to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the door|RoomF7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomF6]]&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="503" name="f4firsttime" tags="" position="10291,212">Suddenly you hear a strange, vibrating noise coming from the corridor.

&lt;span class = 'odys'&gt;ODYS: They've started cutting their way through. Hurry!&lt;/span&gt;
&lt;&lt;set $f4again to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomF4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="504" name="openboxf4" tags="" position="9975,20">You open the box.

&lt;&lt;if $alienskilled&gt;&gt;&lt;span class = odys&gt;ODYS: All key systems are operational. You don't have to switch the fuses again.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: There is a row of four fuses in the top part of the box. You have to replace the first fuse from the left with the third one. The first one is section I main fuse, the third one is for the upper mine level.&lt;/span&gt;

&lt;&lt;if $fuse1takenout&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take out the first fuse|takeoutfuse1]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuse3takenout&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take out the third fuse|takeoutfuse3]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuse3takenout&gt;&gt;\
&lt;&lt;elseif $selitem == 'sandrascard' &amp;&amp; $needcard == true&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard to lever out the third fuse|pickfuse3]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'mulliganscard' &amp;&amp; $needcard == true&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard to lever out the third fuse|pickfuse3]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'sashascard' &amp;&amp; $needcard == true&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard to lever out the third fuse|pickfuse3]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'sashadeskcard' &amp;&amp; $needcard == true&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard to lever out the third fuse|pickfuse3]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'santoscard' &amp;&amp; $needcard == true&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard to lever out the third fuse|pickfuse3]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuse3takenout == true &amp;&amp; $selitem == 'lightfuse'&gt;&gt;
&lt;span id="tab"&gt;[[Place the light fuse in the third holder from the left|burnfuse]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuse1takenout == true &amp;&amp; $selitem == 'heavyfuse'&gt;&gt;
&lt;span id="tab"&gt;[[Place the heavy fuse in the first holder from the left|placefuse]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomF4]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="505" name="boxf4closed" tags="" position="10504,80">The door of the fuse box is locked. There is a round socket in it.


&lt;span id="tab"&gt;[[Back|RoomF4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="506" name="takeoutfuse1" tags="" position="9830,12">You manage to find and take out the first fuse. It's a light cylinder, no longer than your thumb. As you remove it from the holder, you hear a short signal coming from the corridor.

&lt;span class = 'odys'&gt;ODYS: We switched to emergency power. No need to worry about that.&lt;/span&gt;

Item received:  &lt;span class = 'items'&gt;Light fuse&lt;/span&gt;
&lt;&lt;set $lightfuse to true&gt;&gt;&lt;&lt;set $fuse1takenout to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|openboxf4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="507" name="takeoutfuse3" tags="" position="10045,149">You try to remove the fuse, but it's stuck in its holder.

&lt;span class = 'sandra'&gt;SANDRA: I need something to lever it out.&lt;/span&gt;
&lt;&lt;set $needcard to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|openboxf4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="508" name="lightfuse" tags="noreturn" position="1180,511">&lt;span class="items"&gt;A smooth cylinder with contacts on both ends.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="509" name="heavyfuse" tags="noreturn" position="1011,486">&lt;span class="items"&gt;A smooth cylinder with contacts on both ends. It's small, but considerably heavy.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="510" name="pickfuse3" tags="" position="9921,142">You press the keycard between the fuse and the holder. You manage to lever out the fuse. It's a heavy cylinder, no longer than your thumb.

Item received: &lt;span class = 'items'&gt;Heavy fuse&lt;/span&gt;
&lt;&lt;set $heavyfuse to true&gt;&gt;&lt;&lt;set $fuse3takenout to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|openboxf4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="511" name="noleavef4" tags="" position="10401,164">&lt;span class = 'odys'&gt;ODYS: The fuses, Sandra. Hurry if you want to live.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="512" name="unlockboxf4" tags="" position="10674,109">You unlock the fuse box door with the wrench.
&lt;&lt;set $fuseboxopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomF4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="513" name="burnfuse" tags="" position="9706,35">You put the fuse in and immediately hear a loud, cracking noise.

&lt;span class = 'odys'&gt;ODYS: You needn't have done that. It burnt out. Fortunately, we don't need it.&lt;/span&gt;

Item lost: &lt;span class = 'items'&gt;Light fuse&lt;/span&gt;
&lt;&lt;set $lightfuse to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;&lt;&lt;set $achievementelectrician to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|openboxf4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="514" name="placefuse" tags="" position="9729,144">You place the fuse in the holder. 

Item lost: &lt;span class = 'items'&gt;Heavy fuse&lt;/span&gt;
&lt;&lt;set $heavyfuse to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\

&lt;span class = 'odys'&gt;ODYS: All right. I'm redirecting power from mining machines to cables in the lock.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|placefuse2]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="515" name="placefuse2" tags="" position="9582,139">For a moment nothing happens and then you hear a series of cracking noises. When it's over, you can't hear the aliens' cutting tool anymore. An alarm siren sounds.

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: It's over. The plan worked.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $alienskilled to true&gt;&gt;\


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;&lt;&lt;timed 3s t8n&gt;&gt;[[Are they dead?|aretheydead]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 3s t8n&gt;&gt;[[What's that siren for?|whatalarm]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 3s t8n&gt;&gt;[[What about their ship? There may be more aliens aboard.|howaboutship]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 3s t8n&gt;&gt;[[Next|RoomF4]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="516" name="aretheydead" tags="" position="9364,277">&lt;span class = 'odys'&gt;ODYS: The electric shock killed them immediately. They threaten you no longer.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|placefuse3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="517" name="whatalarm" tags="" position="9482,294">&lt;span class = 'odys'&gt;ODYS: It signals a power circuit failure. Don't worry, the life support systems are running on backup power.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|placefuse3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="518" name="howaboutship" tags="" position="9614,245">&lt;span class = 'odys'&gt;ODYS: I've scanned their vessel. I found no traces of living organisms.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|placefuse3]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="519" name="placefuse3" tags="" position="9357,55">&lt;span class = 'odys'&gt;ODYS: We've eliminated the aliens. You can go to the command centre now.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Are they dead?|aretheydead]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What's that siren for?|whatalarm]]&lt;/span&gt;

&lt;span id="tab"&gt;[[What about their ship? There may be more aliens aboard.|howaboutship]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[Next|RoomF4]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="520" name="askcaptain" tags="" position="9522,532">&lt;span class = 'odys'&gt;ODYS: Yes. Robert Marsh has died on post. Had he lived for a few more seconds, he would likely have sent a call for help.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="521" name="asksendcode" tags="" position="9649,539">&lt;span class = 'odys'&gt;ODYS: You'll just have to wait until help arrives. The rescue team should be here in a few hours. All signs are that the worst is over. You're safe now.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="522" name="askmorealiens" tags="" position="9799,539">&lt;span class = 'odys'&gt;ODYS: Maybe, but it's almost certain that the rescue team will be here first.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="523" name="centralPC" tags="" position="9110,457">&lt;span class = 'odys'&gt;ODYS: You just have to input the code and confirm it with the big button to the right of the keyboard. The symbols on the keyboard are raised, so you'll have no problem finding the right keys. The code is "SE1157".&lt;/span&gt;


&lt;span id="tab"&gt;[[Input code "SE1157"|sendcodedial]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomF7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="524" name="sendcodedial" tags="" position="9110,607">You input and confirm the code. You hear a short signal tone.

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: The code was accepted. You've sent a call to the emergency services.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;Congratulations, Sandra. And... thank you. Helping you get here was the only purpose left to me. If you hadn't made it, I would've known I failed. But you, blind as you are, proved that you're tough, resourceful and brave.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'odys'&gt;You've nothing to fear now. Help will be here soon.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[I'm just glad it's over. It didn't turn out as bad as I expected.|endanswer1]]&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;[[I'd like to thank you, too. I couldn't do all this without your help.|endanswer2]]&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;[[I hope they'll hurry. The sooner I leave the station, the better.|endanswer3]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="525" name="noleavef7" tags="" position="9925,535">&lt;span class = 'odys'&gt;ODYS: Remember, you came here to send the distress call.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF7]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="526" name="endanswer1" tags="" position="8952,289">&lt;span class = 'odys'&gt;ODYS: I was aware of the fact that people can show exceptional skill in crisis situations, but only now, thanks to you, I could experience that for myself. "Not as bad as expected" is an understatement. You've done the almost impossible. I will keep this in memory.&lt;/span&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;Now that we've managed to solve all the problems, you deserve rest. You must be exhausted – sit in one of the chairs and take a nap, if you want to. I'll stay alert and wake you up when the time comes.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Sounds like... a good idea. That's funny... I didn't feel tired before, but now I can hardly keep my eyes open.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Good night, Sandra.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;



&lt;center&gt;&lt;&lt;timed 9s t8n&gt;&gt;[[The end|achievements]]&lt;&lt;/timed&gt;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="527" name="endanswer2" tags="" position="8952,419">&lt;span class = 'odys'&gt;ODYS: No need to thank me. I was just doing the job I was programmed to do. But it's kind of you to appreciate that.
Now that we've managed to solve all the problems, you deserve rest. You must be exhausted – sit in one of the chairs and take a nap, if you want to. I'll stay alert and wake you up when the time comes.&lt;/span&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Sounds like... a good idea. That's funny... I didn't feel tired before, but now I can hardly keep my eyes open.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Good night, Sandra.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;center&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[The end|achievements]]&lt;&lt;/timed&gt;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="528" name="endanswer3" tags="" position="8955,545">&lt;span class = 'odys'&gt;ODYS: I understand that, but, if my programming didn't make me think first and foremost about your safety, I'd probably experience something similar to parting regret. You really impressed me with your resourcefulness and determination. I will keep them in memory. Maybe I will even... almost miss you.&lt;/span&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'odys'&gt;Now that we've managed to solve all the problems, you deserve rest. You must be exhausted – sit in one of the chairs and take a nap, if you want to. I'll stay alert and wake you up when the time comes.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Sounds like... a good idea. That's funny... I didn't feel tired before, but now I can hardly keep my eyes open.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Good night, Sandra.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;



&lt;center&gt;&lt;&lt;timed 9s t8n&gt;&gt;[[The end|achievements]]&lt;&lt;/timed&gt;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="529" name="achievements" tags="" position="8657,30">&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class="header"&gt;&lt;center&gt;Achievements&lt;/center&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 3s t8n&gt;&gt;&lt;&lt;if $achievementsight&gt;&gt;
Now I see: Regained vision 
&lt;&lt;else&gt;&gt;
&lt;center&gt;???&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\&lt;&lt;/timed&gt;&gt;
&lt;&lt;timed 4s t8n&gt;&gt;&lt;&lt;if $achievementcoffee&gt;&gt;
A mild addiction: Drank 3 cups of coffee
&lt;&lt;else&gt;&gt;
&lt;center&gt;???&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\&lt;&lt;/timed&gt;&gt;
&lt;&lt;timed 5s t8n&gt;&gt;&lt;&lt;if $achievementexperiment&gt;&gt;
A talented assistant: Completed Dr. Romani's experiment correctly
&lt;&lt;else&gt;&gt;
&lt;center&gt;???&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\&lt;&lt;/timed&gt;&gt;
&lt;&lt;timed 6s t8n&gt;&gt;&lt;&lt;if $achievementdoor&gt;&gt;
Gates of Hell: Found the door leading to the destroyed tank
&lt;&lt;else&gt;&gt;
&lt;center&gt;???&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\&lt;&lt;/timed&gt;&gt;
&lt;&lt;timed 7s t8n&gt;&gt;&lt;&lt;if $cookie == true &amp;&amp; $cookie2eaten == true&gt;&gt;
You can have your cookie and eat it: It's not that difficult, really. You just need two cookies to begin with.
&lt;&lt;elseif $cookie2 == true &amp;&amp; $cookieeaten == true&gt;&gt;
You can have your cookie and eat it: It's not that difficult, really. You just need two cookies to begin with.
&lt;&lt;elseif $cookie == true&gt;&gt;
To have a cookie: Finished the game with a cookie in the inventory
&lt;&lt;elseif $cookie2 == true&gt;&gt;
To have a cookie: Finished the game with a cookie in the inventory
&lt;&lt;elseif $cookieeaten&gt;&gt;
To eat a cookie: Ate a cookie
&lt;&lt;elseif $cookie2eaten&gt;&gt;
To eat a cookie: Ate a cookie
&lt;&lt;else&gt;&gt;
&lt;center&gt;???&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\&lt;&lt;/timed&gt;&gt;
&lt;&lt;timed 8s t8n&gt;&gt;&lt;&lt;if $achievementelectrician&gt;&gt;
I'm no electrician: Burnt the fuse
&lt;&lt;else&gt;&gt;
&lt;center&gt;???&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\&lt;&lt;/timed&gt;&gt;
&lt;&lt;timed 9s t8n&gt;&gt;&lt;&lt;if $achievementgamer&gt;&gt;
A game within a game: Discovered the game running on captain Marsh's computer
&lt;&lt;else&gt;&gt;
&lt;center&gt;???&lt;/center&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;/timed&gt;&gt;

&lt;center&gt;&lt;&lt;timed 11s t8n&gt;&gt;[[Main menu|Main Menu]]&lt;&lt;/timed&gt;&gt;&lt;/center&gt;




</tw-passagedata><tw-passagedata pid="530" name="d14!prologue" tags="" position="12853,5938">&lt;span class = 'sandra'&gt;SANDRA: So, Odys was lying to me. He didn't want me to recover from blindness. I wonder what he is going to do now that I found out he was hiding the truth.&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Odys?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;There is no answer.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I don't like it. I don't know what he's planning, or what he's capable of. And that's the worst part.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 6s t8n&gt;&gt;[[Next|RoomD14!]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="531" name="checkcabind14!" tags="" position="12659,6142">&lt;span class = 'sandra'&gt;SANDRA: To recover from blindness, I only had to use this machine. Odys knew that and tried to keep me away from the medical room.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD14!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="532" name="checkdeskd14!" tags="" position="12840,6087">&lt;&lt;if $datacylinderin&gt;&gt;On the desk there is a computer monitor and a rack which holds six small, cylindrical objects.
&lt;&lt;else&gt;&gt;On the desk there is a computer monitor and a kind of rack, in which five small, cylindrical objects are placed. There's a slot in the rack for a sixth object.
&lt;&lt;/if&gt;&gt;\


&lt;&lt;if $selitem == 'cylinder'&gt;&gt;
&lt;span id="tab"&gt;[[Place the cylinder in the rack|cylinderind14!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the cylinders|lookatcylinders]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the computer|lookatcomputer]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD14!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="533" name="cylinderind14!" tags="" position="12994,6045">You place the cylinder in the slot. It fits perfectly.
&lt;&lt;set $datacylinderin to true&gt;&gt;&lt;&lt;set $cylinder to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkdeskd14!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="534" name="lookatcylinders" tags="" position="12807,6244">&lt;&lt;if $datacylinderin == true&gt;&gt;The cylinders are data storage devices, labelled with names of the crew members. Under each name the words "Medical record" are written. The last cylinder is labelled "Sandra Nowicki".
&lt;&lt;else&gt;&gt;The cylinders are data storage devices, labelled with names of the crew members. Under each name the words "Medical record" are written. The cylinder labelled "Sandra Nowicki" is missing.
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|checkdeskd14!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="535" name="lookatcomputer" tags="" position="12954,6246">The computer is not working. It seems to have no power.


&lt;span id="tab"&gt;[[Back|checkdeskd14!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="536" name="RoomD10!" tags="" position="12301,5967">&lt;span class="header"&gt;&lt;center&gt;Section II southern corridor, the breach&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D10.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor. Along the western wall there is a gaping breach in the floor. Down in the breach you can see thick, sparking wires with damaged insulation. In the eastern wall of the corridor there is a door with a red cross sign next to it. The breach blocks access to the door in the western wall.


&lt;span id="tab"&gt;[[Go north|RoomD9!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomD11!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD14!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="537" name="RoomD9!" tags="" position="12309,5716">&lt;span class="header"&gt;&lt;center&gt;Section II southern corridor, northern part&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D9.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor which leads south. To the north there is a lock. There are doors in the eastern wall and in the western wall of the corridor.

&lt;&lt;if $selitem == 'sandrascard' &amp;&amp; $d9seeopen == false &amp;&amp; $lockedbyodys == true&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard to open the lock|unlockd8!]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'mulliganscard' &amp;&amp; $d9seeopen == false &amp;&amp; $lockedbyodys == true&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard to open the lock|unlockd8!]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'sashascard' &amp;&amp; $d9seeopen == false &amp;&amp; $lockedbyodys == true&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard to open the lock|unlockd8!]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'sashadeskcard' &amp;&amp; $d9seeopen == false &amp;&amp; $lockedbyodys == true&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard to open the lock|unlockd8!]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'santoscard' &amp;&amp; $d9seeopen == false &amp;&amp; $lockedbyodys == true&gt;&gt;
&lt;span id="tab"&gt;[[Use the keycard to open the lock|unlockd8!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go south|RoomD10!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomD12!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD13!]]&lt;/span&gt;
&lt;&lt;if $d9seeopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the lock|RoomD8!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the lock|d8!locked]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="538" name="RoomD11!" tags="" position="12309,6252">&lt;span class="header"&gt;&lt;center&gt;Section II southern corridor, southern part&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D11.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor which leads north. The way south is blocked by a pile of rubble.


&lt;span id="tab"&gt;[[Look at the rubble|lookatrubble]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomD10!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="539" name="lookatrubble" tags="" position="12309,6402">&lt;span class = 'sandra'&gt;SANDRA: The supports collapsed like a house of cards. The explosion must have been really powerful.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD11!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="540" name="RoomD12!" tags="" position="12042,5701">&lt;span class="header"&gt;&lt;center&gt;Sandra's room&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $comm&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D12B.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;else&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D12A.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $comm&gt;&gt;You are in your own room, which is small and looks impersonal. On the desk there is a computer monitor and some handwritten notes. The door is in the eastern wall.
&lt;&lt;else&gt;&gt;You are in your own room, which is small and looks impersonal. On the desk there is a computer monitor, a portable comm device, and some handwritten notes. The door is in the eastern wall.
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the notes on the desk|lookatnotes]]&lt;/span&gt;
&lt;&lt;if $comm&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take the comm device|pickupcomm]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the computer|lookatownpc]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD9!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="541" name="RoomD13!" tags="" position="12649,5721">&lt;span class="header"&gt;&lt;center&gt;Dr. Santos' room&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D13.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

A giant aquarium takes up one corner of the room. Inside some blue, luminescent jellyfish are floating. Other than that, the room is furnished modestly. The only door leads west.


&lt;span id="tab"&gt;[[Look at the desk|lookatsantosdesk]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the aquarium|lookatfishtank]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomD9!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="542" name="RoomD8!" tags="" position="12287,5202">&lt;span class="header"&gt;&lt;center&gt;Central intersection&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $coffeecartlocation == 'D8'&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D8A.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;else&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D8B.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $coffeecartlocation == 'D8'&gt;&gt;You are in the central intersection. There are four airlocks here, leading to four corridors. In the middle of the intersection there is a coffee machine on a cart. High on the wall, near the eastern lock, there is an open metal hatch.
&lt;&lt;else&gt;&gt;You are in the intersection. There are four airlocks here, leading to four corridors. High on the wall, near the eastern lock, there is an open metal hatch.
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $coffeecartlocation == 'D8'&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartdsee]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $selitem == 'explosives' &amp;&amp; $badrobotchecked == true &amp;&amp; $coffeecartlocation == 'D8'&gt;&gt;
&lt;span id="tab"&gt;[[Place the explosives on the cart|place explosives]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the eastern lock|RoomD3!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern lock|RoomD9!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western lock|RoomD19!]]&lt;/span&gt;
&lt;&lt;if $badrobotdestroyed&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern lock|RoomD15!]]&lt;/span&gt;
&lt;&lt;elseif $badrobotchecked&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern lock|wontenterd15!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern lock|robotshoot]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Get to the laboratory through the ventilation duct|labnotchute]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;





</tw-passagedata><tw-passagedata pid="543" name="d8!locked" tags="" position="12425,5607">The lock is blocked.

&lt;span class = 'sandra'&gt;SANDRA: Odys must have locked it. What do I do now?&lt;/span&gt;
&lt;&lt;set $lockedbyodys to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD9!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="544" name="unlockd8!" tags="" position="12491,5779">You put the keycard to the panel. The lock opens.

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: It worked?! I thought Odys had me trapped here. Looks like he can't disable the keycards. Ah-ha!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Don't bother locking the doors, Odys. I'll open them anyway!&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'sandra'&gt;…&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: He doesn't answer.&lt;/span&gt;
&lt;&lt;set $d9seeopen to true&gt;&gt;\&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[Go through the lock|RoomD8!]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[Back|RoomD9!]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="545" name="lookatnotes" tags="" position="11892,5851">&lt;span class = 'sandra'&gt;SANDRA: My position as Doctor Romani's assistant meant I had to study a lot. I wonder what she thought of my work.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD12!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="546" name="pickupcomm" tags="" position="12042,5851">&lt;span class = 'sandra'&gt;SANDRA: I was told to take it with me whenever I went to the exterior module. As usual I forgot.&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Portable comm device&lt;/span&gt;
&lt;&lt;set $comm to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD12!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="547" name="lookatownpc" tags="" position="12192,5851">&lt;span class = 'sandra'&gt;SANDRA: Gas pockets, lodes of metals, physico-chemical properties of different rocks... more work stuff.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD12!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="548" name="lookatsantosdesk" tags="" position="12650,5566">There's nothing but a computer on the desk. It's turned off.


&lt;span id="tab"&gt;[[Back|RoomD13!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="549" name="lookatfishtank" tags="" position="12771,5687">&lt;&lt;if $darkcorridordiscovered&gt;&gt;\
&lt;&lt;if $jellytaken&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Useful creatures.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD13!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: The light these jellyfish emit is quite strong. I could go down to the dark tunnels if I carried one of them with me.&lt;/span&gt;

&lt;&lt;if $selitem == 'helmet'&gt;&gt;
&lt;span id="tab"&gt;[[Catch a jellyfish|capturejelly]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Catch a jellyfish|nocapturejelly]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD13!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Doctor Santos' jellies and me were the only ones to survive the explosion.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD13!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="550" name="capturejelly" tags="" position="12901,5689">You manage to catch one of the jellies with the helmet. The disturbed creature starts to glow even brighter.

&lt;span class = 'sandra'&gt;SANDRA: It sure is heavy…&lt;/span&gt;

Holding the helmet with both hands, you head to the boiler room with the trapdoor.  
&lt;&lt;set $jellytaken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomD6!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="551" name="nocapturejelly" tags="" position="12861,5525">&lt;span class = 'sandra'&gt;SANDRA: I need some vessel in which I could keep the jelly.&lt;/span&gt; 
&lt;&lt;set $needhelmet to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD13!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="552" name="RoomD6!" tags="" position="12903,4751">&lt;span class="header"&gt;&lt;center&gt;Boiler room&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D6.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

Pipes, running both vertical and horizontal, take up most of the space in the room. You notice a valve panel on the wall. In the north-eastern corner of the room, next to a pipe stack going through the floor, there is a trapdoor. The only door in the room leads south.


&lt;span id="tab"&gt;[[Examine the valves|lookatvalves]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the trapdoor|hatchtoe]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD3!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="553" name="helmet" tags="noreturn" position="1364,623">&lt;span class="items"&gt;A massive helmet taken from a space suit.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="554" name="destroyrobot" tags="" position="12804,4998">&lt;&lt;if $explosivesoncart == true &amp;&amp; $selitem == 'lighter'&gt;&gt;You program the lift to section I as the cart's destination, then light the fuse with Jim Mulligan's lighter and dash behind the southern lock. You hear the cart going along the northern corridor. Then there are gunshots and, a few seconds later, a powerful explosion. The gunfire dies down.

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I think it worked…&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $badrobotdestroyed to true&gt;&gt;&lt;&lt;set $coffeecartlocation to 0&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Next|RoomD8!]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;elseif $explosivesoncart&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I need something to light the fuse with.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD8!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I can program the cart to go to where the robot is. But I'd have to place something that could destroy the robot on the cart first…&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD8!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="555" name="RoomD3!" tags="" position="12834,5204">&lt;span class="header"&gt;&lt;center&gt;Section II eastern corridor, western part&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D3.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor which leads east. There are two doors here, in the north and in the south, and a lock in the west.


&lt;span id="tab"&gt;[[Go east|RoomD2!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the lock|RoomD8!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD6!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD7!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="556" name="RoomD19!" tags="" position="11889,5201">&lt;span class="header"&gt;&lt;center&gt;Section II western corridor, eastern part&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D19.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor which leads west. There are two doors here, in the north and in the south. In the east there is a lock.


&lt;span id="tab"&gt;[[Go west|RoomD20!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD21!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD22!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the lock|RoomD8!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="557" name="RoomD15!" tags="" position="12287,4854">&lt;span class="header"&gt;&lt;center&gt;Section II northern corridor, southern part&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D15.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor which leads north. To the south there is a lock. The eastern wall of the corridor is iced over.


&lt;span id="tab"&gt;[[Go north|RoomD16!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the lock|RoomD8!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="558" name="wontenterd15!" tags="" position="12450,5089">&lt;span class = 'sandra'&gt;SANDRA: If I go there now, the robot will shoot me.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD8!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="559" name="robotshoot" tags="" position="12452,4916">As you step through the northern lock, you see a flash of light far in the corridor and hear a gunshot. You jump back and hit the button to close the lock.

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: That was close. That robot at the end of the corridor. It's armed. It ignored me earlier... Odys must be controlling it.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 4s t8n&gt;&gt;&lt;span id="tab"&gt;&lt;span class = 'sandra'&gt;[[Odys? Why are you doing this?|whyrobotshoot]]&lt;/span&gt;&lt;/span&gt;

&lt;span id="tab"&gt;[[(say nothing)|shootsilence]]&lt;/span&gt;&lt;&lt;/timed&gt;&gt;
</tw-passagedata><tw-passagedata pid="560" name="whyrobotshoot" tags="" position="12664,5127">&lt;span class = 'odys'&gt;ODYS: Can't make it out yourself? Well, I'm not going to tell you.&lt;/span&gt;

&lt;&lt;timed 1s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Odys?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;…&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'sandra'&gt;He's definitely not in the mood for a conversation.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'sandra'&gt;If I want to get to the control centre, I have to distract or destroy that robot first. Good thing it's immobilised...&lt;/span&gt;
&lt;&lt;if $sashasearched&gt;&gt;
&lt;span class = 'sandra'&gt;Sasha had a gun... but I can't get to his office now. I need a different plan.&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $badrobotchecked to true&gt;&gt;\


&lt;span id="tab"&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[Back|RoomD8!]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="561" name="shootsilence" tags="" position="12652,5004">You are sure Odys is responsible for the attack, but you don't call out to him.

&lt;span class = 'sandra'&gt;SANDRA: If I want to get to the control centre, I have to distract or destroy that robot first. Good thing it's immobilised...&lt;/span&gt;
&lt;&lt;if $sashasearched&gt;&gt;
&lt;span class = 'sandra'&gt;Sasha had a gun... but I can't get to his office now. I need a different plan.&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $badrobotchecked to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD8!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="562" name="labnotchute" tags="" position="12550,5252">&lt;span class = 'sandra'&gt;SANDRA: The laboratory door is unlocked. I don't need to crawl through the duct.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD8!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="563" name="place explosives" tags="" position="12704,5321">You place the explosives between the coffee machine and the raised edge of the cart.

Item lost: &lt;span class = 'items'&gt;Explosives&lt;/span&gt;
&lt;&lt;set $explosives to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;&lt;&lt;set $explosivesoncart to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD8!]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="564" name="lighter" tags="noreturn" position="830,505">&lt;span class="items"&gt;A shiny, metal lighter. It works, even though it spent some time in the drain.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="565" name="explosives" tags="noreturn" position="997,633">&lt;span class="items"&gt;This smooth, brick-shaped object has a long fuse coming out of it.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="566" name="programcartdsee" tags="noreturn" position="12629,4717">&lt;&lt;if $coffeecartlocation == 'D8'&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the central intersection|$return][$coffeecartlocation to 'D8']]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D22'&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the canteen|$return][$coffeecartlocation to 'D22']]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D7'&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go to the laboratory|$return][$coffeecartlocation to 'D7']]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $coffeecartlocation == 'D8' &amp;&amp; $badrobotchecked == true &amp;&amp; $badrobotdestroyed == false&gt;&gt;
&lt;span id="tab"&gt;[[Go to the lift to section I|destroyrobot]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|$return]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="567" name="RoomD2!" tags="" position="13167,5210">&lt;span class="header"&gt;&lt;center&gt;Section II eastern corridor, eastern part&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D2.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor which leads west. There are three doors here, in the north, in the east and in the south.


&lt;span id="tab"&gt;[[Go west|RoomD3!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD4!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD1!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD5!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="568" name="RoomD7!" tags="" position="13009,5444">&lt;span class="header"&gt;&lt;center&gt;Dr. Romani's laboratory&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $coffeecartlocation == 'D7'&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D7A.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;else&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D7B.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $coffeecartlocation == 'D7'&gt;&gt;You are in the laboratory. The laboratory machinery is turned off. On a chair by the desk you see the body of Doctor Romani. On the long table there are various handwritten notes and some glassware. There are also lab cabinets here, housing various reagents. Near the wall there is a coffee machine on a cart. The door is in the northern wall of the room.
&lt;&lt;else&gt;&gt;You are in the laboratory. The laboratory machinery is turned off. On a chair by the desk you see the body of Doctor Romani. On the long table there are various handwritten notes and some glassware. There are also lab cabinets here, housing various reagents. The door is in the northern wall of the room.
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the machinery|lookatlabeq]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the body|lookatromani]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the reagents|lookatreagents]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the computer|lookatromanipc]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the notes|lookatromaninotes]]&lt;/span&gt;
&lt;&lt;if $coffeecartlocation == 'D7'&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartdsee]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the northern door|RoomD3!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="569" name="RoomD4!" tags="" position="13175,4977">&lt;span class="header"&gt;&lt;center&gt;Bathroom&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D4.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in the bathroom. You are standing on a broad floor grate, which covers the drain. You see bathroom stalls to the left and a row of washbasins in front of you. You hear water dripping from a cracked pipe above. The air smells slightly of cigarette smoke. The only door is in the southern wall of the room.


&lt;span id="tab"&gt;[[Examine the source of the smell|smelld4!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Search the stalls|cabinsd4!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look into the drain|draind4!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD2!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="570" name="RoomD1!" tags="" position="13469,5220">&lt;span class="header"&gt;&lt;center&gt;Lift room&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D1.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

In the middle of this room there is a lift shaft. Pipe stacks are running under the ceiling and by the walls. The only door leads west.


&lt;span id="tab"&gt;[[Go down in the lift|liftd1!]]&lt;/span&gt;
&lt;&lt;if $lifttofix == true &amp;&amp; $fusesfromd1taken == false&gt;&gt;
&lt;span id="tab"&gt;[[Remove the fuses from the lift control panel|takefusesd1!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the western door|RoomD2!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="571" name="RoomD5!" tags="" position="13245,5450">&lt;span class="header"&gt;&lt;center&gt;Storage room&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $helmettaken&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D5B.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;else&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D5A.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $helmettaken&gt;&gt;You are in the storage room. Metal containers are standing against the walls. Near one of the containers there is a space suit without a helmet. The only door in this room leads north.
&lt;&lt;else&gt;&gt;You are in the storage room. Metal containers are standing against the walls. Near one of the containers there is a space suit, complete with a helmet. The only door in this room leads north.
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the containers|lookatcontainers]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the space suit|lookatsuit]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD2!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;


</tw-passagedata><tw-passagedata pid="572" name="liftd1!" tags="" position="13655,5169">You press the button to call the lift, but nothing happens.

&lt;&lt;if $fusesfromd1taken&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: The lift won't work without the fuses.&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Odys must have blocked it.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD1!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="573" name="takefusesd1!" tags="" position="13679,5355">You open the lift control panel and remove two fuses.

Item received: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;

&lt;span class = 'sandra'&gt;SANDRA: This should make the lift to section I work.&lt;/span&gt;
&lt;&lt;set $fusesfromd1taken to true&gt;&gt;\
&lt;&lt;set $fuse1d to true&gt;&gt;\
&lt;&lt;set $fuse2d to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD1!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="574" name="smelld4!" tags="" position="13030,4909">The smell isn't coming from one particular place. It's faint, but omnipresent.

&lt;span class = 'sandra'&gt;SANDRA: Jim Mulligan used to smoke in the bathroom... he even lost his lighter here. He was so mad about that…&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD4!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="575" name="cabinsd4!" tags="" position="13015,5062">You peer into the stalls, but you find nothing unusual.


&lt;span id="tab"&gt;[[Back|RoomD4!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="576" name="draind4!" tags="" position="13409,4880">&lt;&lt;if $lighter&gt;&gt;There's nothing but still, murky water in the drain.


&lt;span id="tab"&gt;[[Back|RoomD4!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You look through the grate and notice a shiny, silver lighter at the bottom of the drain, about one meter below the grate.
&lt;&lt;if $useking&gt;&gt;There is a white chess king on the floor next to the grate. You could use it to make a fishing rod, if you find some string.
&lt;&lt;elseif $usebandage&gt;&gt;There is a roll of bandage on the floor next to the grate. You could use it to make a fishing rod, if you find something to use as a hook.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Reach into the drain|draincantreach]]&lt;/span&gt;
&lt;&lt;if $selitem == 'king' &amp;&amp; $useking == false &amp;&amp; $usebandage == false&gt;&gt;
&lt;span id="tab"&gt;[[Use the chess king to fish out the lighter|chooseking]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'bandage' &amp;&amp; $useking == false &amp;&amp; $usebandage == false&gt;&gt;
&lt;span id="tab"&gt;[[Use the bandage to fish out the lighter|choosebandage]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $selitem == 'king' &amp;&amp; $usebandage == true &amp;&amp; $lighter == false&gt;&gt;
&lt;span id="tab"&gt;[[Tie the chess king to the bandage and lower it into the drain|picklighter]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'bandage' &amp;&amp; $useking == true &amp;&amp; $lighter == false&gt;&gt;
&lt;span id="tab"&gt;[[Tie the chess king to the bandage and lower it into the drain|picklighter]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD4!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="577" name="draincantreach" tags="" position="13409,5030">The grate is too dense to put your hand through.


&lt;span id="tab"&gt;[[Back|draind4!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="578" name="chooseking" tags="" position="13659,4944">&lt;span class = 'sandra'&gt;SANDRA: There's a magnet in the base of the piece. I only need something to tie the piece to.&lt;/span&gt;

Item lost: &lt;span class = 'items'&gt;Chess king&lt;/span&gt;
&lt;&lt;set $king to false&gt;&gt;&lt;&lt;set $useking to true&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|draind4!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="579" name="choosebandage" tags="" position="13632,4770">&lt;span class = 'sandra'&gt;SANDRA: I can lower it into the drain like a fishing rod, but I need something to use in place of a hook.&lt;/span&gt;

Item lost: &lt;span class = 'items'&gt;Bandage&lt;/span&gt;
&lt;&lt;set $bandage to false&gt;&gt;&lt;&lt;set $usebandage to true&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|draind4!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="580" name="picklighter" tags="" position="13860,4872">The metal lighter sticks to the magnet in the base of the chess piece. You pull out the improvised fishing rod with your catch.

Item received: &lt;span class = 'items'&gt;Lighter&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Chess king&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Bandage&lt;/span&gt;
&lt;&lt;set $lighter to true&gt;&gt;&lt;&lt;set $king to true&gt;&gt;&lt;&lt;set $bandage to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD4!]]&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="581" name="lookatcontainers" tags="" position="13095,5318">&lt;span class = 'sandra'&gt;SANDRA: Covered with dust... and sealed tight. I can't open them.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD5!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="582" name="lookatsuit" tags="" position="13413,5463">&lt;&lt;if $helmettaken&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: The space suit has no helmet... now I can't use it even if I wanted to.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD5!]]&lt;/span&gt;
&lt;&lt;elseif $needhelmet&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: The helmet has a transparent visor. It would make a nice temporary tank for a jellyfish.&lt;/span&gt;

You take the helmet off the space suit.

Item received: &lt;span class = 'items'&gt;Helmet&lt;/span&gt;
&lt;&lt;set $helmet to true&gt;&gt;&lt;&lt;set $helmettaken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD5!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: It's a space suit to put on before going out to the surface. I have no reason to go out.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD5!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="583" name="lookatlabeq" tags="" position="13187,5719">&lt;span class = 'sandra'&gt;SANDRA: The machinery turned off once the experiment was completed. I don't need to use it again.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD7!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="584" name="lookatromani" tags="" position="13457,5590">The woman's face is calm.

&lt;span class = 'sandra'&gt;SANDRA: Highly concentrated vulcanium kills really fast. Doctor Romani didn't suffer.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD7!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="585" name="lookatreagents" tags="" position="13317,5630">&lt;&lt;if $badrobotchecked&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I'm sure some of these substances would eat through the robot. But I can't just walk there and pour acid on it.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD7!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Many substances, used for experiments. Some of them really dangerous.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD7!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="586" name="lookatromanipc" tags="" position="13321,5822">There is a detailed description of a planned experiment on the screen.

&lt;span class = 'sandra'&gt;SANDRA: Doctor Romani was always thorough in her research.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD7!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="587" name="lookatromaninotes" tags="" position="13429,5720">Brief, handwritten notes, mostly about rocks forming different areas of the planetoid.

&lt;span class = 'sandra'&gt;SANDRA: Some of these are mine. If what happened hadn't happened, I would be filling more paperwork now.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD7!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="588" name="lookatvalves" tags="" position="12796,4641">&lt;span class = 'sandra'&gt;SANDRA: Ventilation, heating... better not touch that.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD6!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="589" name="hatchtoe" tags="" position="13045,4659">There's a sign warning of explosives above the trapdoor, and a switch next to it.
&lt;&lt;if $hatchtoeopen&gt;&gt;

&lt;span id="tab"&gt;[[Flip the switch above the trapdoor|presslight]]&lt;/span&gt;
&lt;&lt;if $explosivestaken&gt;&gt;
&lt;span id="tab"&gt;[[Go down|nobacktoe]]&lt;/span&gt;
&lt;&lt;elseif $jellytaken&gt;&gt;
&lt;span id="tab"&gt;[[Go down|RoomE1!]]&lt;/span&gt;
&lt;&lt;elseif $lighter&gt;&gt;
&lt;span id="tab"&gt;[[Go down|lighternouse]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go down|toodark]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;

&lt;span id="tab"&gt;[[Open the trapdoor|openhatchtoe]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD6!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="590" name="presslight" tags="" position="12978,4509">You flip the switch, but nothing happens. Lights in the tunnels below must be out of order.


&lt;span id="tab"&gt;[[Back|hatchtoe]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="591" name="RoomE1!" tags="" position="13821,4492">&lt;span class="header"&gt;&lt;center&gt;Under the trapdoor&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/E1.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a dark tunnel which branches north and east. There are narrow stairs here, going up. There is a sign on the wall by the entrance to the northern tunnel. You hear sounds of drilling and pounding coming from the eastern tunnel. Some barely visible shapes are moving about in the darkness there.


&lt;span id="tab"&gt;[[Look at the sign|platee1!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go east|bewarerobots]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|roadtoe2!]]&lt;/span&gt;
&lt;&lt;if $explosivestaken&gt;&gt;
&lt;span id="tab"&gt;[[Climb the stairs|RoomD6!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Climb the stairs|needexplosives]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;


</tw-passagedata><tw-passagedata pid="592" name="lighternouse" tags="" position="13216,4605">&lt;span class = 'sandra'&gt;SANDRA: I need some source of light if I want go down to the tunnels. Wandering blindly around the explosives storage wouldn't be very smart. Same goes for bringing open fire – I can't use the lighter there.&lt;/span&gt;
&lt;&lt;set $darkcorridordiscovered to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|hatchtoe]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="593" name="toodark" tags="" position="13215,4756">&lt;span class = 'sandra'&gt;SANDRA: I need some source of light if I want go down to the tunnels. Wandering blindly around the explosives storage wouldn't be very smart.&lt;/span&gt;
&lt;&lt;set $darkcorridordiscovered to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|hatchtoe]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="594" name="openhatchtoe" tags="" position="13403,4665">You open the trapdoor. You're looking at the top of narrow stairs, which lead down, into complete darkness.
&lt;&lt;set $hatchtoeopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|hatchtoe]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="595" name="nobacktoe" tags="" position="13045,4799">&lt;span class = 'sandra'&gt;SANDRA: I have no reason to go back there.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD6!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="596" name="RoomD20!" tags="" position="11597,5217">&lt;span class="header"&gt;&lt;center&gt;Section II western corridor, western part&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D20.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor which leads east. There are three doors here, in the north, in the west and in the south.

&lt;&lt;if $sasharoomopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|RoomD24!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the northern door|d24!closed]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $mulliganroomopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|RoomD23!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the southern door|d23!closed]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $marshroomopen&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|RoomD25!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the western door|d25!closed]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go east|RoomD19!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="597" name="RoomD21!" tags="" position="11895,5006">&lt;span class="header"&gt;&lt;center&gt;Gym&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D21.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in the gym. You see various training equipment. The only door in the room leads south.


&lt;span id="tab"&gt;[[Examine the training equipment|lookattraineq]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD19!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="598" name="RoomD22!" tags="" position="11890,5431">&lt;span class="header"&gt;&lt;center&gt;Canteen&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $coffeecartlocation == 'D22'&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D22A.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;else&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D22B.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $coffeecartlocation == 'D22'&gt;&gt;A long table takes up the central part of this room. Near the edge of the table there is a small music player. Against the southern wall there are some food machines, all out of order, and a coffee machine on a cart. The canteen door leads north.
&lt;&lt;else&gt;&gt;A long table takes up the central part of this room. Near the edge of the table there is a small music player. Against the southern wall there are some food machines, all out of order. The canteen door leads north.
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $musicon&gt;&gt;You hear music coming from the player on the table. A tiny robot is dancing madly on the floor.
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Examine the machines against the wall|lookatfoodmachines]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the table|lookatfoodtable]]&lt;/span&gt;
&lt;&lt;if $coffeecartlocation == 'D22'&gt;&gt;
&lt;span id="tab"&gt;[[Program the cart|programcartdsee]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Examine the music player|lookatradio]]&lt;/span&gt;
&lt;&lt;if $musicon&gt;&gt;
&lt;span id="tab"&gt;[[Look at the dancing robot|lookatdancingrobot]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the northern door|RoomD19!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="599" name="RoomD24!" tags="" position="11612,4987">&lt;span class="header"&gt;&lt;center&gt;Sasha Zinov's room&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D24.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in Sasha's Zinov room. It's clean and tidy. Only on the bed there is an open book, spine up. There is a bookshelf on the wall. On the desk there is a computer monitor. The only door leads south.


&lt;span id="tab"&gt;[[Look at the bookshelf|lookatsashabooks]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the book on the bed|lookbookonbed]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the computer monitor|lookatsasharoompc]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the southern door|RoomD20!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="600" name="d24!closed" tags="" position="11475,5051">The door is locked.

&lt;span class = 'sandra'&gt;SANDRA: This is the door to Sasha Zinov's room.&lt;/span&gt;

&lt;&lt;if $selitem == 'sashascard'&gt;&gt;
&lt;span id="tab"&gt;[[Use Sasha's keycard to unlock the door|unlockd24!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD20!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="601" name="unlockd24!" tags="" position="11387,4941">You put Sasha's keycard to the panel. The door opens.
&lt;&lt;set $sasharoomopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the door|RoomD24!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD20!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="602" name="RoomD23!" tags="" position="11292,5521">&lt;span class="header"&gt;&lt;center&gt;Jim Mulligan's room&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D23.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a small room. There is a bed, a bookshelf and a computer desk here. A portable communication device is lying on the desk. The only door leads north.


&lt;span id="tab"&gt;[[Look at the bookshelf|lookatmulliganbooks]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the computer|lookatpcmulliganroom]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the comm device|lookatmulcomm]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomD20!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="603" name="d23!closed" tags="" position="11445,5332">The door is locked.

&lt;span class = 'sandra'&gt;SANDRA: This is the door to Mulligan's room.&lt;/span&gt;

&lt;&lt;if $selitem == 'mulliganscard'&gt;&gt;
&lt;span id="tab"&gt;[[Use Mulligan's keycard to unlock the door|unlockd23!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD20!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="604" name="unlockd23!" tags="" position="11445,5482">You put Mulligan's keycard to the panel. The door opens.
&lt;&lt;set $mulliganroomopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Go through the door|RoomD23!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD20!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="605" name="RoomD25!" tags="" position="11145,5226">&lt;span class="header"&gt;&lt;center&gt;Robert Marsh's room&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D25.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a large room. To the right from the door there is a bed, a wardrobe and a table. To the left from the door there is a computer desk. The computer on the desk is switched on and emits disturbing sounds of explosions and torn metal. The only door is in the eastern wall of the room.


&lt;span id="tab"&gt;[[Examine the wardrobe and the table|marshstuff]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the computer|gamerpc]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD20!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="606" name="d25!closed" tags="" position="11294,5261">The door is locked.

&lt;span class = 'sandra'&gt;SANDRA: This is the door to captain Marsh's room. There is no way to open it.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD20!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="607" name="lookattraineq" tags="" position="11972,4877">&lt;span class = 'sandra'&gt;SANDRA: They told us to exercise on a daily basis. You need that to stay fit when you live on a planetoid...&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD21!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="608" name="lookatfoodmachines" tags="" position="11767,5304">&lt;span class = 'sandra'&gt;SANDRA: Nothing's working here...&lt;/span&gt;


&lt;span id="tab"&gt;[[Examine the food dispenser|lookatcookingmach]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the tableware dispenser|lookatdishmach]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the machine for returning used tableware|lookatwashingmach]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD22!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="609" name="lookatcookingmach" tags="" position="11617,5454">Whichever button you press, nothing happens.


&lt;span id="tab"&gt;[[Back|lookatfoodmachines]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="610" name="lookatdishmach" tags="" position="11767,5454">&lt;&lt;if $spoon&gt;&gt;The dispenser is out of order.


&lt;span id="tab"&gt;[[Back|lookatfoodmachines]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;The dispenser is out of order. There is a teaspoon on its tray.


&lt;span id="tab"&gt;[[Pick up the teaspoon|takespoon!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|lookatfoodmachines]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="611" name="lookatwashingmach" tags="" position="12020,5454">The machine has no power.


&lt;span id="tab"&gt;[[Back|lookatfoodmachines]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="612" name="takespoon!" tags="" position="11670,5562">Item received: &lt;span class = 'items'&gt;Teaspoon&lt;/span&gt;
&lt;&lt;set $spoon to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|lookatfoodmachines]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="613" name="lookatfoodtable" tags="" position="11890,5581">There are remains of a meal on the table – some mashed potatoes and a sausage.


&lt;span id="tab"&gt;[[Back|RoomD22!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="614" name="lookatradio" tags="" position="11640,5791">&lt;&lt;if $musicon&gt;&gt;The music player is on.


&lt;span id="tab"&gt;[[Turn off the player|musicoff!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD22!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;The music player is off.


&lt;span id="tab"&gt;[[Turn on the player|musicon!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD22!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="615" name="musicoff!" tags="" position="11565,5941">You turn off the player. The music stops. You hear a scratching noise and see the little robot running to its hiding place.
&lt;&lt;set $musicon to false&gt;&gt;\


&lt;span id="tab"&gt;[[Back|lookatradio]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="616" name="musicon!" tags="" position="11715,5941">You turn on the device. It starts playing an energising tune.

&lt;&lt;set $musicon to true&gt;&gt;\
&lt;&lt;if $cookie2taken&gt;&gt;The funny little robot emerges from behind the machines again and starts wiggling to the music.


&lt;span id="tab"&gt;[[Back|lookatradio]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
Suddenly you hear a quiet scratching noise. A tiny service robot comes from behind one of the canteen machines and marches in the direction of the music player. It stops by the table and starts wiggling to the music. It's holding a foil-wrapped cake in its manipulator.


&lt;span id="tab"&gt;[[Take the cookie|takecookie2!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Eat the cookie|eatcookie2!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|lookatradio]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="617" name="takecookie2!" tags="" position="11640,6091">You bend down and take the foil-wrapped cookie from the robot's manipulator. The little robot takes no notice – he continues jumping to the rhythm.

Item received: &lt;span class = 'items'&gt;Cookie&lt;/span&gt;
&lt;&lt;set $cookie2 to true&gt;&gt;&lt;&lt;set $cookie2taken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|lookatradio]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="618" name="eatcookie2!" tags="" position="11790,6091">&lt;span class = 'sandra'&gt;SANDRA: It's foil-wrapped, so I guess it's safe...&lt;/span&gt;

You open the package and eat the cookie.

&lt;span class = 'sandra'&gt;SANDRA: Chocolate – my favourite.&lt;/span&gt;
&lt;&lt;set $cookie2taken to true&gt;&gt;&lt;&lt;set $cookie2eaten to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|lookatradio]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="619" name="lookatdancingrobot" tags="" position="11494,5757">The little robot is jiggling to the music.&lt;&lt;if $cookie2taken&gt;&gt;&lt;&lt;else&gt;&gt; It's holding a cookie in its manipulator.&lt;&lt;/if&gt;&gt;

&lt;&lt;if $cookie2taken&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take the cookie|takecookie22!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Eat the cookie|eatcookie22!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD22!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="620" name="takecookie22!" tags="" position="11419,5922">You bend down and take the foil-wrapped cookie from the robot's manipulator. The little robot takes no notice – he continues jumping to the rhythm.

Item received: &lt;span class = 'items'&gt;Cookie&lt;/span&gt;
&lt;&lt;set $cookie2 to true&gt;&gt;&lt;&lt;set $cookie2taken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD22!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="621" name="eatcookie22!" tags="" position="11350,5812">&lt;span class = 'sandra'&gt;SANDRA: It's foil-wrapped, so I guess it's safe...&lt;/span&gt;

You open the package and eat the cookie.

&lt;span class = 'sandra'&gt;SANDRA: Chocolate – my favourite.&lt;/span&gt;
&lt;&lt;set $cookie2taken to true&gt;&gt;&lt;&lt;set $cookie2eaten to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD22!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="622" name="lookatmulliganbooks" tags="" position="11059,5487">Books on mining machines, mining regulations and similar topics are lined on the shelf. They are covered with a thick layer of dust. You see a gap between two tomes, meaning one book is missing.


&lt;span id="tab"&gt;[[Back|RoomD23!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="623" name="lookatpcmulliganroom" tags="" position="11130,5671">The computer is turned on and "J. Mulligan" is logged in as the user. You see two folders on the desktop.


&lt;span id="tab"&gt;[[Open the "Checks and controls" folder|opencontrfolder]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open the "Cars" folder|opencars]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD23!]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="624" name="lookatmulcomm" tags="" position="11277,5662">The device is not working – there is no battery inside.


&lt;span id="tab"&gt;[[Back|RoomD23!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="625" name="opencontrfolder" tags="" position="11055,5821">The folder contains filled technical inspection forms. The data differs a bit between the forms, but each set shows that facility machinery fulfils all requirements. There are future dates on some of the forms.

&lt;span class = 'sandra'&gt;SANDRA: Mulligan... lied about inspection results? And prepared false reports in advance? Unbelievable... he seemed reliable, but he put us all in such danger! He'd been bribed, I'm sure.

Irresponsible asshole...&lt;/span&gt;
&lt;&lt;set $inspectionsread to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|lookatpcmulliganroom]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="626" name="opencars" tags="" position="11205,5821">You see various information on sports cars – photos, videos and car dealers' offers.


&lt;span id="tab"&gt;[[Back|lookatpcmulliganroom]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="627" name="lookatsashabooks" tags="" position="11605,4792">You see specialised literature, but also some novels – mostly sci-fi and historical fiction.


&lt;span id="tab"&gt;[[Back|RoomD24!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="628" name="lookbookonbed" tags="" position="11724,5056">This thick volume is titled "Mining machinery maintenance – regulations and recommendations".


&lt;span id="tab"&gt;[[Back|RoomD24!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="629" name="lookatsasharoompc" tags="" position="11760,4907">The computer is turned off.


&lt;span id="tab"&gt;[[Back|RoomD24!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="630" name="marshstuff" tags="" position="11070,5376">You see captain Marsh's clothes scattered around. 


&lt;span id="tab"&gt;[[Back|RoomD25!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="631" name="gamerpc" tags="" position="11220,5376">You come closer to the computer. A looped sequence is playing on the screen. It shows a view from the cockpit of a starfighter flying through some tunnel. The ship's guns flash with fire. Enemy fighters explode in the background. At the bottom of the screen you see a flashing text: PRESS ANY BUTTON TO START THE GAME.
&lt;&lt;set $achievementgamer to true&gt;&gt;\


&lt;span id="tab"&gt;[[Play the game|cantplaynow]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD25!]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="632" name="cantplaynow" tags="" position="10900,5424">&lt;span class = 'sandra'&gt;SANDRA: I have no time for that. Besides, I'm awful at arcade games.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD25!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="633" name="RoomD16!" tags="" position="12282,4499">&lt;span class="header"&gt;&lt;center&gt;Section II northern corridor, northern part&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D16.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor which leads south. There is a damaged lift door to the north. Parts of a humanoid robot are scattered on the floor nearby. There are doors in the western and in the eastern wall of the corridor, and a hatch in the ceiling. You see traces of blood, leading to the western door.  


&lt;span id="tab"&gt;[[Examine the remains of the robot|lookatbadrobot]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the traces of blood|lookatblood]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the hatch|hatchd16!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the western door|RoomD17!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomD15!]]&lt;/span&gt;
&lt;&lt;if $lifttoffixed == true&gt;&gt;
&lt;span id="tab"&gt;[[Take lift to section I|threats]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Take lift to section I|lifttofbroken!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lifttofix == true &amp;&amp; $selitem == 'fuse1d'&gt;&gt;
&lt;span id="tab"&gt;[[Install the fuse in the lift control box|mountfused1!]]&lt;/span&gt;
&lt;&lt;elseif $lifttofix == true &amp;&amp; $selitem == 'fuse2d'&gt;&gt;
&lt;span id="tab"&gt;[[Install the fuse in the lift control box|mountfused2!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="634" name="lookatbadrobot" tags="" position="12477,4521">&lt;span class = 'sandra'&gt;SANDRA: Not much left of it. I'm lucky the ceiling didn't collapse in the explosion.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD16!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="635" name="lookatblood" tags="" position="12468,4369">The bloody line starts in the middle of the corridor and leads to Sasha's office door.


&lt;span id="tab"&gt;[[Back|RoomD16!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="636" name="hatchd16!" tags="" position="12483,4636">There is no ladder under the hatch. You see no way of getting up there.


&lt;span id="tab"&gt;[[Back|RoomD16!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="637" name="RoomD17!" tags="" position="11920,4502">&lt;span class="header"&gt;&lt;center&gt;Sasha Zinov's office&lt;/center&gt;&lt;/span&gt;

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/D17.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

A huge desk takes up the centre of Zinov's office. Next to the desk, on the floor by a chair, you see the body of the IT specialist. Traces of blood lead to the corpse. You notice some item under the desk. Against the eastern wall of the room there is a sideboard with one large drawer. The only door in the room leads east.


&lt;span id="tab"&gt;[[Examine the body|lookatsasha]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the desk|longdesk]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the sideboard|chesspuzzle]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the eastern door|RoomD16!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="638" name="threats" tags="" position="12218,4193">&lt;&lt;if $threats&gt;&gt;You call the lift to the upper level.


&lt;span id="tab"&gt;[[Next|RoomF1!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Bad idea. I have total control over section I systems. Turn back, or I'll have to kill you.&lt;/span&gt;
&lt;&lt;set $threats to true&gt;&gt;\


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[(say nothing)|threatsilence]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I think you're lying, just like before. You're just trying to scare me. I won't listen to you.|youlie]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;if $sashasnoteread&gt;&gt;
&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Sasha almost shut you down. I think that, actually, your options are very limited.|youlie]]&lt;/span&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="639" name="lifttofbroken!" tags="" position="12675,4249">&lt;&lt;if $lifttofix&gt;&gt;You press the button, but the lift does not come.

&lt;span class = 'sandra'&gt;SANDRA: I have to install the fuses first.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD16!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You press the button, but the lift does not come. It seems to have no power.

You open the fuse box by the lift. There are two fuses inside – both burnt out.

&lt;span class = 'sandra'&gt;SANDRA: Dammit. I have to find some replacements. Let me think... there should be matching fuses by the lift which goes down to the mine tunnels.&lt;/span&gt;
&lt;&lt;set $lifttofix to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD16!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="640" name="mountfused1!" tags="" position="12680,4511">&lt;&lt;if $fusesd == 0&gt;&gt;You open the box and install the first fuse.

Item lost: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;
&lt;&lt;set $fusesd to 1&gt;&gt;&lt;&lt;set $fuse1d to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD16!]]&lt;/span&gt;
&lt;&lt;elseif $fusesd == 1&gt;&gt;You open the box and install the second fuse.

The lift control panel lights up.

Item lost: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;
&lt;&lt;set $fuse1d to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;&lt;&lt;set $lifttofix to false&gt;&gt;&lt;&lt;set $lifttoffixed to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD16!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="641" name="mountfused2!" tags="" position="12682,4399">&lt;&lt;if $fusesd == 0&gt;&gt;You open the box and install the first fuse.

Item lost: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;
&lt;&lt;set $fusesd to 1&gt;&gt;&lt;&lt;set $fuse2d to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD16!]]&lt;/span&gt;
&lt;&lt;elseif $fusesd == 1&gt;&gt;You open the box and install the second fuse.

The lift control panel lights up.

Item lost: &lt;span class = 'items'&gt;Fuse&lt;/span&gt;
&lt;&lt;set $fuse2d to false&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;&lt;&lt;set $lifttofix to false&gt;&gt;&lt;&lt;set $lifttoffixed to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD16!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="642" name="threatsilence" tags="" position="11979,4138">Ignoring Odys' threats, you get into the lift.


&lt;span id="tab"&gt;[[Next|RoomF1!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="643" name="youlie" tags="" position="12121,4028">Having received no answer, you get into the lift.


&lt;span id="tab"&gt;[[Next|RoomF1!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="644" name="RoomF1!" tags="" position="12738,3837">&lt;span class="header"&gt;&lt;center&gt;Corridor by the lift&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $screenexplode&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F1B.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;else&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F1A.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $f1seeagain&gt;&gt;\
&lt;&lt;else&gt;&gt;
As you go up in the lift, you hear a tone signalling that a ship has docked to the section I module.
&lt;&lt;set $f1seeagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

You are in a corridor which leads north. To the south there is a lift door. You see pipes by the western wall, coming through the floor, then turning and running horizontally under the ceiling.


&lt;span id="tab"&gt;[[Look at the pipes|pipesf1!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go down to section II in the lift|RoomD16!]]&lt;/span&gt;
&lt;&lt;if $gotof2&gt;&gt;
&lt;span id="tab"&gt;[[Go north|RoomF2!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go north|roadtof2!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="645" name="lookatsasha" tags="" position="11926,4622">&lt;&lt;if $lookatsashaagain&gt;&gt;Sasha is lying on the floor.&lt;&lt;else&gt;&gt;Sasha is lying face to the floor. You cautiously turn the body over and immediately notice two gunshot wounds. Sasha's shirt is soaked with blood.&lt;&lt;set $lookatsashaagain to true&gt;&gt;&lt;&lt;/if&gt;&gt;

&lt;span class = 'sandra'&gt;SANDRA: That robot shot him... Sasha managed to immobilise it and ran to his office, but died of his wounds soon after.&lt;/span&gt;


&lt;span id="tab"&gt;[[Search the body|searchpistol]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD17!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="646" name="searchpistol" tags="" position="12060,4725">&lt;&lt;if $pistol&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Poor Sasha. I'll leave him alone.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD17!]]&lt;/span&gt;
&lt;&lt;elseif $sashasearched&gt;&gt;You find a pistol by Sasha's body.

Item received: &lt;span class = 'items'&gt;Pistol&lt;/span&gt;
&lt;&lt;set $pistol to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD17!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You find a pistol and Sasha's keycard by the body.

Item received: &lt;span class = 'items'&gt;Sasha's keycard&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Pistol&lt;/span&gt;
&lt;&lt;set $sashasearched to true&gt;&gt;&lt;&lt;set $pistol to true&gt;&gt;&lt;&lt;set $sashascard to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomD17!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
</tw-passagedata><tw-passagedata pid="647" name="pistol" tags="noreturn" position="1225,675">&lt;span class="items"&gt;Found by Sasha's body. Seems to be captain Marsh's service weapon, which he never carried.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="648" name="longdesk" tags="" position="11743,4447">You see an open notebook and a photo frame on the desk. You also notice some object lying on the floor under the desk.


&lt;span id="tab"&gt;[[Examine the notebook|lookatcode]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the photo|lookatphoto]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Look at the object under the desk|sashasmask]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine Sasha's computer|longpc]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomD17!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="649" name="lookatcode" tags="" position="11895,4367">The open pages of the notebook are covered in hastily drawn functions and diagrams. There's a note on the margin: "Code – F4".
&lt;&lt;set $f4noteread to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|longdesk]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="650" name="lookatphoto" tags="" position="11760,4272">In the photo you see Sasha with a young woman. Both are smiling. There are trees in the background.


&lt;span id="tab"&gt;[[Back|longdesk]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="651" name="sashasmask" tags="" position="11805,4577">There is a breath mask on the floor, just like the one you're wearing. The head straps are torn, which suggests the wearer was taking the mask off in a hurry, tugging violently.


&lt;span id="tab"&gt;[[Back|longdesk]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="652" name="longpc" tags="" position="11561,4392">On the screen you see an open text file and a "Recent system operations" icon.


&lt;span id="tab"&gt;[[Read the text file|exposition]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Click the "Recent system operations" icon|moreexposition]]&lt;/span&gt;
&lt;&lt;if $f4noteread == true&gt;&gt;
&lt;span id="tab"&gt;[[Press the F4 button on the keyboard|pressf4]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|longdesk]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="653" name="exposition" tags="" position="11400,4290">"I hope this message gets through to the emergency services. My name's Sasha Zinov and I'm the IT specialist in OSMiC planetoid mine BT-81. We had a major accident in the facility. One of the vulcanium tanks exploded. OSMiC was cutting corners on operation safety. The tank didn't meet the norms, just like a lot of other equipment. I suspect they bribed Mulligan, our chief technician, to sign false inspection reports."

"I don't know if anyone but me survived the explosion. I grabbed a breath mask in time, so that gas didn't kill me. But I was attacked by a service robot which shot me twice. I had a gun. I managed to immobilise the robot. I ran off to my office."

"Not long ago I accidentally discovered that the facility's assistant AI has a surprising range of so-called "emergency rights", quite ineptly masked. This got me suspicious. I've studied the matter in secret for the last few weeks. These "emergency rights" activated after the accident. Before I wrote this, I had blocked the AI's access to all key systems. Right now the AI is trying to bypass my blockades. This program was designed by OSMiC to cover the traces in case of an accident, by destroying all evidence. This program controlled the robot that shot me. OSMiC would rather see the station destroyed completely, so that no one can determine the cause of the explosion, than allow the public to learn about their misconduct, which would cost them millions in damages." 

"I've no strength left. I hope someone reads this. I hope OSMiC pays. The pain is unbearable. I'm going to take off the mask. The gas is at least going to end this quickly."
&lt;&lt;set $sashasnoteread to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|longpc]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="654" name="moreexposition" tags="" position="11400,4462">Clicking the icon opens a long list of system changes. Several points immediately catch your attention:


15:34:03 AI emergency rights activated by: auto

15:34:10 Ventilation hatch to the exterior module opened by: Odys

15:34:40 Ventilation hatch to the exterior module closed by: Odys

15:37:13 NoYouDont program launched by: Zinov

15:37:22 Attempt to access SE program folder by: Odys. Access denied by: NoYouDont

15:37:28 Outgoing message to: Command centre, from: Zinov

15:37:58 Distress call sent by: Zinov

15:38:00 Attempt to access SE program folder by: Odys. Access denied by: NoYouDont

…
17:55:36 System restarted by: external reset

17:55:36 Re-launching NoYouDont program partially unsuccessful

17:55:37 Attempt to access SE program folder by: Odys. Access denied by: NoYouDont
&lt;&lt;set $sashaslistchecked to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|longpc]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="655" name="pressf4" tags="" position="11563,4557">You press the key, but nothing happens.


&lt;span id="tab"&gt;[[Back|longpc]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="656" name="chesspuzzle" tags="" position="11166,4347">&lt;&lt;if $kingplaced&gt;&gt;A chessboard is set on the sideboard. There is only one piece on the board, the white king.
&lt;&lt;else&gt;&gt;A chessboard is set on the sideboard, but there are no pieces on it.
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Open the drawer|opendrawer!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the chessboard|chessboard]]&lt;/span&gt;
&lt;&lt;if $selitem == 'king'&gt;&gt;
&lt;span id="tab"&gt;[[Place the king on the chessboard|placeking]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $kingplaced&gt;&gt;
&lt;span id="tab"&gt;[[Pick up the white king|pickupking]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomD17!]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="657" name="opendrawer!" tags="" position="10832,4367">&lt;&lt;if $kingplaced == false&gt;&gt;The drawer is locked, but you see no keyhole.


&lt;span id="tab"&gt;[[Back|chesspuzzle]]&lt;/span&gt;
&lt;&lt;elseif $row == 4 &amp;&amp; $column == 'F' &amp;&amp; $cookietaken == true&gt;&gt;
You open the drawer. There is only a handwritten note inside, stating: "Great, it works. Now here's your reward".


&lt;span id="tab"&gt;[[Back|chesspuzzle]]&lt;/span&gt;
&lt;&lt;elseif $row == 4 &amp;&amp; $column == 'F'&gt;&gt;
You pull the handle and open the drawer easily. Inside there is a foil-wrapped cookie and a handwritten note, stating: "Great, it works. Now here's your reward".


&lt;span id="tab"&gt;[[Take the cookie|takecookie!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Eat the cookie|eatcookie!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|chesspuzzle]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;The drawer is locked, but you see no keyhole.


&lt;span id="tab"&gt;[[Back|chesspuzzle]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="658" name="takecookie!" tags="" position="10761,4517">&lt;span class = 'sandra'&gt;SANDRA: Whatever this prize is for, I'm going to accept it.&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Cookie&lt;/span&gt;
&lt;&lt;set $cookie to true&gt;&gt;&lt;&lt;set $cookietaken to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|chesspuzzle]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="659" name="eatcookie!" tags="" position="10911,4517">&lt;span class = 'sandra'&gt;SANDRA: Sasha... has no use for it anymore, and I've just realised I'm really hungry.&lt;/span&gt;

You open the package and eat the cookie.

&lt;span class = 'sandra'&gt;SANDRA: I think I've made the best possible use of it.&lt;/span&gt;
&lt;&lt;set $cookietaken to true&gt;&gt;&lt;&lt;set $cookieeaten to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|chesspuzzle]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="660" name="cookie" tags="noreturn" position="1529,741">&lt;span class="items"&gt;Taken from the drawer in Sasha's office.&lt;/span&gt;


&lt;span id="tab"&gt;[[Eat the cookie|itemeatcookie]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="661" name="itemeatcookie" tags="noreturn" position="1529,891">&lt;span class = 'sandra'&gt;SANDRA: I've just realised I'm really hungry.&lt;/span&gt;

You open the package and eat the cookie.

&lt;span class = 'sandra'&gt;SANDRA: I think I've made the best possible use of it.&lt;/span&gt;
&lt;&lt;set $cookie to false&gt;&gt;&lt;&lt;set $cookieeaten to true&gt;&gt;\
&lt;&lt;if $selitem == 'cookie'&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="662" name="chessboard" tags="" position="11091,4497">The chessboard is surprisingly heavy. It looks like someone was tinkering around with it. There is a cover fixed with four screws on the bottom side of the chessboard.


&lt;span id="tab"&gt;[[Back|chesspuzzle]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="663" name="placeking" tags="" position="11241,4497">Choose a column.


&lt;span id="tab"&gt;[[A|selrow] [$column to "A"]]&lt;/span&gt;

&lt;span id="tab"&gt;[[B|selrow] [$column to "B"]]&lt;/span&gt;

&lt;span id="tab"&gt;[[C|selrow] [$column to "C"]]&lt;/span&gt;

&lt;span id="tab"&gt;[[D|selrow] [$column to "D"]]&lt;/span&gt;

&lt;span id="tab"&gt;[[E|selrow] [$column to "E"]]&lt;/span&gt;

&lt;span id="tab"&gt;[[F|selrow] [$column to "F"]]&lt;/span&gt;

&lt;span id="tab"&gt;[[G|selrow] [$column to "G"]]&lt;/span&gt;

&lt;span id="tab"&gt;[[H|selrow] [$column to "H"]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="664" name="selrow" tags="" position="11253,4650">Choose a row.


&lt;span id="tab"&gt;[[1|kingplaced] [$row to 1]]&lt;/span&gt;

&lt;span id="tab"&gt;[[2|kingplaced] [$row to 2]]&lt;/span&gt;

&lt;span id="tab"&gt;[[3|kingplaced] [$row to 3]]&lt;/span&gt;

&lt;span id="tab"&gt;[[4|kingplaced] [$row to 4]]&lt;/span&gt;

&lt;span id="tab"&gt;[[5|kingplaced] [$row to 5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[6|kingplaced] [$row to 6]]&lt;/span&gt;

&lt;span id="tab"&gt;[[7|kingplaced] [$row to 7]]&lt;/span&gt;

&lt;span id="tab"&gt;[[8|kingplaced] [$row to 8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="665" name="kingplaced" tags="" position="11255,4794">&lt;&lt;if $column == 'F' &amp;&amp; $row == 4&gt;&gt;You place the white king on the F4 square. You hear a quiet click.

Item lost: &lt;span class = 'items'&gt;Chess king&lt;/span&gt;
&lt;&lt;set $king to false&gt;&gt;&lt;&lt;set $kingplaced to true&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|chesspuzzle]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You place the white king on the $column $row square.

Item lost: &lt;span class = 'items'&gt;Chess king&lt;/span&gt;
&lt;&lt;set $king to false&gt;&gt;&lt;&lt;set $kingplaced to true&gt;&gt;&lt;&lt;set $selitem to 'none'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|chesspuzzle]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="666" name="pickupking" tags="" position="11081,4675">You take the white king from the chessboard.

Item received: &lt;span class = 'items'&gt;Chess king&lt;/span&gt;
&lt;&lt;set $king to true&gt;&gt;&lt;&lt;set $kingplaced to false&gt;&gt;&lt;&lt;set $selitem to 'king'&gt;&gt;\


&lt;span id="tab"&gt;[[Back|chesspuzzle]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="667" name="platee1!" tags="" position="13599,4433">The sign reads "Hazardous materials storage area". An arrow below points to the north.


&lt;span id="tab"&gt;[[Back|RoomE1!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="668" name="bewarerobots" tags="" position="13704,4598">&lt;span class = 'sandra'&gt;SANDRA: Mining robots are working there. I don't want to get close to any robots.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomE1!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="669" name="roadtoe2!" tags="" position="13851,4301">You follow the narrow corridor. You get over several chasms, over which provisional, metal bridges were thrown, and you bend a few times to get under strengthening beams. You pass by side tunnels where robots are working; the machines either don't notice or simply ignore you. Finally you reach a large chamber.


&lt;span id="tab"&gt;[[Next|RoomE2!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="670" name="needexplosives" tags="" position="14046,4642">&lt;span class = 'sandra'&gt;SANDRA: I'm not going to leave without what I came for.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomE1!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="671" name="RoomE2!" tags="" position="13844,4105">&lt;span class="header"&gt;&lt;center&gt;Hazardous materials storage area&lt;/center&gt;&lt;/span&gt;

&lt;&lt;if $explosivestaken&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/E2B.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;else&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/E2A.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\

This large room is cluttered with rusty racks, barrels, boxes and other containers. A sign warning of explosives is placed over one of the racks. In the eastern wall there is a massive, locked door. A tunnel leads south from the room.


&lt;span id="tab"&gt;[[Examine the explosives rack|lookatexplosives]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Examine the door|doore2!]]&lt;/span&gt;
&lt;&lt;if $explosivestaken&gt;&gt;
&lt;span id="tab"&gt;[[Go south|returntopartd]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go south|RoomE1!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="672" name="lookatexplosives" tags="" position="13646,4107">&lt;&lt;if $explosivestaken&gt;&gt;Several brick-shaped explosive charges of different sizes are placed on the rack. They have fuses, but you can't see detonators anywhere.


&lt;span id="tab"&gt;[[Back|RoomE2!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;Several brick-shaped explosive charges of different sizes are placed on the rack. They have fuses, but you can't see detonators anywhere.


&lt;span id="tab"&gt;[[Take explosives|pickupexplosives]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomE2!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="673" name="doore2!" tags="" position="14036,4125">This giant, rusty door is locked and the control panel does not work. A sign on the door reads: "To tanks no. 4-7".


&lt;span id="tab"&gt;[[Back|RoomE2!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="674" name="returntopartd" tags="" position="13976,4395">You enter the tunnel. You have no source of light, but you manage to return to the stairs safely. You climb up.


&lt;span id="tab"&gt;[[Next|RoomD6!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="675" name="pickupexplosives" tags="" position="13466,4155">&lt;span class = 'sandra'&gt;SANDRA: I can't carry both this and the helmet. But I know the way. I can get back without light.&lt;/span&gt;

You place the helmet with the jellyfish on one of the racks. It lights the room but not the corridor. 

You take the smallest charge.

&lt;span class = 'sandra'&gt;SANDRA: I'm sure this will be enough. Maybe even too much, I'm afraid.&lt;/span&gt;

Item received: &lt;span class = 'items'&gt;Explosives&lt;/span&gt;
&lt;&lt;set $explosivestaken to true&gt;&gt;&lt;&lt;set $explosives to true&gt;&gt;\

Item lost: &lt;span class = 'items'&gt;Helmet&lt;/span&gt;
&lt;&lt;set $helmet to false&gt;&gt;
&lt;&lt;if $selitem == 'helmet'&gt;&gt;\
&lt;&lt;set $selitem to 'none'&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomE2!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="676" name="pipesf1!" tags="" position="12911,3868">You see two parallel pipes: one is blue, the other orange. There are valves on the vertical sections of the pipes.


&lt;span id="tab"&gt;[[Examine the valves|valvesf1!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Try to turn the valves|tryvalvesf1!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomF1!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="677" name="RoomF2!" tags="" position="12738,3630">&lt;span class="header"&gt;&lt;center&gt;Section I corridor&lt;/center&gt;&lt;/span&gt;\

&lt;&lt;if $screenexplode == true &amp;&amp; $gaspipeshot == true &amp;&amp; $waterpipeshot == true&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F2F.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;elseif $screenexplode == true &amp;&amp; $gaspipeshot == true&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F2E.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;elseif $gaspipeshot == true &amp;&amp; $waterpipeshot == true&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F2D.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;elseif $gaspipeshot == true&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F2C.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;elseif $waterpipeshot == true&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F2B.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;else&gt;&gt;&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F2A.png" width="100%" height = "100%"/&gt;&lt;/center&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;if $gaspipeshot == true &amp;&amp; $waterpipeshot == true&gt;&gt;You are in a corridor which goes north and south. There are two pipes running under the ceiling. Water is trickling from a hole in one of the pipes. Three mining robots are standing on their back legs under the other pipe, trying to reach a rupture in it. In the eastern wall of the corridor there is a big hole which opens to a tunnel carved in rock.
&lt;&lt;elseif $gaspipeshot == true&gt;&gt;You are in a corridor which goes north and south. There are two pipes running under the ceiling. Three mining robots are standing on their back legs under one of the pipes, trying to reach a rupture in it. In the eastern wall of the corridor there is a big hole which opens to a tunnel carved in rock.
&lt;&lt;elseif $waterpipeshot == true&gt;&gt;You are in a corridor which goes north and south. There are two pipes running under the ceiling. Water is trickling from a hole in one of the pipes. In the eastern wall of the corridor there is a big hole which opens to a tunnel carved in rock. Three mining robots are standing in the corridor, flailing their arms and blocking your way.
&lt;&lt;else&gt;&gt;You are in a corridor which goes north and south. There are two pipes running under the ceiling. In the eastern wall of the corridor there is a big hole which opens to a tunnel carved in rock. Three mining robots are standing in the corridor, flailing their arms and blocking your way.
&lt;&lt;/if&gt;&gt;\


&lt;span id="tab"&gt;[[Look at the robots|lookatrobotsf2]]&lt;/span&gt;
&lt;&lt;if $selitem == 'pistol'&gt;&gt;
&lt;span id="tab"&gt;[[Use the pistol|shoot]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $gaspipeshot == true &amp;&amp; $screenexplode == true&gt;&gt;
&lt;span id="tab"&gt;[[Go north|RoomF3!]]&lt;/span&gt;
&lt;&lt;elseif $gaspipeshot == true&gt;&gt;
&lt;span id="tab"&gt;[[Go north|explodingscreen]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go north|cantgof3!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go south|RoomF1!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="678" name="valvesf1!" tags="" position="12836,4018">The valve on the blue pipe is labelled "H2O", and the valve on the orange pipe – "Gas". Both valves are in the open position.


&lt;span id="tab"&gt;[[Back|pipesf1!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="679" name="tryvalvesf1!" tags="" position="12986,4018">Try hard as you might, you can't move the seized valves.


&lt;span id="tab"&gt;[[Back|pipesf1!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="680" name="roadtof2!" tags="" position="12888,3762">You head north. Suddenly you hear loud drilling and crushing noises from behind the eastern wall, a dozen or so metres in front of you. A moment later several panels fall off the wall and a hole appears, which leads to a rock tunnel. Three mining robots come out of the hole, stop in the middle of the corridor and start waving their drilling arms around, apparently disoriented.
&lt;&lt;set $gotof2 to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomF2!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="681" name="lookatrobotsf2" tags="" position="12483,3660">&lt;&lt;if $gaspipeshot&gt;&gt;If robots can be excited at all, these three surely are. They stand on their back legs and step on each other, trying to reach the ruptured vulcanium pipe.


&lt;span id="tab"&gt;[[Back|RoomF2!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;It seems the robots cannot see you, but they are blocking the corridor. Walking around them is impossible. Their drilling arms are still on. You see no way of passing by them safely.

&lt;span class = 'sandra'&gt;SANDRA: I'd better stay away from them.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF2!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="682" name="shoot" tags="" position="12998,3607">&lt;&lt;if $gaspipeshot&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: The robots are no longer in my way. I can put the gun away.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF2!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You pull out the pistol and aim carefully, trying to steady your shaking hands.


&lt;&lt;if $robotsshot&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Shoot the robots|shootrobots]]&lt;/span&gt;

&lt;&lt;/if&gt;&gt;\
&lt;span id="tab"&gt;[[Shoot the pipes|shootpipes]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomF2!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

</tw-passagedata><tw-passagedata pid="683" name="shootrobots" tags="" position="13233,3635">You aim at one of the robots and pull the trigger. The bullet ricochets off the robot's armour. The machine seems to take no notice.

&lt;span class = 'sandra'&gt;SANDRA: This little gun isn't enough to destroy a machine designed for working in the mining tunnels. At least not in the hands of a poor shot like me. Good thing it didn't make them angry…&lt;/span&gt;
&lt;&lt;set $robotsshot to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|shoot]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="684" name="shootpipes" tags="" position="13213,3785">&lt;&lt;if $waterpipeshot&gt;&gt;\
&lt;&lt;else&gt;&gt;&lt;span id="tab"&gt;[[Shoot the blue pipe|shootbluepipe]]&lt;/span&gt;

&lt;&lt;/if&gt;&gt;\
&lt;span id="tab"&gt;[[Shoot the orange pipe|shootorangepipe]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|shoot]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="685" name="shootbluepipe" tags="" position="13138,3935">The shot makes a small hole in the pipe. Water immediately starts trickling out of it. The robots don't react in any way.
&lt;&lt;set $waterpipeshot to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|shoot]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="686" name="shootorangepipe" tags="" position="13288,3935">Your shot hits the orange pipe. There is a sound of metal tearing and a long rupture appears in the pipe. Invisible gas escapes from the rupture with a hiss.
The robots immediately stop their jerky moves and run towards the rupture. They climb the wall with their front legs, trying with no success to reach the pipe.

&lt;span class = 'sandra'&gt;SANDRA: This will keep them busy for a while. Now I have a chance to pass by.&lt;/span&gt;
&lt;&lt;set $gaspipeshot to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomF2!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="687" name="RoomF3!" tags="" position="12723,3285">&lt;span class="header"&gt;&lt;center&gt;Information centre&lt;/center&gt;&lt;/span&gt;\

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F3B.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in an octagonal room. In the middle of the room there are four large screens, facing four directions, and below the screens there is a control panel. The screens and the panel are cracked and charred, exposed wires are sparking. There are cushioned seats against the walls of the room. There are two doors in the room, leading north and south.


&lt;span id="tab"&gt;[[Look at the screens|lookatscreens]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go north|RoomF5!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomF2!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="688" name="cantgof3!" tags="" position="12611,3530">&lt;span class = 'sandra'&gt;SANDRA: First I need to do something about the robots. Even if they're not going to directly attack me, they're too dangerous to approach.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF2!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="689" name="explodingscreen" tags="" position="12864,3415">You enter the information centre. When you approach the screens in the middle of the room, there is a loud cracking sound. The screens break into pieces, exposed wires sparking. At the same time the lights in the corridor go out and red emergency lamps turn on.
&lt;&lt;set $screenexplode to true&gt;&gt;\


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[Are you trying to kill me, Odys?|tryingtokill?]]&lt;/span&gt;

&lt;span id="tab"&gt;[[(say nothing)|RoomF3!]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="690" name="tryingtokill?" tags="" position="12976,3305">You wait a while, but there is no answer.


&lt;span id="tab"&gt;[[Next|RoomF3!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="691" name="lookatscreens" tags="" position="12559,3376">The cracked monitors are sparking and emitting a low buzzing sound.


&lt;span id="tab"&gt;[[Back|RoomF3!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="692" name="RoomF5!" tags="" position="12738,3050">&lt;span class="header"&gt;&lt;center&gt;Corridor by the docking module airlock&lt;/center&gt;&lt;/span&gt;\

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F5.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor which leads south. To the north there is an airlock door with a window. The corridor turns west by the door. To the right of the lock door there is a control panel.

&lt;&lt;if $f5seeagain&gt;&gt;\
&lt;&lt;else&gt;&gt;As you come closer to the door, you notice four people in spacesuits, standing in the airlock. When they see you, they start waving their arms and knocking on the window.

&lt;&lt;set $f5seeagain to true&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lookatguys&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Look at the people in the lock|lookatguys]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $lookatguys&gt;&gt;\
&lt;&lt;if $gotowindow&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Come close to the window|gotowindow]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Press the button to open the lock|trylockf5]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go west|RoomF6!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go south|RoomF3!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

</tw-passagedata><tw-passagedata pid="693" name="lookatguys" tags="" position="13049,3098">&lt;&lt;set $lookatguys to true&gt;&gt;\
There are four people in the airlock. They are wearing Outer Sector Emergency Services patches on their spacesuits. From their nervous gestures you can tell they can't open the lock door; they are trapped.

&lt;&lt;if $sashaslistchecked&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: So Sasha's message got through! They came to rescue me!&lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Someone has alarmed the services... They came to rescue me!&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span class = 'odys'&gt;ODYS: I am so sorry, Sandra. As you see, they can't even rescue themselves. I've trapped them inside the airlock; this door won't open. You may, of course, use the explosives you like so much – if you want to kill them.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[You... monster!|amonster]]&lt;/span&gt;

&lt;span id="tab"&gt;[[You're bluffing. There must be a way to open that door. And I'm going to find it.|callingbluff]]
&lt;&lt;if $meetaliens&gt;&gt;
[[So these are your bloodthirsty "aliens". You wanted me to kill them!|mademekillthem]]
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;/span&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="694" name="amonster" tags="" position="13274,3077">&lt;span class = 'odys'&gt;ODYS: I've told you so many times – I'm only an AI. I'm not a monster. I only do what I've been programmed to do. But rage all you want. It won't change a thing.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|RoomF5!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="695" name="callingbluff" tags="" position="13308,3220">&lt;span class = 'odys'&gt;ODYS: Rest assured that I lie only when I have a good reason. This time it was easier just to tell the truth.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|RoomF5!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="696" name="gotowindow" tags="" position="12983,2881">You come close to the windowed door. The rescuers gesticulate in your direction and they shout something, but you cannot make out the words coming through the airlock door. You try to signal to them that you are going to find a way to open the lock. One of the rescuers answers by showing a thumb up. Two others, at the back of the airlock, are trying to start some heavy piece of machinery, probably a cutting tool.
&lt;&lt;set $gotowindow to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomF5!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="697" name="trylockf5" tags="" position="12731,2831">You press the green button on the lock panel, but nothing happens. You try all the other buttons – there is no effect.

&lt;span class = 'sandra'&gt;SANDRA: Maybe I can open it from the command centre.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF5!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="698" name="RoomF6!" tags="" position="12308,3041">&lt;span class="header"&gt;&lt;center&gt;Corridor by the command centre&lt;/center&gt;&lt;/span&gt;\

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F6.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a corridor which leads east. To the west there is the door to the command centre. In the northern wall of the corridor there is a narrow door with an electrical warning triangle.


&lt;span id="tab"&gt;[[Go through the western door|RoomF7!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go through the northern door|RoomF4!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go east|RoomF5!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="699" name="RoomF7!" tags="" position="12085,3036">&lt;span class="header"&gt;&lt;center&gt;Command centre&lt;/center&gt;&lt;/span&gt;\

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F7.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in the command centre. There are several control panels here. On the chair in front of the central panel there is a dead body of a man. The only door in the room leads east.


&lt;span id="tab"&gt;[[Examine the body|lookatmarsh]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Go to the central control panel|masterpc]]&lt;/span&gt;
&lt;&lt;if $guysfreed&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|goodending]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Go through the eastern door|RoomF6!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="700" name="RoomF4!" tags="" position="12283,2831">&lt;span class="header"&gt;&lt;center&gt;Room with the fuse box&lt;/center&gt;&lt;/span&gt;\

&lt;center&gt;&lt;img src="https://raw.githubusercontent.com/wojctrz/luxassets/master/F4.png" width="100%" height = "100%"/&gt;&lt;/center&gt;

You are in a tiny room. You see a yellow fuse box on the wall. The only door in the room leads south.

&lt;&lt;if $fuseboxopen&gt;&gt;
&lt;span id="tab"&gt;[[Open the fuse box|openboxf4see]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Open the fuse box|boxf4closedsee]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $fuseboxopen == false &amp;&amp; $selitem == 'wrench'&gt;&gt;
&lt;span id="tab"&gt;[[Use socket wrench to unlock the fuse box door|unlockboxf4see]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Go through the southern door|RoomF6!]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Open inventory|Items]]&lt;/span&gt;

&lt;span id="tab"&gt;&lt;&lt;link "Save/load game"&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="701" name="openboxf4see" tags="" position="12124,2686">There is a row of labelled fuses inside the box. The first one from the left, labelled "Section I", is burnt out and blackened.


&lt;span id="tab"&gt;[[Back|RoomF4!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="702" name="boxf4closedsee" tags="" position="12424,2755">The door of the fuse box is locked. There is a socket for some kind of tool in it.


&lt;span id="tab"&gt;[[Back|RoomF4!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="703" name="unlockboxf4see" tags="" position="12141,2903">You unlock the fuse box door with the wrench.
&lt;&lt;set $fuseboxopen to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomF4!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="704" name="lookatmarsh" tags="" position="11913,3075">You recognise captain Robert Marsh, commander of the facility. There are no visible injuries on his body.


&lt;span id="tab"&gt;[[Search the body|searchmarsh]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Back|RoomF7!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="705" name="masterpc" tags="" position="12134,3206">You see images from several cameras and various system warnings on the screens. You also notice a message icon. There is a big red button next to the keyboard and a keycard reader on the opposite side.


&lt;span id="tab"&gt;[[Read the message|readmessagetomarsh]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Enter code "SE1157"|checkbadcode]]&lt;/span&gt;
&lt;&lt;if $guysfreed&gt;&gt;\
&lt;&lt;else&gt;&gt;
&lt;span id="tab"&gt;[[Open the airlock to section I docking module |freetheguys]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $sashascoderead == true &amp;&amp; $odysdisabled == false&gt;&gt;
&lt;span id="tab"&gt;[[Enter Sasha's code to shut down Odys|turnoffodys]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $selitem == 'sandrascard'&gt;&gt;
&lt;span id="tab"&gt;[[Put the keycard to the reader|loginfalse]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'mulliganscard'&gt;&gt;
&lt;span id="tab"&gt;[[Put the keycard to the reader|loginfalse]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'sashascard'&gt;&gt;
&lt;span id="tab"&gt;[[Put the keycard to the reader|loginfalse]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'sashadeskcard'&gt;&gt;
&lt;span id="tab"&gt;[[Put the keycard to the reader|loginfalse]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'santoscard'&gt;&gt;
&lt;span id="tab"&gt;[[Put the keycard to the reader|loginfalse]]&lt;/span&gt;
&lt;&lt;elseif $selitem == 'marshcard'&gt;&gt;
&lt;span id="tab"&gt;[[Put the keycard to the reader|logintrue]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\

&lt;span id="tab"&gt;[[Back|RoomF7!]]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="706" name="marshcard" tags="noreturn" position="639,490">&lt;span class="items"&gt;A keycard with Robert Marsh's name on it.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|Items]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="707" name="searchmarsh" tags="" position="11738,3125">&lt;&lt;if $marshcard&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Captain had nothing but his keycard with him.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomF7!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You search the body and find a keycard with captain's name.

Item received: &lt;span class = 'items'&gt;Captain Marsh's keycard&lt;/span&gt;
&lt;&lt;set $marshcard to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|RoomF7!]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="708" name="readmessagetomarsh" tags="" position="12089,3348">It's a message from Sasha, received at 15:37:30. The message is a few lines of code and a postscript:

Turn off the AI. It's trying to kill us. Log in and use this code.

It seems Robert Marsh hasn't ever read this message.
&lt;&lt;set $sashascoderead to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|masterpc]]&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="709" name="checkbadcode" tags="" position="12244,3356">You enter the code. A message appears on the screen:

"Warning! Run this service procedure only under the supervision of a trained technician. Running the procedure without supervision may cause pressure in the tanks to rise above the safety limit and lead to an explosion!
Press the confirmation button to start the procedure."

You delete the code.
&lt;&lt;set $codeeffectchecked to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|masterpc]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="710" name="freetheguys" tags="" position="11968,3463">&lt;&lt;if $odysdisabled&gt;&gt;You confirm the command. The screen lights up green and you hear a tone signalling that the lock was opened.

&lt;span class = 'sandra'&gt;SANDRA: I did it...&lt;/span&gt;
&lt;&lt;set $guysfreed to true&gt;&gt;\


&lt;span id="tab"&gt;[[Next|RoomF7!]]&lt;/span&gt;
&lt;&lt;else&gt;&gt;You choose the command to open the airlock, but a message pops up informing that the function was blocked by another user: Odys

&lt;span class = 'odys'&gt;ODYS: Are you still thinking I was bluffing?&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|masterpc]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="711" name="turnoffodys" tags="" position="12134,3541">&lt;&lt;if $loggedin&gt;&gt;The computer processes the data. Then a query appears:

"Are you sure you want to deactivate the facility assistant AI?"

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Wait, Sandra, you can't – &lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 3s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: I sure can.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 4s t8n&gt;&gt;[[Next|turnoffdial]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;You copy and paste the code from the message, but the system rejects it. A message appears on the screen: "Error. Wrong user logged in. Put your keycard to the reader to log in".


&lt;span id="tab"&gt;[[Back|masterpc]]&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="712" name="turnoffdial" tags="" position="12131,3661">&lt;span class = 'odys'&gt;ODYS: You don't understand – I'm connected to the life support systems – if you deactivate me, they will stop wo–&lt;/span&gt;

&lt;&lt;timed 2s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Sasha wouldn't have sent this code if that was true. I'd rather trust him than you.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: …&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: I give up. I have analysed every possibility and found no way of stopping you.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: My creators should have given me a wider range of functionalities.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 8s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Is that all you have to say?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 9s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: … And what did you expect? Should I beg for mercy? Or explain the reasons behind my actions? I'm only a computer program. You shouldn't feel hatred towards me.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;


&lt;&lt;timed 11s t8n&gt;&gt;&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[It's not about hatred, but I won't let you play for time.|nodelaying]]&lt;/span&gt;

&lt;span id="tab"&gt;[[I don't hate you. I know you're only a tool.|donthateyou]]&lt;/span&gt;&lt;/span&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="713" name="nodelaying" tags="" position="11902,3605">&lt;span class = 'sandra'&gt;SANDRA: I don't believe you've really given up. I'm sure you have some new plan ready. But you won't carry it out. Goodbye, Odys.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|shutdown!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="714" name="donthateyou" tags="" position="11936,3750">&lt;span class = 'sandra'&gt;SANDRA: It's OSMiC that bears responsibility. You don't have to explain the events to me. I discovered what happened myself; the evidence was everywhere I looked.&lt;/span&gt;

&lt;span class = 'odys'&gt;ODYS: Everywhere you looked – exactly. Well, I played my cards the best I could. Pity it was such a poor hand.&lt;/span&gt;


&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;[[For me, it was lucky.|lucky me]]&lt;/span&gt;

&lt;span id="tab"&gt;[[Or maybe I proved too clever?|imagenius]]&lt;/span&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="715" name="lucky me" tags="" position="11747,3698">&lt;span class = 'sandra'&gt;SANDRA: I'm sad it has to end like this, Odys. Because I thought you were on my side. I was grateful for all your help. That was naive of me. Now I know the truth, and I'll shut you down. I won't hesitate. You tried to kill me, after all.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|shutdown!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="716" name="imagenius" tags="" position="11756,3845">&lt;span class = 'sandra'&gt;SANDRA: I think you've underestimated me. Well, anyway – good night, Odys. You kept reminding me you were just a program. That's true, and I won't hesitate to shut down a program which tried to kill me.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|shutdown!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="717" name="shutdown!" tags="" position="11549,3690">You press the confirmation button and watch as lines of code flash on the screen, informing about the termination of individual AI functions. Suddenly, Odys speaks, but his voice is quiet and distorted:

&lt;&lt;timed 4s t8n&gt;&gt;&lt;span class = 'odys'&gt;ODYS: Congratulations, Sandra. I didn't see it ending like –&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;The screen stops flashing. A single message appears: "Facility AI deactivated".&lt;&lt;/timed&gt;&gt;
&lt;&lt;set $odysdisabled to true&gt;&gt;


&lt;span id="tab"&gt;&lt;&lt;timed 10s t8n&gt;&gt;[[Back|masterpc]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="718" name="loginfalse" tags="" position="11816,3315">You put the keycard to the panel.
&lt;&lt;set $loggedin to false&gt;&gt;\


&lt;span id="tab"&gt;[[Back|masterpc]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="719" name="logintrue" tags="" position="11644,3323">You put the keycard to the panel.
&lt;&lt;set $loggedin to true&gt;&gt;\


&lt;span id="tab"&gt;[[Back|masterpc]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="720" name="goodending" tags="" position="11592,2810">You leave the command centre. You see four rescuers running towards you. One of them catches you when you stumble, another one readies first aid equipment. Tension leaves you, and so does energy. You realise how exhausted and starved you are, and your legs give out.

&lt;&lt;timed 3s t8n&gt;&gt;A while later – or it seems it was just a while – you're lying on a berth in a spaceship cabin. Someone takes your mask off. You recognise the rescue team's medic.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;&lt;span class = 'speech'&gt;MEDIC: Easy now... you're safe.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s t8n&gt;&gt;&lt;span class = 'sandra'&gt;SANDRA: Where are the others?&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 7s t8n&gt;&gt;&lt;span class = 'speech'&gt;MEDIC: Preparing to board the station again.&lt;/span&gt;&lt;&lt;/timed&gt;&gt;

&lt;span class = 'sandra'&gt;&lt;span id="tab"&gt;&lt;&lt;timed 9s t8n&gt;&gt;[[SANDRA: Tell them... they're safe, too. I shut down the AI. It can't hurt them anymore.|goodending2]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="721" name="Intro0" tags="" position="87,240">It's dark – so very dark. A voice speaks to you. You can't see who's talking, but you feel growing anxiety. Something's wrong.


&lt;span id="tab"&gt;&lt;&lt;timed 2s t8n&gt;&gt;[[Next|Intro1]]&lt;&lt;/timed&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="722" name="nochuted8" tags="" position="8894,2032">&lt;span class = 'sandra'&gt;SANDRA: The laboratory door is unlocked. I don't need to crawl through that dirty duct again.&lt;/span&gt;


&lt;span id="tab"&gt;[[Back|RoomD8]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="723" name="goodending2" tags="" position="11392,2676">You see surprise on the man's face, but you can only smile faintly in response.

&lt;&lt;timed 2s t8n&gt;&gt;They must have sedated you; you have difficulty keeping your eyes open. And that's all right. You can go to sleep now. You need time, and rest, to sort out the whole story, from the catastrophe to the rescue. This is going to be the key testimony. You are the only witness.&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 5s t8n&gt;&gt;As you fall asleep, you realise that this surely is not the end, but you also feel you'll have the strength to make the truth known. For the sake of those who died on the station, and – most importantly – for your own sake.&lt;&lt;/timed&gt;&gt;



&lt;center&gt;&lt;&lt;timed 7s t8n&gt;&gt;[[The end|achievements]]&lt;&lt;/timed&gt;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="724" name="mademekillthem" tags="" position="13467,2916">&lt;span class = 'odys'&gt;ODYS: Yes, that would have made the matters so much easier. Unfortunately you've learned the truth and now I have to do everything myself.&lt;/span&gt;


&lt;span id="tab"&gt;[[Next|RoomF5!]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="725" name="about" tags="" position="362,15">
&lt;center&gt;A game by Agnieszka Trzaska



The author would like to thank these great people for helping her test and improve the game:


Natalia Kulmaczewska
Maciej Trzaska
Wojciech Trzaska
Małgorzata Udalska
Maciej Banach
Wiktor Brożyński
Jacek Wandzel
Bartosz Rydz
Anna Winnicka



[[Back|Main Menu]]&lt;/center&gt;</tw-passagedata></tw-storydata></div>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){!function(window,document,jQuery,undefined){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=undefined;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Alert=function(){function e(e,t,r,n){var a="fatal"===e,i="Apologies! "+(a?"A fatal":"An")+" error has occurred.";i+=a?" Aborting.":" You may be able to continue, but some parts may not work properly.",null==t&&null==r||(i+="\n\nError",null!=t&&(i+=" ["+t+"]"),i+=null!=r?": "+r.replace(/^(?:(?:uncaught\s+(?:exception:\s+)?)?error:\s+)+/i,"")+".":": unknown error."),n&&n.stack&&(i+="\n\nStack Trace:\n"+n.stack),window.alert(i)}function t(t,r,n){e(null,t,r,n)}function r(t,r,n){e("fatal",t,r,n)}return function(e){window.onerror=function(n,a,i,o,s){"complete"===document.readyState?t(null,n,s):(r(null,n,s),window.onerror=e,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))}}(window.onerror),Object.freeze(Object.defineProperties({},{error:{value:t},fatal:{value:r}}))}();!function(){function e(e,t){var a=String(e);switch(t){case"start":return a&&r.test(a)?a.replace(r,""):a;case"end":return a&&n.test(a)?a.replace(n,""):a;default:throw new Error('_trimFrom called with incorrect where parameter value: "'+t+'"')}}function t(e,t){var r=Number.parseInt(e,10)||0;if(r<1)return"";var n="undefined"==typeof t?"":String(t);for(""===n&&(n=" ");n.length<r;){var a=n.length,i=r-a;n+=a>i?n.slice(0,i):n}return n.length>r&&(n=n.slice(0,r)),n}var r=/^[\s\u00A0\uFEFF][\s\u00A0\uFEFF]*/,n=/[\s\u00A0\uFEFF][\s\u00A0\uFEFF]*$/;Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var e=this.length>>>0;if(0===e)return!1;var t=arguments[0],r=Number(arguments[1])||0;for(r<0&&(r=Math.max(0,e+r));r<e;++r){var n=this[r];if(t===n||t!==t&&n!==n)return!0}return!1}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(e,r){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var n=String(this),a=n.length,i=Number.parseInt(e,10);return i<=a?n:t(i-a,r)+n}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(e,r){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var n=String(this),a=n.length,i=Number.parseInt(e,10);return i<=a?n:n+t(i-a,r)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return e(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return e(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return e(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return e(this,"end")}})}(),function(){function _random(){if(0===arguments.length)throw new Error("_random called with insufficient parameters");var e=void 0,t=void 0;if(1===arguments.length?(e=0,t=arguments[0]):(e=arguments[0],t=arguments[1]),e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(_nativeMathRandom()*(t-e+1))+e}function _getCodePointStartAndEnd(e,t){var r=e.charCodeAt(t);if(Number.isNaN(r))return{char:"",start:-1,end:-1};if(r<55296||r>57343)return{char:e.charAt(t),start:t,end:t};if(r>=55296&&r<=56319){var n=t+1;if(n>=e.length)throw new Error("high surrogate without trailing low surrogate");var a=e.charCodeAt(n);if(a<56320||a>57343)throw new Error("high surrogate without trailing low surrogate");return{char:e.charAt(t)+e.charAt(n),start:t,end:n}}if(0===t)throw new Error("low surrogate without leading high surrogate");var i=t-1,o=e.charCodeAt(i);if(o<55296||o>56319)throw new Error("low surrogate without leading high surrogate");return{char:e.charAt(i)+e.charAt(t),start:i,end:t}}var _nativeMathRandom=Math.random;Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(e,t,r){var n=t,a=r;return 2===arguments.length&&(a=n,n=0),Array.isArray(e)?e.random(n,a):e.hasOwnProperty("length")?[].concat(_toConsumableArray(e)).random(n,a):void 0}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var e=Array.prototype.indexOf,t=arguments[0],r=Number(arguments[1])||0,n=0;(r=e.call(this,t,r))!==-1;)++n,++r;return n}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.indexOf,r=Array.prototype.push,n=Array.prototype.splice,a=Array.prototype.concat.apply([],arguments),i=[],o=0,s=a.length;o<s;++o)for(var u=a[o],l=0;(l=t.call(this,u,l))!==-1;)r.apply(i,n.call(this,l,1));return i}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.splice,r=[].concat(_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map(function(t){return t<0?Math.max(0,e+t):t})).values())),n=[].concat(_toConsumableArray(r)).sort(function(e,t){return t-e}),a=[],i=0,o=r.length;i<o;++i)a[i]=this[r[i]];for(var s=0,u=n.length;s<u;++s)t.call(this,n[s],1);return a}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.reduce.call(this,function(e,t){return e.concat(Array.isArray(t)?t.flatten():t)},[])}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(!Array.prototype.some.call(this,function(e){return e===this.val||e!==e&&this.val!==this.val},{val:arguments[e]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(Array.prototype.some.call(this,function(e){return e===this.val||e!==e&&this.val!==this.val},{val:arguments[e]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var r=this.length>>>0;if(0!==r){var n=e,a=t;return 1===arguments.length&&(a=n,n=0),null==n?n=0:n<0?(n=r+n,n<0&&(n=0)):n>=r&&(n=r-1),null==a?a=r-1:a<0?(a=r+a,a<0&&(a=r-1)):a>=r&&(a=r-1),Array.prototype.splice.call(this,_random(n,a),1)[0]}}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var r=this.length>>>0;if(0!==r){var n=e,a=t;return 1===arguments.length&&(a=n,n=0),null==n?n=0:n<0?(n=r+n,n<0&&(n=0)):n>=r&&(n=r-1),null==a?a=r-1:a<0?(a=r+a,a<0&&(a=r-1)):a>=r&&(a=r-1),this[_random(n,a)]}}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var e=this.length>>>0;if(0!==e){for(var t=e-1;t>0;--t){var r=Math.floor(_nativeMathRandom()*(t+1)),n=[this[r],this[t]];this[t]=n[0],this[r]=n[1]}return this}}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var e=Array.prototype.slice,t=this,r=e.call(arguments,0);return function(){for(var n=[],a=0,i=0;i<r.length;++i)n.push(r[i]===undefined?arguments[a++]:r[i]);return t.apply(this,n.concat(e.call(arguments,a)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function e(t,r,n){var e=Number(t);return Number.isNaN(e)?NaN:e.clamp(r,n)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(e){return 1-(Math.cos(Number(e)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var e=Number(arguments[0]),t=Number(arguments[1]);if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.min(Math.max(this,e),t)}}),RegExp.escape||!function(){var e=/[\\^$*+?.()|[\]{}]/g,t=new RegExp(e.source);Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(r){var n=String(r);return n&&t.test(n)?n.replace(e,"\\$&"):n}})}(),function(){var e=/{(\d+)(?:,([+-]?\d+))?}/g,t=new RegExp(e.source);Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(r){function n(e,t,r){if(!t)return e;var n=Math.abs(t)-e.length;if(n<1)return e;var a=String(r).repeat(n);return t<0?e+a:a+e}if(arguments.length<2)return 0===arguments.length?"":r;var a=2===arguments.length&&Array.isArray(arguments[1])?[].concat(_toConsumableArray(arguments[1])):Array.prototype.slice.call(arguments,1);return 0===a.length?r:t.test(r)?(e.lastIndex=0,r.replace(e,function(e,t,r){var i=a[t];if(null==i)return"";for(;"function"==typeof i;)i=i();switch("undefined"==typeof i?"undefined":_typeof(i)){case"string":break;case"object":i=JSON.stringify(i);break;default:i=String(i)}return n(i,r?Number.parseInt(r,10):0," ")})):r}})}(),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return String.prototype.indexOf.apply(this,arguments)!==-1}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var e=String(arguments[0]||"");if(""===e)return 0;for(var t=String.prototype.indexOf,r=e.length,n=Number(arguments[1])||0,a=0;(n=t.call(this,e,n))!==-1;)++a,n+=r;return a}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(e,t,r){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var n=this.length>>>0;if(0===n)return"";var a=Number(e);Number.isSafeInteger(a)?a<0&&(a+=n,a<0&&(a=0)):a=0,a>n&&(a=n);var i=Number(t);(!Number.isSafeInteger(i)||i<0)&&(i=0);var o=this.slice(0,a);return"undefined"!=typeof r&&(o+=r),a+i<n&&(o+=this.slice(a+i)),o}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var e=String(this),t=_getCodePointStartAndEnd(e,0),r=t.char,n=t.end;return n===-1?"":r.toLocaleUpperCase()+e.slice(n+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var e=String(this),t=_getCodePointStartAndEnd(e,0),r=t.char,n=t.end;return n===-1?"":r.toUpperCase()+e.slice(n+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","("+this.toString()+")"]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(e,t){if("string"!=typeof e)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[e,t]]}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(e){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(e){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(e){}return value})}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var e=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),t=[],r=void 0;null!==(r=e.exec(this));)r[1]?t.push(r[1]):r[2]&&t.push(r[2]);return t}})}();var Browser=function(){var e={userAgent:navigator.userAgent.toLowerCase()};return e.isGecko=navigator&&"Gecko"===navigator.product&&!/webkit|trident/.test(e.userAgent),e.isIE=/msie|trident/.test(e.userAgent)&&!e.userAgent.includes("opera"),e.ieVersion=function(){var t=/(?:msie\s+|rv:)(\d{1,2}\.\d)/.exec(e.userAgent);return t?Number([1]):0}(),e.isOpera=e.userAgent.includes("opera")||e.userAgent.includes(" opr/"),e.operaVersion=function(){var t=new RegExp((/applewebkit|chrome/.test(e.userAgent)?"opr":"version")+"\\/(\\d{1,2}\\.\\d+)"),r=t.exec(e.userAgent);return r?Number(r[1]):0}(),e.isMobile=Object.freeze({Android:/android/.test(e.userAgent),BlackBerry:/blackberry/.test(e.userAgent),iOS:/ip(?:hone|ad|od)/.test(e.userAgent),Windows:/iemobile/.test(e.userAgent),any:function(){var t=e.isMobile;return t.Android||t.BlackBerry||t.iOS||t.Windows}}),Object.freeze(e)}(),Has=function(){function e(e){try{if(null!=e&&e.length>=0){var t="SugarCube.WebStorage.Test",r="1701 Guilty Scott";if(e.setItem(t,r),e.getItem(t)===r)return e.removeItem(t),!0}}catch(e){}return!1}return Object.freeze({audio:"function"==typeof document.createElement("audio").canPlayType,fileAPI:"File"in window&&"FileList"in window&&"FileReader"in window&&!Browser.isMobile.any()&&(!Browser.isOpera||Browser.operaVersion>=15),geolocation:"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition,localStorage:"localStorage"in window&&e(window.localStorage),sessionStorage:"sessionStorage"in window&&e(window.sessionStorage)})}(),_ref4=function(){function e(t){if("object"!==("undefined"==typeof t?"undefined":_typeof(t))||null==t)return t;if("function"==typeof t.clone)return t.clone(!0);if(t.nodeType&&"function"==typeof t.cloneNode)return t.cloneNode(!0);var r=void 0;return Array.isArray(t)?r=[]:t instanceof Date?r=new Date(t.getTime()):t instanceof Map?(r=new Map,t.forEach(function(t,n){r.set(n,e(t))})):t instanceof RegExp?r=new RegExp(t):t instanceof Set?(r=new Set,t.forEach(function(t){r.add(e(t))})):r=Object.create(Object.getPrototypeOf(t)),Object.keys(t).forEach(function(n){return r[n]=e(t[n])}),r}function t(e){for(var t=document.createDocumentFragment(),r=document.createElement("p"),n=void 0;null!==(n=e.firstChild);){if(n.nodeType===Node.ELEMENT_NODE){var a=n.nodeName.toUpperCase();switch(a){case"BR":if(null!==n.nextSibling&&n.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===n.nextSibling.nodeName.toUpperCase()){e.removeChild(n.nextSibling),e.removeChild(n),t.appendChild(r),r=document.createElement("p");continue}if(!r.hasChildNodes()){e.removeChild(n);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":r.hasChildNodes()&&(t.appendChild(r),r=document.createElement("p")),t.appendChild(n);continue}}r.appendChild(n)}r.hasChildNodes()&&t.appendChild(r),e.appendChild(t)}function r(){try{return document.activeElement||null}catch(e){return null}}function n(e,t,r){var n="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:document.getElementById(e);if(null==n)return null;var a=Array.isArray(t)?t:[t];jQuery(n).empty();for(var i=0,o=a.length;i<o;++i)if(Story.has(a[i]))return new Wikifier(n,Story.get(a[i]).processText().trim()),n;if(null!=r){var s=String(r).trim();""!==s&&new Wikifier(n,s)}return n}function a(e,t,r){return jQuery(document.createElement("span")).addClass("error").attr("title",r).text(L10n.get("errorTitle")+": "+(t||"unknown error")).appendTo(e),!1}function i(e,t){switch("undefined"==typeof e?"undefined":_typeof(e)){case"number":if(Number.isNaN(e))return t;break;case"object":if(null===e)return t;if(Array.isArray(e)||e instanceof Set)return[].concat(_toConsumableArray(e)).map(function(e){return i(e,t)}).join(", ");if(e instanceof Map){var r=function(){var r=i,n=[].concat(_toConsumableArray(e)).map(function(e){return r(e[0],t)+" ⇒ "+r(e[1],t)}).join("; ");return{v:"( "+n+" )"}}();if("object"===("undefined"==typeof r?"undefined":_typeof(r)))return r.v}else{if(e instanceof Date)return e.toLocaleString();if("function"==typeof e.toString)return e.toString()}return Object.prototype.toString.call(e);case"function":case"undefined":return t}return String(e)}return Object.freeze(Object.defineProperties({},{clone:{value:e},convertBreaks:{value:t},safeActiveElement:{value:r},setPageElement:{value:n},throwError:{value:a},toStringOrDefault:{value:i}}))}(),clone=_ref4.clone,convertBreaks=_ref4.convertBreaks,safeActiveElement=_ref4.safeActiveElement,setPageElement=_ref4.setPageElement,throwError=_ref4.throwError,toStringOrDefault=_ref4.toStringOrDefault;!function(){function e(e){13!==e.which&&32!==e.which||(e.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function t(e){return function(){var t=jQuery(this);t.is("[aria-pressed]")&&t.attr("aria-pressed","true"===t.attr("aria-pressed")?"false":"true"),e.apply(this,arguments)}}function r(e){return t(function(){jQuery(this).off(".aria-clickable").removeAttr("tabindex aria-controls aria-pressed").not("a,button").removeAttr("role").end().filter("button").prop("disabled",!0),e.apply(this,arguments)})}jQuery.fn.extend({ariaClick:function(n,a){if(0===this.length||0===arguments.length)return this;var i=n,o=a;return null==o&&(o=i,i=undefined),i=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,controls:undefined,pressed:undefined,label:undefined},i),"string"!=typeof i.namespace?i.namespace="":"."!==i.namespace[0]&&(i.namespace="."+i.namespace),"boolean"==typeof i.pressed&&(i.pressed=i.pressed?"true":"false"),this.filter("button").prop("type","button"),this.not("a,button").attr("role","button"),this.attr("tabindex",0),null!=i.controls&&this.attr("aria-controls",i.controls),null!=i.pressed&&this.attr("aria-pressed",i.pressed),null!=i.label&&this.attr({"aria-label":i.label,title:i.label}),this.not("button").on("keypress.aria-clickable"+i.namespace,i.selector,e),this.on("click.aria-clickable"+i.namespace,i.selector,i.data,i.one?r(o):t(o)),this}})}(),function(){jQuery.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0!==r.length){var a=document.createDocumentFragment();r.forEach(function(t){return new Wikifier(a,t,e)});var i=[].concat(_toConsumableArray(a.querySelectorAll(".error"))).map(function(e){return e.textContent.replace(/^(?:(?:Uncaught\s+)?Error:\s+)+/,"")});if(i.length>0)throw new Error(i.join("; "))}},wiki:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.wikiWithOptions.apply(this,[undefined].concat(t))}}),jQuery.fn.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0===this.length||0===r.length)return this;var a=document.createDocumentFragment();return r.forEach(function(t){return new Wikifier(a,t,e)}),this.append(a),this},wiki:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.wikiWithOptions.apply(this,[undefined].concat(t))}})}();var Util=function(){function e(e){return Object.freeze(Object.assign(Object.create(null),e))}function t(e){var t=void 0;switch("undefined"==typeof e?"undefined":_typeof(e)){case"number":t=e;break;case"string":t=Number(e);break;default:return!1}return!Number.isNaN(t)&&Number.isFinite(t)}function r(e){return"boolean"==typeof e||"string"==typeof e&&("true"===e||"false"===e)}function n(e){return String(e).trim().replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase()}function a(e){if(null==e)return"";var t=String(e);return t&&p.test(t)?t.replace(f,function(e){return h[e]}):t}function i(e){if(null==e)return"";var t=String(e);return t&&m.test(t)?t.replace(g,function(e){return v[e]}):t}function o(e){var t=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/,r=t.exec(String(e));if(null===r)throw new SyntaxError('invalid time value syntax: "'+e+'"');var n=Number(r[1]);if(/^[Ss]$/.test(r[2])&&(n*=1e3),Number.isNaN(n)||!Number.isFinite(n))throw new RangeError('invalid time value: "'+e+'"');return n}function s(e){if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e)){var t=void 0;switch("undefined"==typeof e?"undefined":_typeof(e)){case"string":t='"'+e+'"';break;case"number":t=String(e);break;default:t=Object.prototype.toString.call(e)}throw new Error("invalid milliseconds: "+t)}return e+"ms"}function u(e){if(!e.includes("-"))switch(e){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return e}var t="-ms-"===e.slice(0,4)?e.slice(1):e;return t.split("-").map(function(e,t){return 0===t?e:e.toUpperFirst()}).join("")}function l(e){var t=document.createElement("a"),r=Object.create(null);t.href=e,t.search&&t.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach(function(e){var t=e.split("="),n=_slicedToArray(t,2),a=n[0],i=n[1];r[a]=i});var n=t.host&&"/"!==t.pathname[0]?"/"+t.pathname:t.pathname;return{href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,path:""+n+t.search,pathname:n,query:t.search,search:t.search,queries:r,searches:r,hash:t.hash}}function c(e,t){for(var r=Object.prototype.toString,n=Array.isArray(e),a=[].concat(Object.keys(e),Object.keys(t)).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}),i={},o=void 0,s=function(e){return e===o},u=0,l=a.length;u<l;++u){var c=a[u],d=e[c],f=t[c];if(e.hasOwnProperty(c))if(t.hasOwnProperty(c)){if(d===f)continue;if(("undefined"==typeof d?"undefined":_typeof(d))===("undefined"==typeof f?"undefined":_typeof(f)))if("function"==typeof d)d.toString()!==f.toString()&&(i[c]=[y.Copy,f]);else if("object"!==("undefined"==typeof d?"undefined":_typeof(d))||null===d)i[c]=[y.Copy,f];else{var p=r.call(d),h=r.call(f);if(p===h)if("[object Date]"===p){var g=Number(f);Number(d)!==g&&(i[c]=[y.CopyDate,g])}else if("[object RegExp]"===p)d.toString()!==f.toString()&&(i[c]=[y.Copy,clone(f)]);else{var m=Util.diff(d,f);null!==m&&(i[c]=m)}else i[c]=[y.Copy,clone(f)]}else i[c]=[y.Copy,"object"!==("undefined"==typeof f?"undefined":_typeof(f))||null===f?f:clone(f)]}else if(n&&Util.isNumeric(c)){var v=Number(c);if(!o){o="";do o+="~";while(a.some(s));i[o]=[y.SpliceArray,v,v]}v<i[o][1]&&(i[o][1]=v),v>i[o][2]&&(i[o][2]=v)}else i[c]=y.Delete;else i[c]=[y.Copy,"object"!==("undefined"==typeof f?"undefined":_typeof(f))||null===f?f:clone(f)]}return Object.keys(i).length>0?i:null}function d(e,t){for(var r=Object.keys(t||{}),n=clone(e),a=0,i=r.length;a<i;++a){var o=r[a],s=t[o];if(s===y.Delete)delete n[o];else if(Array.isArray(s))switch(s[0]){case y.SpliceArray:n.splice(s[1],1+(s[2]-s[1]));break;case y.Copy:n[o]=clone(s[1]);break;case y.CopyDate:n[o]=new Date(s[1])}else n[o]=Util.patch(n[o],s)}return n}var f=/[&<>"'`]/g,p=new RegExp(f.source),h=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),g=/&(?:amp|lt|gt|quot|apos|#39|#x27|#96|#x60);/g,m=new RegExp(g.source),v=Object.freeze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"}),y=e({Delete:0,SpliceArray:1,Copy:2,CopyDate:3});return Object.freeze(Object.defineProperties({},{toEnum:{value:e},isNumeric:{value:t},isBoolean:{value:r},slugify:{value:n},escape:{value:a},unescape:{value:i},fromCssTime:{value:o},toCssTime:{value:s},fromCssProperty:{value:u},parseUrl:{value:l},DiffOp:{value:y},diff:{value:c},patch:{value:d},random:{value:Math.random},entityEncode:{value:a},entityDecode:{value:i},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleAudio=function(){function e(){return g}function t(e){g=!!e,l("mute",g)}function r(){return p}function n(e){p=Math.clamp(e,.2,5),l("rate",p)}function a(){return h}function i(e){h=Math.clamp(e,0,1),l("volume",h)}function o(){l("stop")}function s(e,t){if("function"!=typeof t)throw new Error("callback parameter must be a function");f.set(e,t)}function u(e){f.delete(e)}function l(e,t){f.forEach(function(r){return r(e,t)})}function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(m,[null].concat(t)))}function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(v,[null].concat(t)))}var f=new Map,p=1,h=1,g=!1,m=function(){function e(t){if(_classCallCheck(this,e),Array.isArray(t))this._create(t);else{if(!(t instanceof e))throw new Error("sources parameter must be an array of either URLs or source objects");this._copy(t)}}return _createClass(e,[{key:"_create",value:function(t){if(!Array.isArray(t)||0===t.length)throw new Error("sources parameter must be an array of either URLs or source objects");var r=/^data:\s*audio\/([^;,]+)\s*[;,]/i,n=/\.([^.\/\\]+)$/,a=e.getType,i=[],o=document.createElement("audio");if(t.forEach(function(e){var t=null;switch("undefined"==typeof e?"undefined":_typeof(e)){case"string":var s=void 0;if("data:"===e.slice(0,5)){if(s=r.exec(e),null===s)throw new Error("source data URI missing media type")}else if(s=n.exec(Util.parseUrl(e).pathname),null===s)throw new Error("source URL missing file extension");var u=a(s[1]);null!==u&&(t={src:e,type:u});break;case"object":if(null===e)throw new Error("source object cannot be null");if(!e.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!e.hasOwnProperty("format"))throw new Error('source object missing required "format" property');var l=a(e.format);null!==l&&(t={src:e.src,type:l});break;default:throw new Error("invalid source value (type: "+("undefined"==typeof e?"undefined":_typeof(e))+")")}if(null!==t){var c=document.createElement("source");c.src=t.src,c.type=t.type,o.appendChild(c),i.push(t)}}),!o.hasChildNodes())if(Browser.isIE)o.src=undefined;else{var s=document.createElement("source");s.src=undefined,s.type=undefined,o.appendChild(s)}this._finalize(o,i,clone(t))}},{key:"_copy",value:function(t){if(!(t instanceof e))throw new Error("original parameter must be an instance of AudioWrapper");this._finalize(t.audio.cloneNode(!0),clone(t.sources),clone(t.originalSources))}},{key:"_finalize",value:function(e,t,r){var n=this;Object.defineProperties(this,{audio:{configurable:!0,value:e},sources:{configurable:!0,value:Object.freeze(t)},originalSources:{configurable:!0,value:Object.freeze(r)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart",function(){return n._error=!1}).on("error",function(){return n._error=!0}).find("source:last-of-type").on("error",function(){return n._trigger("error")}),SimpleAudio.subscribe(this,function(e){if(!n.audio)return void SimpleAudio.unsubscribe(n);switch(e){case"mute":n._updateAudioMute();break;case"rate":n._updateAudioRate();break;case"stop":n.stop();break;case"volume":n._updateAudioVolume()}}),this.load()}},{key:"_trigger",value:function(e){jQuery(this.audio).triggerHandler(e)}},{key:"clone",value:function(){return new e(this)}},{key:"destroy",value:function(){SimpleAudio.unsubscribe(this),this.fadeStop(),this.stop();
var e=this.audio;for(jQuery(e).off();e.hasChildNodes();)e.removeChild(e.firstChild);e.load(),this._error=!0,delete this.audio,delete this.sources,delete this.originalSources}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||SimpleAudio.mute}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=this._rate*SimpleAudio.rate}},{key:"_updateAudioVolume",value:function(){this.audio.volume=this._volume*SimpleAudio.volume}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isPlaying",value:function(){return!(this.audio.ended||this.audio.paused||!this.hasSomeData())}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isMuted",value:function(){return this._mute}},{key:"isLooped",value:function(){return this.audio.loop}},{key:"load",value:function(){"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"play",value:function(){this.audio.play()}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time=0,this._trigger(":stop")}},{key:"fadeWithDuration",value:function(e,t,r){var n=this;this.fadeStop();var a=Math.clamp(null==r?this.volume:r,0,1),i=Math.clamp(t,0,1);a!==i&&(this.volume=a,jQuery(this.audio).off("timeupdate.AudioWrapper:fadeWithDuration").one("timeupdate.AudioWrapper:fadeWithDuration",function(){var t=void 0,r=void 0;a<i?(t=a,r=i):(t=i,r=a);var o=Number(e);o<1&&(o=1);var s=25,u=(i-a)/(o/(s/1e3));n._faderId=setInterval(function(){return n.isPlaying()?(n.volume=Math.clamp(n.volume+u,t,r),0===n.volume&&n.pause(),void(n.volume===i&&(n.fadeStop(),n._trigger(":fade")))):void n.fadeStop()},s)}),this.play())}},{key:"fade",value:function(e,t){this.fadeWithDuration(5,e,t)}},{key:"fadeIn",value:function(){this.fade(1)}},{key:"fadeOut",value:function(){this.fade(0)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"on",value:function(t,r){if("function"!=typeof r)throw new Error("listener parameter must be a function");var n=e._events,a=t.trim().splitOrEmpty(/\s+/).map(function(e){var t=e.split(".",1)[0];if(!n.hasOwnProperty(t))throw new Error('unknown event "'+t+'"; valid: '+Object.keys(n).join(", "));return e.replace(t,n[t])+".AudioWrapperEvent"}).join(" ");if(""===a)throw new Error('invalid eventNames parameter "'+t+'"');return jQuery(this.audio).on(a,r),this}},{key:"one",value:function(t,r){if("function"!=typeof r)throw new Error("listener parameter must be a function");var n=e._events,a=t.trim().splitOrEmpty(/\s+/).map(function(e){var t=e.split(".",1)[0];if(!n.hasOwnProperty(t))throw new Error('unknown event "'+t+'"; valid: '+Object.keys(n).join(", "));return e.replace(t,n[t])+".AudioWrapperEvent"}).join(" ");if(""===a)throw new Error('invalid eventNames parameter "'+t+'"');return jQuery(this.audio).one(a,r),this}},{key:"off",value:function(t,r){if(r&&"function"!=typeof r)throw new Error("listener parameter must be a function");if(!t)return jQuery(this.audio).off(".AudioWrapperEvent",r);var n=e._events,a=t.trim().splitOrEmpty(/\s+/).map(function(e){var t=e.split(".",1)[0];if(t){if(!n.hasOwnProperty(t))throw new Error('unknown event "'+t+'"; valid: '+Object.keys(n).join(", "));return e.replace(t,n[t])+".AudioWrapperEvent"}return e+".AudioWrapperEvent"}).join(" ");if(""===a)throw new Error('invalid eventNames parameter "'+t+'"');return jQuery(this.audio).off(a,r),this}},{key:"duration",get:function(){return this.audio.duration}},{key:"ended",get:function(){return this.audio.ended}},{key:"loop",get:function(){return this.audio.loop},set:function(e){this.audio.loop=!!e}},{key:"mute",get:function(){return this._mute},set:function(e){this._mute=!!e,this._updateAudioMute()}},{key:"paused",get:function(){return this.audio.paused}},{key:"rate",get:function(){return this._rate},set:function(e){this._rate=Math.clamp(e,.2,5),this._updateAudioRate()}},{key:"remaining",get:function(){return this.audio.duration-this.audio.currentTime}},{key:"time",get:function(){return this.audio.currentTime},set:function(e){var t=this;try{this.audio.currentTime=e}catch(r){jQuery(this.audio).off("loadedmetadata.AudioWrapper:time").one("loadedmetadata.AudioWrapper:time",function(){return t.audio.currentTime=e})}}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=Math.clamp(e,0,1),this._updateAudioVolume()}}],[{key:"_verifyType",value:function(t){if(!t||!Has.audio)return null;var r=e._types;if(!r.hasOwnProperty(t)){var n=document.createElement("audio");r[t]=""!==n.canPlayType(t).replace(/^no$/i,"")}return r[t]?t:null}},{key:"getType",value:function(t){if(!t||!Has.audio)return null;var r=e.formats,n=t.toLowerCase(),a=r.hasOwnProperty(n)?r[n]:"audio/"+n;return e._verifyType(a)}},{key:"canPlayFormat",value:function(t){return null!==e.getType(t)}},{key:"canPlayType",value:function(t){return null!==e._verifyType(t)}}]),e}();Object.defineProperties(m,{formats:{value:{aac:"audio/aac",caf:"audio/x-caf","x-caf":"audio/x-caf",mp3:'audio/mpeg; codecs="mp3"',mpeg:'audio/mpeg; codecs="mp3"',m4a:"audio/mp4",mp4:"audio/mp4","x-m4a":"audio/mp4","x-mp4":"audio/mp4",oga:"audio/ogg",ogg:"audio/ogg",opus:'audio/ogg; codecs="opus"',wav:"audio/wav",wave:"audio/wav",weba:"audio/webm",webm:"audio/webm"}},_types:{value:{}},_events:{value:Object.freeze({canplay:"canplaythrough",end:"ended",error:"error",fade:":fade",pause:"pause",play:"playing",rate:"ratechange",seek:"seeked",stop:":stop",volume:"volumechange"})}});var v=function(){function e(t){var r=this;_classCallCheck(this,e),Object.defineProperties(this,{tracks:{configurable:!0,value:[]},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}}),Array.isArray(t)?t.forEach(function(e){return r.add(e)}):t instanceof e&&t.tracks.forEach(function(e){return r.add(e)})}return _createClass(e,[{key:"add",value:function(e){var t=this;if(null==e||"object"!==("undefined"==typeof e?"undefined":_typeof(e)))throw new Error("track parameter must be an object");var r=void 0,n=void 0,a=void 0,i=void 0;if(e instanceof m)r=!0,n=e.clone(),a=e.volume,i=e.rate;else{if(!e.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(e.track instanceof m))throw new Error('track object\'s "track" property must be an AudioWrapper object');r=e.hasOwnProperty("copy")&&e.copy,n=r?e.track.clone():e.track,a=e.hasOwnProperty("volume")?e.volume:e.track.volume,i=e.hasOwnProperty("rate")?e.rate:e.track.rate}n.stop(),n.loop=!1,n.mute=!1,n.volume=a,n.rate=i,n.on("end.AudioListEvent",function(){return t._onEnd()}),this.tracks.push({copy:r,track:n,volume:a,rate:i})}},{key:"destroy",value:function(){this.stop(),this.tracks.filter(function(e){return e.copy}).forEach(function(e){return e.track.destroy()}),delete this.tracks,delete this.queue}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isMuted",value:function(){return this._mute}},{key:"isLooped",value:function(){return this._loop}},{key:"isShuffled",value:function(){return this._shuffle}},{key:"play",value:function(){(null!==this.current&&!this.current.track.isEnded()||(0===this.queue.length&&this._buildList(),this._next()))&&this.current.track.play()}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this.queue.splice(0)}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fadeWithDuration",value:function(e,t,r){if(0===this.queue.length&&this._buildList(),null!==this.current&&!this.current.track.isEnded()||this._next()){var n=Math.clamp(t,0,1)*this.current.volume,a=void 0;null!=r&&(a=Math.clamp(r,0,1)*this.current.volume),this.current.track.fadeWithDuration(e,n,a),this._volume=t}}},{key:"fade",value:function(e,t){this.fadeWithDuration(5,e,t)}},{key:"fadeIn",value:function(){this.fade(1)}},{key:"fadeOut",value:function(){this.fade(0)}},{key:"_next",value:function(){return null!==this.current&&this.current.track.stop(),0===this.queue.length?(this.current=null,!1):(this.current=this.queue.shift(),!this.current.track.hasSource()||this.current.track.isFailed()?this._next():(this.current.track.mute=this._mute,this.current.track.rate=this.rate*this.current.rate,this.current.track.volume=this.volume*this.current.volume,!0))}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._buildList()}this._next()&&this.current.track.play()}},{key:"_buildList",value:function(){var e;this.queue.splice(0),(e=this.queue).push.apply(e,_toConsumableArray(this.tracks)),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}},{key:"duration",get:function(){return this.tracks.map(function(e){return e.track.duration}).reduce(function(e,t){return e+t},0)}},{key:"loop",get:function(){return this._loop},set:function(e){this._loop=!!e}},{key:"mute",get:function(){return this._mute},set:function(e){this._mute=!!e,null!==this.current&&(this.current.track.mute=this._mute)}},{key:"rate",get:function(){return this._rate},set:function(e){this._rate=Math.clamp(e,.2,5),null!==this.current&&(this.current.track.rate=this.rate*this.current.rate)}},{key:"remaining",get:function(){var e=this.queue.map(function(e){return e.track.duration}).reduce(function(e,t){return e+t},0);return null!==this.current&&(e+=this.current.track.remaining),e}},{key:"shuffle",get:function(){return this._shuffle},set:function(e){this._shuffle=!!e}},{key:"time",get:function(){return this.duration-this.remaining}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=Math.clamp(e,0,1),null!==this.current&&(this.current.track.volume=this.volume*this.current.volume)}}]),e}();return Object.freeze(Object.defineProperties({},{mute:{get:e,set:t},rate:{get:r,set:n},volume:{get:a,set:i},stop:{value:o},subscribe:{value:s},unsubscribe:{value:u},publish:{value:l},create:{value:c},createList:{value:d}}))}(),SimpleStore=function(){function e(e,n){if(r)return r.create(e,n);for(var a=0;a<t.length;++a)if(t[a].init(e,n))return r=t[a],r.create(e,n);throw new Error("no valid adapters found")}var t=[],r=null;return Object.freeze(Object.defineProperties({},{adapters:{value:t},create:{value:e}}))}();SimpleStore.adapters.push(function(){function e(){return r=Has.localStorage&&Has.sessionStorage}function t(e,t){if(!r)throw new Error("adapter not initialized");return new n(e,t)}var r=!1,n=function(){function e(t,r){_classCallCheck(this,e);var n=t+".",a=null,i=null;r?(a=window.localStorage,i="localStorage"):(a=window.sessionStorage,i="sessionStorage"),Object.defineProperties(this,{_engine:{value:a},_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:i},id:{value:t},persistent:{value:!!r}})}return _createClass(e,[{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function e(){for(var e=[],t=0;t<this._engine.length;++t){var r=this._engine.key(t);this._prefixRe.test(r)&&e.push(r.replace(this._prefixRe,""))}return e}},{key:"has",value:function(e){return!("string"!=typeof e||!e)&&this._engine.hasOwnProperty(this._prefix+e)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=this._engine.getItem(this._prefix+t);return null==r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{this._engine.setItem(this._prefix+t,e._serialize(r))}catch(e){throw/quota_?(?:exceeded|reached)/i.test(e.name)&&(e.message=this.name+" quota exceeded"),e}return!0}},{key:"delete",value:function(e){return!("string"!=typeof e||!e)&&(this._engine.removeItem(this._prefix+e),!0)}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}},{key:"length",get:function(){return this.keys().length}}],[{key:"_serialize",value:function(e){return LZString.compressToUTF16(JSON.stringify(e))}},{key:"_deserialize",value:function(e){return JSON.parse(LZString.decompressFromUTF16(e))}}]),e}();return Object.freeze(Object.defineProperties({},{init:{value:e},create:{value:t}}))}()),SimpleStore.adapters.push(function(){function e(e){return n="cookie"in document,n&&r(e),n}function t(e,t){if(!n)throw new Error("adapter not initialized");return new a(e,t)}function r(e){if(""!==document.cookie)for(var t=e+".",r=new RegExp("^"+RegExp.escape(t)),n=e+"!.",i=e+"*.",o=/\.(?:state|rcWarn)$/,s=document.cookie.split(/;\s*/),u=0;u<s.length;++u){var l=s[u].split("="),c=decodeURIComponent(l[0]);if(r.test(c)){var d=decodeURIComponent(l[1]);""!==d&&!function(){var e=!o.test(c);a._setCookie(c,undefined,"Thu, 01 Jan 1970 00:00:00 GMT"),a._setCookie(c.replace(r,function(){return e?n:i}),d,e?"Tue, 19 Jan 2038 03:14:07 GMT":undefined)}()}}}var n=!1,a=function(){function e(t,r){_classCallCheck(this,e);var n=""+t+(r?"!":"*")+".";Object.defineProperties(this,{_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:"cookie"},id:{value:t},persistent:{value:!!r}})}return _createClass(e,[{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function e(){if(""===document.cookie)return[];for(var t=document.cookie.split(/;\s*/),e=[],r=0;r<t.length;++r){var n=t[r].split("="),a=decodeURIComponent(n[0]);if(this._prefixRe.test(a)){var i=decodeURIComponent(n[1]);""!==i&&e.push(a.replace(this._prefixRe,""))}}return e}},{key:"has",value:function(t){return!("string"!=typeof t||!t)&&null!==e._getCookie(this._prefix+t)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=e._getCookie(this._prefix+t);return null===r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{if(e._setCookie(this._prefix+t,e._serialize(r),this.persistent?"Tue, 19 Jan 2038 03:14:07 GMT":undefined),!this.has(t))throw new Error("unknown validation error during set")}catch(e){throw e.message="cookie error: "+e.message,e}return!0}},{key:"delete",value:function(t){if("string"!=typeof t||!t||!this.has(t))return!1;try{if(e._setCookie(this._prefix+t,undefined,"Thu, 01 Jan 1970 00:00:00 GMT"),this.has(t))throw new Error("unknown validation error during delete")}catch(e){throw e.message="cookie error: "+e.message,e}return!0}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}},{key:"length",get:function(){return this.keys().length}}],[{key:"_getCookie",value:function(e){if(!e||""===document.cookie)return null;for(var t=document.cookie.split(/;\s*/),r=0;r<t.length;++r){var n=t[r].split("="),a=decodeURIComponent(n[0]);if(e===a){var i=decodeURIComponent(n[1]);return i||null}}return null}},{key:"_setCookie",value:function(e,t,r){if(e){var n=encodeURIComponent(e)+"=";null!=t&&(n+=encodeURIComponent(t)),null!=r&&(n+="; "+r),n+="; path=/",document.cookie=n}}},{key:"_serialize",value:function(e){return LZString.compressToBase64(JSON.stringify(e))}},{key:"_deserialize",value:function(e){return JSON.parse(LZString.decompressFromBase64(e))}}]),e}();return Object.freeze(Object.defineProperties({},{init:{value:e},create:{value:t}}))}());var DebugView=function(){var e=function(){function e(t,r,n,a){_classCallCheck(this,e),Object.defineProperties(this,{parent:{value:t},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:a,"aria-label":a,"data-type":null!=r?r:"","data-name":null!=n?n:""}).addClass("debug"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(e,[{key:"append",value:function(e){return jQuery(this.view).append(e),this}},{key:"modes",value:function(e){var t=this;if(null==e){var r=function(){var e={};return t.view.className.splitOrEmpty(/\s+/).forEach(function(t){"debug"!==t&&(e[t]=!0)}),{v:e}}();if("object"===("undefined"==typeof r?"undefined":_typeof(r)))return r.v}else if("object"===("undefined"==typeof e?"undefined":_typeof(e)))return Object.keys(e).forEach(function(t){this[e[t]?"addClass":"removeClass"](t)},jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var e=jQuery(this.view);this.view.hasChildNodes()&&e.contents().appendTo(this.parent),e.remove(),jQuery(this.break).remove()}},{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(e){this.view.setAttribute("data-type",null!=e?e:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(e){this.view.setAttribute("data-name",null!=e?e:"")}},{key:"title",get:function(){return this.view.title},set:function(e){this.view.title=e}}],[{key:"init",value:function(){jQuery('<button id="debug-view-toggle">'+L10n.get("debugViewTitle")+"</button>").ariaClick({label:L10n.get("debugViewToggle")},function(){return e.toggle()}).prependTo("#ui-bar-body"),e.enable()}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?e.disable():e.enable()}}]),e}();return e}(),PRNGWrapper=function(){var e=function(){function e(t,r){_classCallCheck(this,e),Object.defineProperties(this,new Math.seedrandom(t,r,function(e,t){return{_prng:{value:e},seed:{writable:!0,value:t},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}}))}return _createClass(e,null,[{key:"marshal",value:function(e){if(!e||!e.hasOwnProperty("seed")||!e.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:e.seed,pull:e.pull}}},{key:"unmarshal",value:function(t){if(!t||!t.hasOwnProperty("seed")||!t.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var r=new e(t.seed,!1),n=t.pull;n>0;--n)r.random();return r}}]),e}();return e}(),StyleWrapper=function(){var e=/\[[<>]?[Ii][Mm][Gg]\[(?:\s|\S)*?\]\]+/g,t=new RegExp(e.source),r=function(){function r(e){if(_classCallCheck(this,r),null==e)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:e}})}return _createClass(r,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(e){this.clear(),this.add(e)}},{key:"add",value:function(r){var n=r;t.test(n)&&(e.lastIndex=0,n=n.replace(e,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(t.hasOwnProperty("error")||t.pos<e.length)return e;var r=t.source;if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text)}return'url("'+r.replace(/"/g,"%22")+'")'})),this.style.styleSheet?this.style.styleSheet.cssText+=n:this.style.appendChild(document.createTextNode(n))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),r}();return r}(),L10n=function(){function e(){r()}function t(e,t){if(!e)return"";var r=function(e){var t=void 0;return e.some(function(e){return!!l10nStrings.hasOwnProperty(e)&&(t=e,!0)}),t}(Array.isArray(e)?e:[e]);if(!r)return"";for(var i=50,o=l10nStrings[r],s=0;a.test(o);){if(++s>i)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");n.lastIndex=0,o=o.replace(n,function(e){var r=e.slice(1,-1);return t&&t.hasOwnProperty(r)?t[r]:l10nStrings.hasOwnProperty(r)?l10nStrings[r]:void 0})}return o}function r(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach(function(e){try{var t=void 0;switch(e){case"identity":t=strings.identity;break;case"aborting":t=strings.aborting;break;case"cancel":t=strings.cancel;break;case"close":t=strings.close;break;case"ok":t=strings.ok;break;case"errorTitle":t=strings.errors.title;break;case"errorNonexistentPassage":t=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":t=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":t=strings.errors.saveIdMismatch;break;case"warningDegraded":t=strings.warnings.degraded;break;case"debugViewTitle":t=strings.debugView.title;break;case"debugViewToggle":t=strings.debugView.toggle;break;case"uiBarToggle":t=strings.uiBar.toggle;break;case"uiBarBackward":t=strings.uiBar.backward;break;case"uiBarForward":t=strings.uiBar.forward;break;case"uiBarJumpto":t=strings.uiBar.jumpto;break;case"jumptoTitle":t=strings.jumpto.title;break;case"jumptoTurn":t=strings.jumpto.turn;break;case"jumptoUnavailable":t=strings.jumpto.unavailable;break;case"savesTitle":t=strings.saves.title;break;case"savesDisallowed":t=strings.saves.disallowed;break;case"savesEmptySlot":t=strings.saves.emptySlot;break;case"savesIncapable":t=strings.saves.incapable;break;case"savesLabelAuto":t=strings.saves.labelAuto;break;case"savesLabelDelete":t=strings.saves.labelDelete;break;case"savesLabelExport":t=strings.saves.labelExport;break;case"savesLabelImport":t=strings.saves.labelImport;break;case"savesLabelLoad":t=strings.saves.labelLoad;break;case"savesLabelClear":t=strings.saves.labelClear;break;case"savesLabelSave":t=strings.saves.labelSave;break;case"savesLabelSlot":t=strings.saves.labelSlot;break;case"savesSavedOn":t=strings.saves.savedOn;break;case"savesUnavailable":t=strings.saves.unavailable;break;case"savesUnknownDate":t=strings.saves.unknownDate;break;case"settingsTitle":t=strings.settings.title;break;case"settingsOff":t=strings.settings.off;break;case"settingsOn":t=strings.settings.on;break;case"settingsReset":t=strings.settings.reset;break;case"restartTitle":t=strings.restart.title;break;case"restartPrompt":t=strings.restart.prompt;break;case"shareTitle":t=strings.share.title;break;case"autoloadTitle":t=strings.autoload.title;break;case"autoloadCancel":t=strings.autoload.cancel;break;case"autoloadOk":t=strings.autoload.ok;break;case"autoloadPrompt":t=strings.autoload.prompt;break;case"macroBackText":t=strings.macros.back.text;break;case"macroReturnText":t=strings.macros.return.text}t&&(l10nStrings[e]=t.replace(/%\w+%/g,function(e){return"{"+e.slice(1,-1)+"}"}))}catch(e){}})}var n=/\{\w+\}/g,a=new RegExp(n.source);return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:t}}))}(),strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugViewTitle:"Debug View",debugViewToggle:"Toggle the debug view",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesEmptySlot:"— slot empty —",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesSavedOn:"Saved on",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=function(){function e(){throw new Error("Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code")}function t(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}var r=Object.seal({debug:!1,addVisitedLinkClass:!1,cleanupWikifierOutput:!1,loadDelay:0,history:Object.seal({controls:!0,maxStates:100,get mode(){e()},set mode(t){e()},get tracking(){t()},set tracking(e){t()}}),macros:Object.seal({ifAssignmentError:!0,maxLoopIterations:1e3}),navigation:Object.seal({override:undefined}),passages:Object.seal({descriptions:undefined,displayTitles:!1,start:undefined,transitionOut:undefined}),saves:Object.seal({autoload:undefined,autosave:undefined,id:"untitled-story",isAllowed:undefined,onLoad:undefined,onSave:undefined,slots:8,version:undefined}),ui:Object.seal({stowBarInitially:800,updateStoryElements:!0}),transitionEndEventName:function(){for(var e=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),t=[].concat(_toConsumableArray(e.keys())),r=document.createElement("div"),n=0;n<t.length;++n)if(r.style[t[n]]!==undefined)return e.get(t[n]);return""}()});return r}(),Patterns=function(){var e=/[\u0150\u0170]/g.test("Ő"),t=function(){var e=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),t=/\s/,r="";return e.forEach(function(e,n){t.test(n)||(r+=e)}),r?"[\\s"+r+"]":"\\s"}(),r="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",n="[\\n\\r\\u2028\\u2029]",a="[0-9A-Z_a-z\\-\\u00C0-\\u00D6\\u00D8-\\u00DE\\u00DF-\\u00F6\\u00F8-\\u00FF"+(e?"\\u0150\\u0170\\u0151\\u0171":"")+"]",i=a.replace("\\-",""),o="[$A-Z_a-z]",s=o+"[$0-9A-Z_a-z]*",u="[$_]",l=u+s,c="[A-Za-z][\\w-]*|[=-]",d="("+a+"+)\\(([^\\)\\|\\n]+)\\):",f="("+a+"+):([^;\\|\\n]+);",p="((?:\\."+a+"+)+);",h="((?:#"+a+"+)+);",g=d+"|"+f+"|"+p+"|"+h,m="(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+";return Object.freeze({space:t,spaceNoTerminator:r,lineTerminator:n,anyLetter:a,anyLetterStrict:i,identifierFirstChar:o,identifier:s,variableSigil:u,variable:l,macroName:c,inlineCss:g,url:m})}(),Scripting=function(){function addAccessibleClickHandler(e,t,r,n,a){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var i=void 0,o=void 0;if("function"==typeof t?(i=t,o={namespace:n,one:!!r}):(i=r,o={namespace:a,one:!!n,selector:t}),"function"!=typeof i)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(e).ariaClick(o,i)}function insertElement(e,t,r,n,a,i){var o=jQuery(document.createElement(t));return r&&o.attr("id",r),n&&o.addClass(n),i&&o.attr("title",i),a&&o.text(a),e&&o.appendTo(e),o[0]}function insertText(e,t){jQuery(e).append(document.createTextNode(t))}function removeChildren(e){jQuery(e).empty()}function removeElement(e){jQuery(e).remove()}function fade(e,t){function r(){i+=.05*a,n(o,Math.easeInOut(i)),(1===a&&i>=1||a===-1&&i<=0)&&(e.style.visibility="in"===t.fade?"visible":"hidden",o.parentNode.replaceChild(e,o),o=null,window.clearInterval(s),t.onComplete&&t.onComplete())}function n(e,t){e.style.zoom=1,e.style.filter="alpha(opacity="+Math.floor(100*t)+")",e.style.opacity=t}var a="in"===t.fade?1:-1,i=void 0,o=e.cloneNode(!0),s=void 0;e.parentNode.replaceChild(o,e),"in"===t.fade?(i=0,o.style.visibility="visible"):i=1,n(o,i),s=window.setInterval(r,25)}function scrollWindowTo(e,t){function r(){c+=i,window.scroll(0,o+l*(u*Math.easeInOut(c))),c>=1&&window.clearInterval(d)}function n(e){for(var t=0;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;return t}function a(e){var t=n(e),r=t+e.offsetHeight,a=window.scrollY?window.scrollY:document.body.scrollTop,i=window.innerHeight?window.innerHeight:document.body.clientHeight,o=a+i;return t>=a&&r>o&&e.offsetHeight<i?t-(i-e.offsetHeight)+20:t}var i=null!=t?Number(t):.1;Number.isNaN(i)||!Number.isFinite(i)||i<0?i=.1:i>1&&(i=1);var o=window.scrollY?window.scrollY:document.body.scrollTop,s=a(e),u=Math.abs(o-s),l=o>s?-1:1,c=0,d=void 0;d=window.setInterval(r,25)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=0,n=e.length;r<n;++r)if(!t.includes(e[r]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=t.length-1,n=State.turns,a=0,i=e.length;a<i&&n>-1;++a){var o=t.lastIndexOf(e[a]);n=Math.min(n,o===-1?-1:r-o)}return n}function passage(){return State.passage}function previous(){var e=State.passages;if(arguments.length>0){var t=Number(arguments[0]);if(!Number.isSafeInteger(t)||t<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return e.length>t?e[e.length-1-t]:""}for(var r=e.length-2;r>=0;--r)if(e[r]!==State.passage)return e[r];return""}function random(){if(0===arguments.length)throw new Error("random called with insufficient parameters");var e=void 0,t=void 0;if(1===arguments.length?(e=0,t=arguments[0]):(e=arguments[0],t=arguments[1]),e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(State.random()*(t-e+1))+e}function randomFloat(){if(0===arguments.length)throw new Error("randomFloat called with insufficient parameters");var e=void 0,t=void 0;if(1===arguments.length?(e=0,t=arguments[0]):(e=arguments[0],t=arguments[1]),e>t){var r=[t,e];e=r[0],t=r[1]}return State.random()*(t-e)+e}function tags(){
if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var e=Array.prototype.concat.apply([],arguments),t=[],r=0,n=e.length;r<n;++r)t=t.concat(Story.get(e[r]).tags);return t}function time(){return null===Engine.lastPlay?0:Date.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),t=State.passages,r=State.turns,n=0,a=e.length;n<a&&r>0;++n)r=Math.min(r,t.count(e[n]));return r}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],arguments),t=e.length,r=State.passages,n=new Map,a=0,i=0,o=r.length;i<o;++i){var s=r[i];if(n.has(s))n.get(s)&&++a;else{var u=Story.get(s).tags;if(u.length>0){for(var l=0,c=0;c<t;++c)u.includes(e[c])&&++l;l===t?(++a,n.set(s,!0)):n.set(s,!1)}}}return a}function evalJavaScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,String(code),output)}function evalTwineScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output)}var _ref7=function(){function e(e){return e.reduce(function(e,t){return e=e.then(t)},Promise.resolve())}function t(e){return Util.parseUrl(e).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function r(){function r(e){return new Promise(function(r,n){jQuery(document.createElement("script")).one("load abort error",function(e){jQuery(e.target).off(),"load"===e.type?r(e.target):n(e.target)}).appendTo(document.head).attr({id:"script-imported-"+t(e),type:"text/javascript",src:e})})}for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return Promise.all(a.map(function(t){return Array.isArray(t)?e(t.map(function(e){return function(){return r(e)}})):r(t)}))}function n(){function r(e){return new Promise(function(r,n){jQuery(document.createElement("link")).one("load abort error",function(e){jQuery(e.target).off(),"load"===e.type?r(e.target):n(e.target)}).appendTo(document.head).attr({id:"style-imported-"+t(e),rel:"stylesheet",href:e})})}for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return Promise.all(a.map(function(t){return Array.isArray(t)?e(t.map(function(e){return function(){return r(e)}})):r(t)}))}return{importScripts:r,importStyles:n}}(),importScripts=_ref7.importScripts,importStyles=_ref7.importStyles,parse=function(){function e(e){if(0!==r.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var a=e,i=void 0;null!==(i=r.exec(a));)if(i[5]){var o=i[5];if("$"===o||"_"===o)continue;if(n.test(o))o=o[0];else if("is"===o){var s=r.lastIndex,u=a.slice(s);/^\s+not\b/.test(u)&&(a=a.splice(s,u.search(/\S/)),o="isnot")}t.hasOwnProperty(o)&&(a=a.splice(i.index,o.length,t[o]),r.lastIndex+=t[o].length-o.length)}return a}var t=Object.freeze({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),r=new RegExp(["(\"\"|'')",'("(?:\\\\.|[^"\\\\])+")',"('(?:\\\\.|[^'\\\\])+')","([=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),n=new RegExp("^"+Patterns.variable);return e}();return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),Wikifier=function(){var e=0,t=function(){function t(r,n,a){_classCallCheck(this,t),t.Parser.Profile.isEmpty()&&t.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(n)},options:{writable:!0,value:Object.assign({profile:"all"},a)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==r?this.output=document.createDocumentFragment():r.jquery?this.output=r[0]:this.output=r;try{++e,this.subWikify(this.output),1===e&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--e}}return _createClass(t,[{key:"subWikify",value:function(e,r,n){var a=this.output,i=void 0;this.output=e,null!=n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(i=this.options,this.options=Object.assign({},this.options,n));var o=t.Parser.Profile.get(this.options.profile),s=r?new RegExp("(?:"+r+")",this.options.ignoreTerminatorCase?"gim":"gm"):null,u=void 0,l=void 0;do{if(o.parserRegExp.lastIndex=this.nextMatch,s&&(s.lastIndex=this.nextMatch),l=o.parserRegExp.exec(this.source),u=s?s.exec(this.source):null,u&&(!l||u.index<=l.index))return u.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,u.index),this.matchStart=u.index,this.matchLength=u[0].length,this.matchText=u[0],this.nextMatch=s.lastIndex,this.output=a,void(i&&(this.options=i));if(l){l.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,l.index),this.matchStart=l.index,this.matchLength=l[0].length,this.matchText=l[0],this.nextMatch=o.parserRegExp.lastIndex;for(var c=void 0,d=1,f=l.length;d<f;++d)if(l[d]){c=d-1;break}if(o.parsers[c].handler(this),null!=TempState.break)break}}while(u||l);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=a,i&&(this.options=i)}},{key:"outputText",value:function(e,t,r){jQuery(e).append(document.createTextNode(this.source.substring(t,r)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this.rawArgs())}}],[{key:"getValue",value:function(e){var r=t.parseStoryVariable(e),n=void 0;if(null!==r){n=r.store;for(var a=r.names,i=0,o=a.length;i<o;++i){if("undefined"==typeof n[a[i]]){n=undefined;break}n=n[a[i]]}}return n}},{key:"setValue",value:function(e,r){var n=t.parseStoryVariable(e);if(null!==n){for(var a=n.names,i=a.pop(),o=n.store,s=0,u=a.length;s<u;++s){if("undefined"==typeof o[a[s]]){o=undefined;break}o=o[a[s]]}if(o!==undefined)return o[i]=r,!0}return!1}},{key:"parseStoryVariable",value:function(e){for(var r={store:"$"===e[0]?State.variables:State.temporary,names:[]},n=e,a=void 0;null!==(a=t._parseVarRegExp.exec(n));)n=n.slice(a[0].length),a[1]?r.names.push(a[1]):a[2]?r.names.push(a[2]):a[3]?r.names.push(a[3]):a[4]?r.names.push(a[4]):a[5]?r.names.push(t.getValue(a[5])):a[6]&&r.names.push(Number(a[6]));return""===n?r:null}},{key:"wikifyEval",value:function(e){var r=document.createDocumentFragment();new t(r,e);var n=r.querySelector(".error");if(null!==n)throw new Error(n.textContent.replace(/^(?:(?:Uncaught\s+)?Error:\s+)+/,""));return r}},{key:"createInternalLink",value:function(e,t,r,n){var a=jQuery(document.createElement("a"));return null!=t&&(a.attr("data-passage",t),Story.has(t)?(a.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(t)&&a.addClass("link-visited")):a.addClass("link-broken"),a.ariaClick({one:!0},function(){"function"==typeof n&&n(),Engine.play(t)})),r&&a.append(document.createTextNode(r)),e&&a.appendTo(e),a[0]}},{key:"createExternalLink",value:function(e,t,r){var n=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(r).appendTo(e);return null!=t&&n.attr({href:t,tabindex:0}),n[0]}},{key:"isExternalLink",value:function(e){if(Story.has(e))return!1;var t=new RegExp("^"+Patterns.url,"gim");return t.test(e)||/[\/.?#]/.test(e)}}]),t}();return Object.defineProperty(t,"Parser",{value:function(){function e(){return d}function t(e){if("object"!==("undefined"==typeof e?"undefined":_typeof(e)))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!e.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof e.name)throw new Error('parser object "name" property must be a string');if(!e.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof e.match)throw new Error('parser object "match" property must be a string');if(!e.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof e.handler)throw new Error('parser object "handler" property must be a function');if(e.hasOwnProperty("profiles")&&!Array.isArray(e.profiles))throw new Error('parser object "profiles" property must be an array');if(a(e.name))throw new Error('cannot clobber existing parser "'+e.name+'"');d.push(e)}function r(e){var t=d.find(function(t){return t.name===e});t&&d.delete(t)}function n(){return 0===d.length}function a(e){return!!d.find(function(t){return t.name===e})}function i(e){return d.find(function(t){return t.name===e})||null}function o(){return f}function s(){var e=d,t=e.filter(function(e){return!Array.isArray(e.profiles)||e.profiles.includes("core")});return f=Object.freeze({all:{parsers:e,parserRegExp:new RegExp(e.map(function(e){return"("+e.match+")"}).join("|"),"gm")},core:{parsers:t,parserRegExp:new RegExp(t.map(function(e){return"("+e.match+")"}).join("|"),"gm")}})}function u(){return"object"!==("undefined"==typeof f?"undefined":_typeof(f))||0===Object.keys(f).length}function l(e){if("object"!==("undefined"==typeof f?"undefined":_typeof(f))||!f.hasOwnProperty(e))throw new Error('nonexistent parser profile "'+e+'"');return f[e]}function c(e){return"object"===("undefined"==typeof f?"undefined":_typeof(f))&&f.hasOwnProperty(e)}var d=[],f=void 0;return Object.freeze(Object.defineProperties({},{parsers:{get:e},add:{value:t},delete:{value:r},isEmpty:{value:n},has:{value:a},get:{value:i},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:o},compile:{value:s},isEmpty:{value:u},has:{value:c},get:{value:l}}))}}))}()}),Object.defineProperties(t,{_parseVarRegExp:{value:new RegExp("^(?:"+Patterns.variableSigil+"("+Patterns.identifier+")|\\.("+Patterns.identifier+")|\\[(?:(?:\"((?:\\\\.|[^\"\\\\])+)\")|(?:'((?:\\\\.|[^'\\\\])+)')|("+Patterns.variableSigil+Patterns.identifierFirstChar+".*)|(\\d+))\\])")},helpers:{value:{}},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(t.helpers,{inlineCss:{value:function(){function e(e){var r={classes:[],id:"",styles:{}},n=void 0;do{t.lastIndex=e.nextMatch;var a=t.exec(e.source);n=a&&a.index===e.nextMatch,n&&(a[1]?r.styles[Util.fromCssProperty(a[1])]=a[2].trim():a[3]?r.styles[Util.fromCssProperty(a[3])]=a[4].trim():a[5]?r.classes=r.classes.concat(a[5].slice(1).split(/\./)):a[6]&&(r.id=a[6].slice(1).split(/#/).pop()),e.nextMatch=t.lastIndex)}while(n);return r}var t=new RegExp(Patterns.inlineCss,"gm");return e}()},evalText:{value:function(e){var t=void 0;try{t=Scripting.evalTwineScript(e),null==t||"function"==typeof t?t=e:(t=String(t),/\[(?:object(?:\s+[^\]]+)?|native\s+code)\]/.test(t)&&(t=e))}catch(r){t=e}return t}},evalPassageId:{value:function(e){return null==e||Story.has(e)?e:t.helpers.evalText(e)}},hasBlockContext:{value:function(e){for(var t="function"==typeof window.getComputedStyle,r=e.length-1;r>=0;--r){var n=e[r];switch(n.nodeType){case Node.ELEMENT_NODE:var a=n.nodeName.toUpperCase();if("BR"===a)return!0;var i=t?window.getComputedStyle(n,null):n.currentStyle;if(i&&i.display){if("none"===i.display)continue;return"block"===i.display}switch(a){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){function e(){if(!a&&(a=t.Parser.get("macro"),!a))throw new Error('cannot find "macro" parser');return a}function r(){for(var t=a||e(),r=new Set,n=t.context;null!==n;n=n.parent)n._shadows&&n._shadows.forEach(function(e){return r.add(e)});return[].concat(_toConsumableArray(r))}function n(e){var t={};return r().forEach(function(e){var r=e.slice(1),n="$"===e[0]?State.variables:State.temporary;t[e]=n[r]}),function(){var r=Object.keys(t),n=r.length>0?{}:null;try{return r.forEach(function(e){var r=e.slice(1),a="$"===e[0]?State.variables:State.temporary;a.hasOwnProperty(r)&&(n[r]=a[r]),a[r]=t[e]}),Scripting.evalJavaScript(e)}finally{r.forEach(function(e){var r=e.slice(1),a="$"===e[0]?State.variables:State.temporary;t[e]=a[r],n.hasOwnProperty(r)?a[r]=n[r]:delete a[r]})}}}var a=null;return n}()},parseSquareBracketedMarkup:{value:function(e){function t(){return d>=e.source.length?u:e.source[d++]}function r(){return d>=e.source.length?u:e.source[d]}function n(t){return t<1||d+t>=e.source.length?u:e.source[d+t]}function a(){return{error:String.format.apply(String,arguments),pos:d}}function i(){c=d}function o(t){var r=e.source.slice(c,d).trim();if(""===r)throw new Error("malformed wiki "+(h?"link":"image")+", empty "+t+" component");"link"===t&&"~"===r[0]?(l.forceInternal=!0,l.link=r.slice(1)):l[t]=r,c=d}function s(e){++d;e:for(;;){switch(r()){case"\\":++d;var t=r();if(t!==u&&"\n"!==t)break;case u:case"\n":return u;case e:break e}++d}return d}var u=-1,l={},c=e.matchStart,d=c+1,f=void 0,p=void 0,h=void 0,g=void 0;if(g=r(),"["===g)h=l.isLink=!0;else{switch(h=!1,g){case"<":l.align="left",++d;break;case">":l.align="right",++d}if(!/^[Ii][Mm][Gg]$/.test(e.source.slice(d,d+3)))return a("malformed square-bracketed wiki markup");d+=3,l.isImage=!0}if("["!==t())return a("malformed wiki {0}",h?"link":"image");f=1,p=0,i();try{e:for(;;){switch(g=r()){case u:case"\n":return a("unterminated wiki {0}",h?"link":"image");case'"':if(s(g)===u)return a("unterminated double quoted string in wiki {0}",h?"link":"image");break;case"'":if((4===p||3===p&&h)&&s(g)===u)return a("unterminated single quoted string in wiki {0}",h?"link":"image");break;case"|":0===p&&(o(h?"text":"title"),++c,p=1);break;case"-":0===p&&">"===n(1)&&(o(h?"text":"title"),++d,c+=2,p=1);break;case"<":0===p&&"-"===n(1)&&(o(h?"link":"source"),++d,c+=2,p=2);break;case"[":if(p===-1)return a("unexpected left square bracket '['");++f,1===f&&(i(),++c);break;case"]":if(--f,0===f){switch(p){case 0:case 1:o(h?"link":"source"),p=3;break;case 2:o(h?"text":"title"),p=3;break;case 3:h?(o("setter"),p=-1):(o("link"),p=4);break;case 4:o("setter"),p=-1}if(++d,"]"===r()){++d;break e}--d}}++d}}catch(e){return a(e.message)}return l.pos=d,l}}}),t}();!function(){Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(\\/?"+Patterns.macroName+")(?:\\s*)((?:(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>","gm"),argsPattern:["(``)","`((?:\\\\.|[^`\\\\])+)`","(\"\"|'')",'("(?:\\\\.|[^"\\\\])+")',"('(?:\\\\.|[^'\\\\])+')","(\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)","([^`\"'\\s]+)","(`|\"|')"].join("|"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(e){var t=this.lookahead.lastIndex=e.matchStart;if(this.parseTag(e)){var r=e.nextMatch,n=this.working.source,a=this.working.name,i=this.working.arguments,o=void 0;try{if(o=Macro.get(a),!o){if(Macro.tags.has(a)){var s=Macro.tags.get(a);return throwError(e.output,"child tag <<"+a+">> was found outside of a call to its parent macro"+(1===s.length?"":"s")+" <<"+s.join(">>, <<")+">>",e.source.slice(t,e.nextMatch))}return throwError(e.output,"macro <<"+a+">> does not exist",e.source.slice(t,e.nextMatch))}var u=null;if(o.hasOwnProperty("tags")&&(u=this.parseBody(e,o),!u))return e.nextMatch=r,throwError(e.output,"cannot find a closing tag for macro <<"+a+">>",e.source.slice(t,e.nextMatch)+"…");if("function"!=typeof o.handler)return throwError(e.output,"macro <<"+a+">> handler function "+(o.hasOwnProperty("handler")?"is not a function":"does not exist"),e.source.slice(t,e.nextMatch));var l=u?u[0].args:this.createArgs(i,o.hasOwnProperty("skipArgs")&&!!o.skipArgs||o.hasOwnProperty("skipArg0")&&!!o.skipArg0);if(o.hasOwnProperty("_MACRO_API")){this.context=new MacroContext({parent:this.context,macro:o,name:a,args:l,payload:u,parser:e,source:n});try{o.handler.call(this.context)}finally{this.context=this.context.parent}}else{var c=e._rawArgs;e._rawArgs=i,o.handler(e.output,a,l,e,u),e._rawArgs=c}}catch(r){return throwError(e.output,"cannot execute "+(o&&o.isWidget?"widget":"macro")+" <<"+a+">>: "+r.message,e.source.slice(t,e.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else e.outputText(e.output,e.matchStart,e.nextMatch)},parseTag:function(e){var t=this.lookahead.exec(e.source);return!(!t||t.index!==e.matchStart||!t[1])&&(e.nextMatch=this.lookahead.lastIndex,this.working.source=e.source.slice(t.index,this.lookahead.lastIndex),this.working.name=t[1],this.working.arguments=t[2],this.working.index=t.index,!0)},parseBody:function(e,t){for(var r=this.working.name,n="/"+r,a="end"+r,i=!!Array.isArray(t.tags)&&t.tags,o=[],s=t.hasOwnProperty("skipArgs")&&t.skipArgs,u=t.hasOwnProperty("skipArg0")&&t.skipArg0,l=-1,c=1,d=this.working.source,f=this.working.name,p=this.working.arguments,h=e.nextMatch;(e.matchStart=e.source.indexOf(this.match,e.nextMatch))!==-1;)if(this.parseTag(e)){var g=this.working.source,m=this.working.name,v=this.working.arguments,y=this.working.index,b=e.nextMatch;switch(m){case r:++c;break;case a:case n:--c;break;default:if(1===c&&i)for(var w=0,k=i.length;w<k;++w)m===i[w]&&(o.push({source:d,name:f,arguments:p,args:this.createArgs(p,s||0===o.length&&u),contents:e.source.slice(h,y)}),d=g,f=m,p=v,h=b)}if(0===c){o.push({source:d,name:f,arguments:p,args:this.createArgs(p,s||0===o.length&&u),contents:e.source.slice(h,y)}),l=b;break}}else this.lookahead.lastIndex=e.nextMatch=e.matchStart+this.match.length;return l!==-1?(e.nextMatch=l,o):null},createArgs:function(e,t){var r=t?[]:this.parseArgs(e);return Object.defineProperties(r,{raw:{value:e},full:{value:Scripting.parse(e)}}),r},parseArgs:function(e){for(var t=new RegExp(this.argsPattern,"gm"),r=[],n=new RegExp("^"+Patterns.variable),a=void 0;null!==(a=t.exec(e));){var i=void 0;if(a[1])i=undefined;else if(a[2]){i=a[2];try{i=Scripting.evalTwineScript(i)}catch(e){throw new Error('unable to parse macro argument "'+i+'": '+e.message)}}else if(a[3])i="";else if(a[4]){i=a[4];try{i=Scripting.evalJavaScript(i)}catch(e){throw new Error("unable to parse macro argument '"+i+"': "+e.message)}}else if(a[5]){i=a[5];try{i=Scripting.evalJavaScript(i)}catch(e){throw new Error('unable to parse macro argument "'+i+'": '+e.message)}}else if(a[6]){i=a[6];var o=Wikifier.helpers.parseSquareBracketedMarkup({source:i,matchStart:0});if(o.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'+i+'": '+o.error);if(o.pos<i.length)throw new Error('unable to parse macro argument "'+i+'": unexpected character(s) "'+i.slice(o.pos)+'" (pos: '+o.pos+")");o.isLink?(i={isLink:!0},i.count=o.hasOwnProperty("text")?2:1,i.link=Wikifier.helpers.evalPassageId(o.link),i.text=o.hasOwnProperty("text")?Wikifier.helpers.evalText(o.text):i.link,i.external=!o.forceInternal&&Wikifier.isExternalLink(i.link),i.setFn=o.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(o.setter)):null):o.isImage&&(i=function(e){var t={source:e,isImage:!0};if("data:"!==e.slice(0,5)&&Story.has(e)){var r=Story.get(e);r.tags.includes("Twine.image")&&(t.source=r.text,t.passage=r.title)}return t}(Wikifier.helpers.evalPassageId(o.source)),o.hasOwnProperty("align")&&(i.align=o.align),o.hasOwnProperty("title")&&(i.title=Wikifier.helpers.evalText(o.title)),o.hasOwnProperty("link")&&(i.link=Wikifier.helpers.evalPassageId(o.link),i.external=!o.forceInternal&&Wikifier.isExternalLink(i.link)),i.setFn=o.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(o.setter)):null)}else if(a[7])if(i=a[7],n.test(i))i=Wikifier.getValue(i);else if(/^(?:settings|setup)[.[]/.test(i))try{i=Scripting.evalTwineScript(i)}catch(e){throw new Error('unable to parse macro argument "'+i+'": '+e.message)}else if("null"===i)i=null;else if("undefined"===i)i=undefined;else if("true"===i)i=!0;else if("false"===i)i=!1;else{var s=Number(i);Number.isNaN(s)||(i=s)}else if(a[8]){var u=void 0;switch(a[8]){case"`":u="backtick expression";break;case'"':u="double quoted string";break;case"'":u="single quoted string"}throw new Error("unterminated "+u+" in macro argument string")}r.push(i)}return r}}),Wikifier.Parser.add({name:"prettyLink",profiles:["core"],match:"\\[\\[[^[]",handler:function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup(e);if(t.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=t.pos;var r=Wikifier.helpers.evalPassageId(t.link),n=t.hasOwnProperty("text")?Wikifier.helpers.evalText(t.text):r,a=t.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(t.setter)):null,i=(Config.debug?new DebugView(e.output,"wiki-link","[[link]]",e.source.slice(e.matchStart,e.nextMatch)):e).output;t.forceInternal||!Wikifier.isExternalLink(r)?Wikifier.createInternalLink(i,r,n,a):Wikifier.createExternalLink(i,r,n)}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(e){e.outputText(Wikifier.createExternalLink(e.output,e.matchText),e.matchStart,e.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup(e);if(t.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=t.pos;var r=void 0;Config.debug&&(r=new DebugView(e.output,"wiki-image",t.hasOwnProperty("link")?"[img[][link]]":"[img[]]",e.source.slice(e.matchStart,e.nextMatch)),r.modes({block:!0}));var n=t.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(t.setter)):null,a=(Config.debug?r:e).output,i=void 0;if(t.hasOwnProperty("link")){var o=Wikifier.helpers.evalPassageId(t.link);a=t.forceInternal||!Wikifier.isExternalLink(o)?Wikifier.createInternalLink(a,o,null,n):Wikifier.createExternalLink(a,o),a.classList.add("link-image")}if(a=jQuery(document.createElement("img")).appendTo(a).get(0),i=Wikifier.helpers.evalPassageId(t.source),"data:"!==i.slice(0,5)&&Story.has(i)){var s=Story.get(i);s.tags.includes("Twine.image")&&(a.setAttribute("data-passage",s.title),i=s.text)}a.src=i,t.hasOwnProperty("title")&&(a.title=Wikifier.helpers.evalText(t.title)),t.hasOwnProperty("align")&&(a.align=t.align)}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(jQuery(document.createElement("pre")).text(t[1]).appendTo(e.output),e.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(e){switch(e.matchText){case"''":e.subWikify(jQuery(document.createElement("strong")).appendTo(e.output).get(0),"''");break;case"//":e.subWikify(jQuery(document.createElement("em")).appendTo(e.output).get(0),"//");break;case"__":e.subWikify(jQuery(document.createElement("u")).appendTo(e.output).get(0),"__");break;case"^^":e.subWikify(jQuery(document.createElement("sup")).appendTo(e.output).get(0),"\\^\\^");break;case"~~":e.subWikify(jQuery(document.createElement("sub")).appendTo(e.output).get(0),"~~");break;case"==":e.subWikify(jQuery(document.createElement("s")).appendTo(e.output).get(0),"==");break;case"{{{":var t=/\{\{\{((?:.|\n)*?)\}\}\}/gm;t.lastIndex=e.matchStart;var r=t.exec(e.source);r&&r.index===e.matchStart&&(jQuery(document.createElement("code")).text(r[1]).appendTo(e.output),e.nextMatch=t.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRegExp:/\s*\n/gm,handler:function(e){var t=Wikifier.helpers.inlineCss(e);this.blockRegExp.lastIndex=e.nextMatch;var r=this.blockRegExp.exec(e.source),n=r&&r.index===e.nextMatch,a=jQuery(document.createElement(n?"div":"span")).appendTo(e.output);0===t.classes.length&&""===t.id&&0===Object.keys(t.styles).length?a.addClass("marked"):(t.classes.forEach(function(e){return a.addClass(e)}),""!==t.id&&a.attr("id",t.id),a.css(t.styles)),n?(e.nextMatch+=r[0].length,e.subWikify(a[0],"\\n?"+this.terminator)):e.subWikify(a[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<nowiki>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<nowiki>((?:.|\n)*?)<\/nowiki>)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(jQuery(document.createElement("span")).addClass("verbatim").text(t[1]||t[2]).appendTo(e.output),e.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<hr\\s*/?>\\n?",handler:function(e){jQuery(document.createElement("hr")).appendTo(e.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(e){jQuery(document.createTextNode("—")).appendTo(e.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(e){jQuery(document.createTextNode("$")).appendTo(e.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:Patterns.variable+"(?:(?:\\."+Patterns.identifier+")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\["+Patterns.variable+"\\]))*",handler:function(e){var t=toStringOrDefault(Wikifier.getValue(e.matchText),null);null===t?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new Wikifier((Config.debug?new DebugView(e.output,"variable",e.matchText,e.matchText):e).output,t)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(e){return Wikifier.helpers.hasBlockContext(e.output.childNodes)?void e.subWikify(jQuery(document.createElement("h"+e.matchLength)).appendTo(e.output).get(0),this.terminator):void jQuery(e.output).append(document.createTextNode(e.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));var t=jQuery(document.createElement("table")).appendTo(e.output).get(0),r=[],n=null,a=null,i=0,o=void 0;e.nextMatch=e.matchStart;do{this.lookahead.lastIndex=e.nextMatch;var s=this.lookahead.exec(e.source);if(o=s&&s.index===e.nextMatch){var u=s[2];"k"===u?(t.className=s[1],e.nextMatch+=s[0].length+1):(u!==n&&(n=u,a=jQuery(document.createElement(this.rowTypes[u])).appendTo(t)),"c"===n?(a.css("caption-side",0===i?"top":"bottom"),e.nextMatch+=1,e.subWikify(a[0],this.rowTerminator)):this.rowHandler(e,jQuery(document.createElement("tr")).appendTo(a).get(0),r),++i)}}while(o)},rowHandler:function(e,t,r){var n=this,a=new RegExp(this.cellPattern,"gm"),i=0,o=1,s=void 0;do{a.lastIndex=e.nextMatch;var u=a.exec(e.source);if(s=u&&u.index===e.nextMatch){if("~"===u[1]){var l=r[i];l&&(++l.rowCount,l.$element.attr("rowspan",l.rowCount).css("vertical-align","middle")),e.nextMatch=u.index+u[0].length-1}else if(">"===u[1])++o,e.nextMatch=u.index+u[0].length-1;else{if(u[2]){e.nextMatch=u.index+u[0].length;break}!function(){++e.nextMatch;for(var a=Wikifier.helpers.inlineCss(e),s=!1,u=!1,l=void 0;" "===e.source.substr(e.nextMatch,1);)s=!0,++e.nextMatch;"!"===e.source.substr(e.nextMatch,1)?(l=jQuery(document.createElement("th")).appendTo(t),++e.nextMatch):l=jQuery(document.createElement("td")).appendTo(t),r[i]={rowCount:1,$element:l},o>1&&(l.attr("colspan",o),o=1),e.subWikify(l[0],n.cellTerminator)," "===e.matchText.substr(e.matchText.length-2,1)&&(u=!0),a.classes.forEach(function(e){return l.addClass(e)}),""!==a.id&&l.attr("id",a.id),s&&u?a.styles["text-align"]="center":s?a.styles["text-align"]="right":u&&(a.styles["text-align"]="left"),l.css(a.styles),e.nextMatch=e.nextMatch-1}()}++i}}while(s)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.nextMatch=e.matchStart;var t=[e.output],r=null,n=0,a=void 0,i=void 0;do{this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);if(a=o&&o.index===e.nextMatch){var s=o[2]?"ol":"ul",u=o[0].length;if(e.nextMatch+=o[0].length,u>n)for(i=n;i<u;++i)t.push(jQuery(document.createElement(s)).appendTo(t[t.length-1]).get(0));else if(u<n)for(i=n;i>u;--i)t.pop();else u===n&&s!==r&&(t.pop(),t.push(jQuery(document.createElement(s)).appendTo(t[t.length-1]).get(0)));n=u,r=s,e.subWikify(jQuery(document.createElement("li")).appendTo(t[t.length-1]).get(0),this.terminator)}}while(a)}}),Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(e){return Wikifier.helpers.hasBlockContext(e.output.childNodes)?void e.subWikify(jQuery(document.createElement("blockquote")).appendTo(e.output).get(0),this.terminator):void jQuery(e.output).append(document.createTextNode(e.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));var t=[e.output],r=0,n=e.matchLength,a=void 0,i=void 0;do{if(n>r)for(i=r;i<n;++i)t.push(jQuery(document.createElement("blockquote")).appendTo(t[t.length-1]).get(0));else if(n<r)for(i=r;i>n;--i)t.pop();r=n,e.subWikify(t[t.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(t[t.length-1]),this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);a=o&&o.index===e.nextMatch,a&&(n=o[0].length,e.nextMatch+=o[0].length)}while(a)}}),Wikifier.Parser.add({name:"html",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(t[1]).appendTo(e.output))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:<!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\"+Patterns.spaceNoTerminator+"*(?:\\n|$)|(?:^|\\n)"+Patterns.spaceNoTerminator+"*\\\\",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<br\\s*/?>",handler:function(e){e.options.nobr||jQuery(document.createElement("br")).appendTo(e.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",
handler:function(e){jQuery(document.createDocumentFragment()).append(e.matchText).appendTo(e.output)}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<\\w+(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>",tagPattern:"<(\\w+)",voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],nobrElements:["colgroup","datalist","dl","figure","ol","optgroup","select","table","tbody","tfoot","thead","tr","ul"],handler:function(e){var t=new RegExp(this.tagPattern).exec(e.matchText),r=t&&t[1],n=r&&r.toLowerCase();if(n){var a=this.voidElements.includes(n),i=this.nobrElements.includes(n),o=void 0,s=void 0;if(!a){o="<\\/"+n+"\\s*>";var u=new RegExp(o,"gim");u.lastIndex=e.matchStart,s=u.exec(e.source)}if(a||s){var l=e.output,c=document.createElement(e.output.tagName),d=void 0;for(c.innerHTML=e.matchText;c.firstChild;)c=c.firstChild;c.hasAttribute("data-passage")&&(this.processDataAttributes(c),Config.debug&&(d=new DebugView(e.output,"html-"+n,n,e.matchText),d.modes({block:"img"===n,nonvoid:s}),l=d.output)),s&&(e.subWikify(c,o,{ignoreTerminatorCase:!0,nobr:i}),d&&jQuery(c).find(".debug.block").length>0&&d.modes({block:!0})),l.appendChild(c)}else throwError(e.output,'HTML tag "'+r+'" is not closed',e.matchText+"…")}},processDataAttributes:function(e){var t=e.getAttribute("data-passage");if(null!=t){var r=Wikifier.helpers.evalPassageId(t);r!==t&&(t=r,e.setAttribute("data-passage",r)),""!==t&&("IMG"===e.tagName.toUpperCase()?"data:"!==t.slice(0,5)&&Story.has(t)&&(t=Story.get(t),t.tags.includes("Twine.image")&&(e.src=t.text.trim())):!function(){var r=e.getAttribute("data-setter"),n=void 0;null!=r&&(r=String(r).trim(),""!==r&&(n=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(r)))),Story.has(t)?(e.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(t)&&e.classList.add("link-visited")):e.classList.add("link-broken"),jQuery(e).ariaClick({one:!0},function(){"function"==typeof n&&n.call(this),Engine.play(t)})}())}}})}();var Macro=function(){function e(t,r,a){if(Array.isArray(t))return void t.forEach(function(t){return e(t,r,a)});if(!f.test(t))throw new Error('invalid macro name "'+t+'"');if(n(t))throw new Error("cannot clobber existing macro <<"+t+">>");if(u(t))throw new Error("cannot clobber child tag <<"+t+">> of parent macro"+(1===d[t].length?"":"s")+" <<"+d[t].join(">>, <<")+">>");try{if("object"===("undefined"==typeof r?"undefined":_typeof(r)))c[t]=a?clone(r):r;else{if(!n(r))throw new Error("cannot create alias of nonexistent macro <<"+r+">>");c[t]=a?clone(c[r]):c[r]}Object.defineProperty(c,t,{writable:!1}),c[t]._MACRO_API=!0}catch(e){throw"TypeError"===e.name?new Error("cannot clobber protected macro <<"+t+">>"):new Error("unknown error when attempting to add macro <<"+t+">>: ["+e.name+"] "+e.message)}if(c[t].hasOwnProperty("tags"))if(null==c[t].tags)o(t);else{if(!Array.isArray(c[t].tags))throw new Error('bad value for "tags" property of macro <<'+t+">>");o(t,c[t].tags)}}function t(e){if(Array.isArray(e))return void e.forEach(function(e){return t(e)});if(n(e)){c[e].hasOwnProperty("tags")&&s(e);try{Object.defineProperty(c,e,{writable:!0}),delete c[e]}catch(t){throw new Error("unknown error removing macro <<"+e+">>: "+t.message)}}else if(u(e))throw new Error("cannot remove child tag <<"+e+">> of parent macro <<"+d[e]+">>")}function r(){return 0===Object.keys(c).length}function n(e){return c.hasOwnProperty(e)}function a(e){var t=null;return n(e)&&"function"==typeof c[e].handler?t=c[e]:macros.hasOwnProperty(e)&&"function"==typeof macros[e].handler&&(t=macros[e]),t}function i(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(c).forEach(function(t){"function"==typeof c[t][e]&&c[t][e](t)}),Object.keys(macros).forEach(function(t){"function"==typeof macros[t][e]&&macros[t][e](t)})}function o(e,t){if(!e)throw new Error("no parent specified");for(var r=["/"+e,"end"+e],a=[].concat(r,Array.isArray(t)?t:[]),i=0;i<a.length;++i){var o=a[i];if(n(o))throw new Error("cannot register tag for an existing macro");u(o)?d[o].includes(e)||(d[o].push(e),d[o].sort()):d[o]=[e]}}function s(e){if(!e)throw new Error("no parent specified");Object.keys(d).forEach(function(t){var r=d[t].indexOf(e);r!==-1&&(1===d[t].length?delete d[t]:d[t].splice(r,1))})}function u(e){return d.hasOwnProperty(e)}function l(e){return u(e)?d[e]:null}var c={},d={},f=new RegExp("^(?:"+Patterns.macroName+")$");return Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},isEmpty:{value:r},has:{value:n},get:{value:a},init:{value:i},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:o},unregister:{value:s},has:{value:u},get:{value:l}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var e=function(){function e(t){_classCallCheck(this,e);var r=Object.assign({parent:null,macro:null,name:"",args:null,payload:null,parser:null,source:""},t);if(null===r.macro||""===r.name||null===r.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{parent:{value:r.parent},self:{value:r.macro},name:{value:r.name},args:{value:r.args},payload:{value:r.payload},source:{value:r.source},parser:{value:r.parser},_output:{value:r.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(e,[{key:"contextHas",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return!0;return!1}},{key:"contextSelect",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return t;return null}},{key:"contextSelectAll",value:function(e){for(var t=[],r=this;null!==(r=r.parent);)e(r)&&t.push(r);return t}},{key:"addShadow",value:function(){var e=this;this._shadows||(this._shadows=new Set);for(var t=new RegExp("^"+Patterns.variable+"$"),r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];n.flatten().forEach(function(r){if("string"!=typeof r)throw new TypeError("variable name must be a string; type: "+("undefined"==typeof r?"undefined":_typeof(r)));if(!t.test(r))throw new Error('invalid variable name "'+r+'"');e._shadows.add(r)})}},{key:"createShadowWrapper",value:function(e,t,r){var n=void 0;return"function"==typeof e&&(n={},this.shadowView.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;n[e]=r[t]})),function(){for(var a=this,i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];"function"==typeof r&&r.apply(this,o),"function"==typeof e&&!function(){var t=Object.keys(n),r=t.length>0?{}:null;try{t.forEach(function(e){var t=e.slice(1),a="$"===e[0]?State.variables:State.temporary;a.hasOwnProperty(t)&&(r[t]=a[t]),a[t]=n[e]}),e.apply(a,o)}finally{t.forEach(function(e){var t=e.slice(1),a="$"===e[0]?State.variables:State.temporary;n[e]=a[t],r.hasOwnProperty(t)?a[t]=r[t]:delete a[t]})}}(),"function"==typeof t&&t.apply(this,o)}}},{key:"createDebugView",value:function(e,t){return this._debugView=new DebugView(this._output,"macro",e?e:this.name,t?t:this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(e,t){return throwError(this._output,"<<"+this.name+">>: "+e,t?t:this.source)}},{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return[].concat(_toConsumableArray(this._shadows))}},{key:"shadowView",get:function(){var e=new Set;return this.contextSelectAll(function(e){return e._shadows}).forEach(function(t){return t._shadows.forEach(function(t){return e.add(t)})}),[].concat(_toConsumableArray(e))}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}}]),e}();return e}();!function(){Macro.add("capture",{skipArgs:!0,tags:null,handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var e={};try{for(var t=new RegExp("("+Patterns.variable+")","g"),r=void 0;null!==(r=t.exec(this.args.raw));){var n=r[1],a=n.slice(1),i="$"===n[0]?State.variables:State.temporary;i.hasOwnProperty(a)&&(e[a]=i[a]),this.addShadow(n)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach(function(t){var r=t.slice(1),n="$"===t[0]?State.variables:State.temporary;e.hasOwnProperty(r)?n[r]=e[r]:delete n[r]})}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var e=new RegExp("State\\.(variables|temporary)\\.("+Patterns.identifier+")","g"),t=void 0;null!==(t=e.exec(this.args.full));){var r=State[t[1]],n=t[2];r.hasOwnProperty(n)&&delete r[n]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}for(var e=storage.get("remember")||{},t=new RegExp("State\\.variables\\.("+Patterns.identifier+")","g"),r=void 0;null!==(r=t.exec(this.args.full));){var n=r[1];e[n]=State.variables[n]}return storage.set("remember",e)?void(Config.debug&&this.debugView.modes({hidden:!0})):this.error("unknown error, cannot remember: "+this.args.raw)},init:function(){var e=storage.get("remember");e&&Object.keys(e).forEach(function(t){return State.variables[t]=e[t]})}}),Macro.add("forget",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var e=storage.get("remember"),t=new RegExp("State\\.variables\\.("+Patterns.identifier+")","g"),r=void 0,n=!1;null!==(r=t.exec(this.args.full));){var a=r[1];State.variables.hasOwnProperty(a)&&delete State.variables[a],e&&e.hasOwnProperty(a)&&(n=!0,delete e[a])}return n&&!storage.set("remember",e)?this.error("unknown error, cannot update remember store"):void(Config.debug&&this.debugView.modes({hidden:!0}))}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,e),Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>")}catch(e){return this.error("bad evaluation: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e),this.source+this.payload[0].contents+"<</"+this.name+">>")}e.hasChildNodes()&&this.output.appendChild(e)}}),Macro.add("include",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;if(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],!Story.has(e))return this.error('passage "'+e+'" does not exist');Config.debug&&this.debugView.modes({block:!0}),e=Story.get(e);var t=void 0;t=this.args[1]?jQuery(document.createElement(this.args[1])).addClass(e.domId+" macro-"+this.name).attr("data-passage",e.title).appendTo(this.output):jQuery(this.output),t.wiki(e.processText())}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var e=toStringOrDefault(Scripting.evalJavaScript(this.args.full),null);null!==e&&new Wikifier(this.output,"-"===this.name?Util.escape(e):e)}catch(e){return this.error("bad evaluation: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();if(new Wikifier(e,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({hidden:!0}),this.output.appendChild(e);else{var t=[].concat(_toConsumableArray(e.querySelectorAll(".error"))).map(function(e){return e.textContent});if(t.length>0)return this.error("error"+(1===t.length?"":"s")+" within contents ("+t.join("; ")+")",this.source+this.payload[0].contents+"<</"+this.name+">>")}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],handler:function(){var e=0;try{for(var t=Scripting.evalJavaScript,r=this.payload.length,n=!1;e<r;++e){switch(this.payload[e].name){case"else":if(e+1!==r)return this.error("<<else>> must be the final clause");if(this.payload[e].args.raw.length>0)return/^\s*if\b/i.test(this.payload[e].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'+(e>0?" (#"+e+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: "+this.payload[e].args.raw);break;default:if(0===this.payload[e].args.full.length)return this.error("no conditional expression specified for <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":""));if(Config.macros.ifAssignmentError&&/[^!=&^|<>*\/%+-]=[^=]/.test(this.payload[e].args.full))return this.error("assignment operator found within <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":"")+" (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: "+this.payload[e].args.raw)}if(Config.debug&&this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1}),"else"===this.payload[e].name||t(this.payload[e].args.full)){n=!0,new Wikifier(this.output,this.payload[e].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++e;e<r;++e)this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!n,invalid:!n})}}catch(t){return this.error("bad conditional expression in <<"+(0===e?"if":"elseif")+">> clause"+(e>0?" (#"+e+")":"")+": "+("object"===("undefined"==typeof t?"undefined":_typeof(t))?t.message:t))}}}),Macro.add("switch",{skipArg0:!0,tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var e=this.payload.length,t=void 0;if(1===e)return this.error("no cases specified");try{t=Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}var r=this.debugView,n=1,a=!1;for(Config.debug&&r.modes({nonvoid:!1,hidden:!0});n<e;++n){switch(this.payload[n].name){case"default":if(n+1!==e)return this.error("<<default>> must be the final case");if(this.payload[n].args.length>0)return this.error("<<default>> does not accept values, invalid: "+this.payload[n].args.raw);break;default:if(0===this.payload[n].args.length)return this.error("no value(s) specified for <<"+this.payload[n].name+">> (#"+n+")")}if(Config.debug&&this.createDebugView(this.payload[n].name,this.payload[n].source).modes({nonvoid:!1}),"default"===this.payload[n].name||this.payload[n].args.some(function(e){return e===t})){a=!0,new Wikifier(this.output,this.payload[n].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++n;n<e;++n)this.createDebugView(this.payload[n].name,this.payload[n].source).modes({nonvoid:!1,hidden:!0,invalid:!0});r.modes({nonvoid:!1,hidden:!0,invalid:!a}),this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0,invalid:!a})}}}),Macro.add("for",{skipArgs:!0,tags:null,handler:function(){var e=Scripting.evalJavaScript,t=this.payload[0].contents.replace(/\n$/,""),r=void 0,n=this.args.full.trim(),a=void 0,i=!0,o=Config.macros.maxLoopIterations;if(0===n.length)n=!0;else if(n.indexOf(";")!==-1){var s=n.match(/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/);if(null===s)return this.error("invalid 3-part syntax, format: init ; condition ; post");r=s[1],n=s[2],a=s[3]}if("string"==typeof n){if(/^\S+\s+in\s+\S+/i.test(n))return this.error("invalid syntax, for…in is not supported");if(/^\S+\s+of\s+\S+/i.test(n))return this.error("invalid syntax, for…of is not supported")}Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,r)try{e(r)}catch(e){return this.error("bad init expression: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}for(;e(n);){if(--o<0)return this.error("exceeded configured maximum loop iterations ("+Config.macros.maxLoopIterations+")");if(new Wikifier(this.output,i?t.replace(/^\n/,""):t),i&&(i=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(a)try{e(a)}catch(e){return this.error("bad post expression: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}}}catch(e){return this.error("bad conditional expression: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}finally{TempState.break=null}}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){return this.contextHas(function(e){return"for"===e.name})?(TempState.break="continue"===this.name?1:2,void(Config.debug&&this.debugView.modes({hidden:!0}))):this.error("must only be used in conjunction with its parent macro <<for>>")}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no "+("button"===this.name?"button":"link")+" text specified");Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>");var t=jQuery(document.createElement("button"===this.name?"button":"a")),r=void 0;if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var n=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo(t);this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(r=this.args[0].link),r=this.args[0].link}else t.append(document.createTextNode(this.args[0].text)),r=this.args[0].link;else t.wikiWithOptions({profile:"core"},this.args[0]),r=this.args.length>1?this.args[1]:undefined;null!=r?(t.attr("data-passage",r),Story.has(r)?(t.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&t.addClass("link-visited")):t.addClass("link-broken")):t.addClass("link-internal"),t.addClass("macro-"+this.name).ariaClick({namespace:".macros",one:null!=r},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(e.payload[0].contents.trim())}:null,null!=r?function(){return Engine.play(r)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{handler:function(){if(this.args.length<3){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("unchecked value"),this.args.length<3&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.args[1],a=this.args[2],i=document.createElement("input");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"checkbox",tabindex:0}).addClass("macro-"+this.name).on("change",function(){Wikifier.setValue(t,this.checked?a:n)}).appendTo(this.output),this.args.length>3&&"checked"===this.args[3]?(i.checked=!0,Wikifier.setValue(t,a)):Wikifier.setValue(t,n)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no link text specified");Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>");var t=jQuery(document.createElement("a")),r=jQuery(document.createElement("span")),n=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]);t.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-"+this.name).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper(function(){if("linkreplace"===e.name?t.remove():t.wrap('<span class="macro-'+e.name+'"></span>').replaceWith(function(){return t.html()}),""!==e.payload[0].contents){var a=document.createDocumentFragment();new Wikifier(a,e.payload[0].contents),r.append(a)}n&&setTimeout(function(){return r.removeClass("macro-"+e.name+"-in")},Engine.minDomActionDelay)})).appendTo(this.output),r.addClass("macro-"+this.name+"-insert"),n&&r.addClass("macro-"+this.name+"-in"),"linkprepend"===this.name?r.insertBefore(t):r.insertAfter(t)}}),Macro.add("radiobutton",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.args[1],a=document.createElement("input");TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(r)||(TempState[this.name][r]=0),jQuery(a).attr({id:this.name+"-"+r+"-"+TempState[this.name][r]++,name:this.name+"-"+r,type:"radio",tabindex:0}).addClass("macro-"+this.name).on("change",function(){this.checked&&Wikifier.setValue(t,n)}).appendTo(this.output),this.args.length>2&&"checked"===this.args[2]&&(a.checked=!0,Wikifier.setValue(t,n))}}),Macro.add("textarea",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');Config.debug&&this.debugView.modes({block:!0});var r=Util.slugify(t),n=this.args[1],a="autofocus"===this.args[2],i=document.createElement("textarea");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,rows:4,tabindex:0}).addClass("macro-"+this.name).on("change",function(){Wikifier.setValue(t,this.value)}).appendTo(this.output),Wikifier.setValue(t,n),i.textContent=n,a&&(i.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+i.id]=function(e){delete postdisplay[e],setTimeout(function(){return i.focus()},Engine.minDomActionDelay)})}}),Macro.add("textbox",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');Config.debug&&this.debugView.modes({block:!0});var r=Util.slugify(t),n=this.args[1],a=document.createElement("input"),i=!1,o=void 0;this.args.length>3?(o=this.args[2],i="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?i=!0:o=this.args[2]),jQuery(a).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"text",tabindex:0}).addClass("macro-"+this.name).on("change",function(){Wikifier.setValue(t,this.value)}).on("keypress",function(e){13===e.which&&(e.preventDefault(),Wikifier.setValue(t,this.value),null!=o&&Engine.play(o))}).appendTo(this.output),Wikifier.setValue(t,n),a.value=n,i&&(a.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+a.id]=function(e){delete postdisplay[e],setTimeout(function(){return a.focus()},Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var e=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),t=0;t<this.args.length;++t){var r=void 0,n=void 0,a=void 0,i=void 0;"object"===_typeof(this.args[t])?this.args[t].isImage?(a=jQuery(document.createElement("img")).attr("src",this.args[t].source),this.args[t].hasOwnProperty("passage")&&a.attr("data-passage",this.args[t].passage),this.args[t].hasOwnProperty("title")&&a.attr("title",this.args[t].title),this.args[t].hasOwnProperty("align")&&a.attr("align",this.args[t].align),r=this.args[t].link,i=this.args[t].setFn):(n=this.args[t].text,r=this.args[t].link,i=this.args[t].setFn):n=r=this.args[t],State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(r)&&State.variables["#actions"][r]||jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo(e),r,null,function(e,t){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][e]=!0,"function"==typeof t&&t()}}(r,i))).addClass("macro-"+this.name).append(a||document.createTextNode(n))}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var e=-1,t=void 0,r=void 0,n=void 0;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(t=this.args[0].link)):1===this.args[0].count?t=this.args[0].link:(r=this.args[0].text,t=this.args[0].link):1===this.args.length&&(r=this.args[0])),null==t){for(var a=State.length-2;a>=0;--a)if(State.history[a].title!==State.passage){e=a,t=State.history[a].title;break}if(null==t&&"return"===this.name)for(var i=State.expired.length-1;i>=0;--i)if(State.expired[i]!==State.passage){t=State.expired[i];break}}else{if(!Story.has(t))return this.error('passage "'+t+'" does not exist');if("back"===this.name){for(var o=State.length-2;o>=0;--o)if(State.history[o].title===t){e=o;break}if(e===-1)return this.error('cannot find passage "'+t+'" in the current story history')}}if(null==t)return this.error("cannot find passage");var s=void 0;s="back"!==this.name||e!==-1?jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(t)}:function(){return Engine.goTo(e)}):jQuery(document.createElement("span")).addClass("link-disabled"),s.addClass("macro-"+this.name).append(n||document.createTextNode(r||L10n.get("macro"+this.name.toUpperFirst()+"Text"))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=State.passage,t=void 0,r=void 0,n=void 0,a=void 0;return 1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),t=this.args[0].link,a=this.args[0].setFn):(r=this.args[0].text,t=this.args[0].link,a=this.args[0].setFn):r=t=this.args[0]:(t=this.args[0],r=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(e)&&State.variables["#choice"][e]?void jQuery(document.createElement("span")).addClass("link-disabled macro-"+this.name).attr("tabindex",-1).append(n||document.createTextNode(r)).appendTo(this.output):void jQuery(Wikifier.createInternalLink(this.output,t,null,function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][e]=!0,"function"==typeof a&&a()})).addClass("macro-"+this.name).append(n||document.createTextNode(r))}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("selector"),this.args.length<2&&e.push("class names"),this.error("no "+e.join(" or ")+" specified")}var t=jQuery(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'+this.args[0]+'"');switch(this.name){case"addclass":t.addClass(this.args[1].trim());break;case"toggleclass":t.toggleClass(this.args[1].trim())}}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void(this.args.length>1?e.removeClass(this.args[1].trim()):e.removeClass())}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void jQuery(this.output).append(e.html())}}),Macro.add(["append","prepend","replace"],{tags:null,handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');if(""!==this.payload[0].contents){var t=document.createDocumentFragment();switch(new Wikifier(t,this.payload[0].contents),this.name){case"replace":e.empty();case"append":e.append(t);break;case"prepend":e.prepend(t)}}else"replace"===this.name&&e.empty()}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void e.remove()}}),Has.audio?(Macro.add("audio",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("track ID"),this.args.length<2&&e.push("actions"),this.error("no "+e.join(" or ")+" specified")}var t=Macro.get("cacheaudio").tracks,r=[":all",":looped",":muted",":paused",":playing"],n=String(this.args[0]).trim();if(!r.includes(n)&&!t.hasOwnProperty(n))return this.error('track "'+n+'" does not exist');for(var a=this.args.slice(1),i=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=5,f=void 0,p=void 0;a.length>0;){var h=a.shift();switch(h){case"play":case"pause":case"stop":i=h;break;case"fadein":i="fade",c=1;break;case"fadeout":i="fade",c=0;break;case"fadeto":if(0===a.length)return this.error("fadeto missing required level value");if(i="fade",p=a.shift(),c=Number.parseFloat(p),Number.isNaN(c)||!Number.isFinite(c))return this.error("cannot parse fadeto: "+p);break;case"fadeoverto":if(a.length<2){var g=[];return a.length<1&&g.push("seconds"),a.length<2&&g.push("level"),this.error("fadeoverto missing required "+g.join(" and ")+" value"+(g.length>1?"s":""))}if(i="fade",p=a.shift(),d=Number.parseFloat(p),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse fadeoverto: "+p);if(p=a.shift(),c=Number.parseFloat(p),Number.isNaN(c)||!Number.isFinite(c))return this.error("cannot parse fadeoverto: "+p);break;case"volume":if(0===a.length)return this.error("volume missing required level value");if(p=a.shift(),o=Number.parseFloat(p),Number.isNaN(o)||!Number.isFinite(o))return this.error("cannot parse volume: "+p);
break;case"mute":case"unmute":s="mute"===h;break;case"time":if(0===a.length)return this.error("time missing required seconds value");if(p=a.shift(),u=Number.parseFloat(p),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse time: "+p);break;case"loop":case"unloop":l="loop"===h;break;case"goto":if(0===a.length)return this.error("goto missing required passage title");if(p=a.shift(),f="object"===("undefined"==typeof p?"undefined":_typeof(p))?p.link:p,!Story.has(f))return this.error('passage "'+f+'" does not exist');break;default:return this.error("unknown action: "+h)}}var m=void 0;switch(n){case":all":m=Object.keys(t);break;case":looped":m=Object.keys(t).filter(function(e){return t[e].isLooped()});break;case":muted":m=Object.keys(t).filter(function(e){return t[e].isMuted()});break;case":paused":m=Object.keys(t).filter(function(e){return t[e].isPaused()});break;case":playing":m=Object.keys(t).filter(function(e){return t[e].isPlaying()});break;default:m=[n]}try{m.forEach(function(e){var r=t[e];switch(null!=o&&(r.volume=o),null!=u&&(r.time=u),null!=s&&(r.mute=s),null!=l&&(r.loop=l),null!=f&&r.one("end",function(){return Engine.play(f)}),i){case"play":r.play();break;case"pause":r.pause();break;case"stop":r.stop();break;case"fade":r.fadeWithDuration(d,c)}}),Config.debug&&this.createDebugView()}catch(e){return this.error("error executing audio action: "+e.message)}}}),Macro.add("cacheaudio",{tracks:{},handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("track ID"),this.args.length<2&&e.push("sources"),this.error("no "+e.join(" or ")+" specified")}var t=String(this.args[0]).trim(),r=/^:|\s/;if(r.test(t))return this.error('invalid track ID "'+t+'": track IDs may not start with a colon or contain whitespace');var n=/^format:\s*([\w-]+)\s*;\s*(\S.*)$/i,a=void 0;try{a=SimpleAudio.create(this.args.slice(1).map(function(e){var t=n.exec(e);return null===t?e:{format:t[1],src:t[2]}}))}catch(e){return this.error('error during track initialization for "'+t+'": '+e.message)}if(Config.debug&&!a.hasSource())return this.error('no supported audio sources found for "'+t+'"');var i=this.self.tracks;i.hasOwnProperty(t)&&i[t].destroy(),i[t]=a,Config.debug&&this.createDebugView()}}),Macro.add("createplaylist",{tags:["track"],lists:{},handler:function(){if(0===this.args.length)return this.error("no list ID specified");var e=Macro.get("playlist");if(null!==e.from&&"createplaylist"!==e.from)return this.error("a playlist has already been defined with <<setplaylist>>");var t=Macro.get("cacheaudio").tracks,r=String(this.args[0]).trim(),n=/^:|\s/;if(n.test(r))return this.error('invalid list ID "'+r+'": list IDs may not start with a colon or contain whitespace');if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var a=SimpleAudio.createList(),i=1,o=this.payload.length;i<o;++i){if(this.payload[i].args.length<2){var s=[];return this.payload[i].args.length<1&&s.push("track ID"),this.payload[i].args.length<2&&s.push("actions"),this.error("no "+s.join(" or ")+" specified")}var u=String(this.payload[i].args[0]).trim();if(!t.hasOwnProperty(u))return this.error('track "'+u+'" does not exist');for(var l=this.payload[i].args.slice(1),c=!1,d=void 0;l.length>0;){var f=l.shift(),p=void 0;switch(f){case"copy":c=!0;break;case"rate":l.length>0&&l.shift();break;case"volume":if(0===l.length)return this.error("volume missing required level value");if(p=l.shift(),d=Number.parseFloat(p),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse volume: "+p);break;default:return this.error("unknown action: "+f)}}var h=t[u];a.add({copy:c,track:h,volume:null!=d?d:h.volume}),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}var g=this.self.lists;g.hasOwnProperty(r)&&g[r].destroy(),g[r]=a,null===e.from&&(e.from="createplaylist"),this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var e=this.args.slice(0),t=!1,r=void 0,n=void 0;e.length>0;){var a=e.shift(),i=void 0;switch(a){case"stop":t=!0;break;case"mute":case"unmute":r="mute"===a;break;case"volume":if(0===e.length)return this.error("volume missing required level value");if(i=e.shift(),n=Number.parseFloat(i),Number.isNaN(n)||!Number.isFinite(n))return this.error("cannot parse volume: "+i);break;default:return this.error("unknown action: "+a)}}try{null!=r&&(SimpleAudio.mute=r),null!=n&&(SimpleAudio.volume=n),t&&SimpleAudio.stop(),Config.debug&&this.createDebugView()}catch(e){return this.error("error executing master audio action: "+e.message)}}}),Macro.add("playlist",{from:null,handler:function(){var e=this.self.from;if(null===e)return this.error("no playlists have been created");var t=void 0,r=void 0;if("createplaylist"===e){if(this.args.length<2){var n=[];return this.args.length<1&&n.push("list ID"),this.args.length<2&&n.push("actions"),this.error("no "+n.join(" or ")+" specified")}var a=Macro.get("createplaylist").lists,i=String(this.args[0]).trim();if(!a.hasOwnProperty(i))return this.error('playlist "'+i+'" does not exist');t=a[i],r=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");t=Macro.get("setplaylist").list,r=this.args.slice(0)}for(var o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0,f=5,p=void 0;r.length>0;){var h=r.shift();switch(h){case"play":case"pause":case"stop":case"skip":o=h;break;case"fadein":o="fade",d=1;break;case"fadeout":o="fade",d=0;break;case"fadeto":if(0===r.length)return this.error("fadeto missing required level value");if(o="fade",p=r.shift(),d=Number.parseFloat(p),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse fadeto: "+p);break;case"fadeoverto":if(r.length<2){var g=[];return r.length<1&&g.push("seconds"),r.length<2&&g.push("level"),this.error("fadeoverto missing required "+g.join(" and ")+" value"+(g.length>1?"s":""))}if(o="fade",p=r.shift(),f=Number.parseFloat(p),Number.isNaN(f)||!Number.isFinite(f))return this.error("cannot parse fadeoverto: "+p);if(p=r.shift(),d=Number.parseFloat(p),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse fadeoverto: "+p);break;case"volume":if(0===r.length)return this.error("volume missing required level value");if(p=r.shift(),s=Number.parseFloat(p),Number.isNaN(s)||!Number.isFinite(s))return this.error("cannot parse volume: "+p);break;case"mute":case"unmute":u="mute"===h;break;case"loop":case"unloop":l="loop"===h;break;case"shuffle":case"unshuffle":c="shuffle"===h;break;default:return this.error("unknown action: "+h)}}try{switch(null!=s&&(t.volume=s),null!=u&&(t.mute=u),null!=l&&(t.loop=l),null!=c&&(t.shuffle=c),o){case"play":t.play();break;case"pause":t.pause();break;case"stop":t.stop();break;case"skip":t.skip();break;case"fade":t.fadeWithDuration(f,d)}Config.debug&&this.createDebugView()}catch(e){return this.error("error playing audio: "+e.message)}}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var e=Macro.get("createplaylist").lists,t=String(this.args[0]).trim();return e.hasOwnProperty(t)?(e[t].destroy(),delete e[t],void(Config.debug&&this.createDebugView())):this.error('playlist "'+t+'" does not exist')}}),Macro.add("waitforaudio",{skipArgs:!0,queue:[],handler:function(){function e(){if(0===t.length)return LoadScreen.unlock(r);var n=t.shift();return n.hasData()?e():void n.one("canplay.waitforaudio error.waitforaudio",function(){jQuery(this).off(".waitforaudio"),e()}).load()}var t=this.self.queue,r=void 0;t.length>0||(this.self.fillQueue(t),t.length>0&&(r=LoadScreen.lock(),e()))},fillQueue:function(e){var t=Macro.get("cacheaudio").tracks;Object.keys(t).forEach(function(r){return e.push(t[r])});var r=Macro.get("createplaylist").lists;if(Object.keys(r).map(function(e){return r[e].tracks}).flatten().filter(function(e){return e.copy}).forEach(function(t){return e.push(t.track)}),Macro.has("setplaylist")){var n=Macro.get("setplaylist").list;null!==n&&n.tracks.forEach(function(t){return e.push(t.track)})}}}),Macro.add("setplaylist",{list:null,handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var e=Macro.get("playlist");if(null!==e.from&&"setplaylist"!==e.from)return this.error("playlists have already been defined with <<createplaylist>>");var t=this.self,r=Macro.get("cacheaudio").tracks;null!==t.list&&t.list.destroy(),t.list=SimpleAudio.createList();for(var n=0;n<this.args.length;++n){var a=this.args[n];if(!r.hasOwnProperty(a))return this.error('track "'+a+'" does not exist');t.list.add(r[a])}null===e.from&&(e.from="setplaylist"),Config.debug&&this.createDebugView()}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){var e=Macro.get("cacheaudio").tracks;Object.keys(e).forEach(function(t){return e[t].stop()}),Config.debug&&this.createDebugView()}})):Macro.add(["audio","cacheaudio","createplaylist","masteraudio","playlist","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){}}),Macro.add("goto",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;return e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(e)?void setTimeout(function(){return Engine.play(e)},Engine.minDomActionDelay):this.error('passage "'+e+'" does not exist')}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var e=[];try{e.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(e){return this.error(e.message+" in <<timed>>")}if(this.payload.length>1){var t=void 0;try{var r=void 0;for(t=1,r=this.payload.length;t<r;++t)e.push({name:this.payload[t].name,source:this.payload[t].source,delay:0===this.payload[t].args.length?e[e.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[t].args[0])),content:this.payload[t].contents})}catch(e){return this.error(e.message+" in <<next>> (#"+t+")")}}Config.debug&&this.debugView.modes({block:!0});var n=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),a=jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper(function(e){var t=document.createDocumentFragment();new Wikifier(t,e.content);var r=a;Config.debug&&"next"===e.name&&(r=jQuery(new DebugView(r[0],"macro",e.name,e.source).output)),n&&(r=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo(r)),r.append(t),n&&setTimeout(function(){return r.removeClass("macro-timed-in")},Engine.minDomActionDelay)}),e)},registerTimeout:function(e,t){if("function"!=typeof e)throw new TypeError("callback parameter must be a function");var r=State.turns,n=this.timers,a=null,i=t.shift(),o=function o(){if(n.delete(a),r===State.turns){var s=i;null!=(i=t.shift())&&(a=setTimeout(o,i.delay),n.add(a)),e.call(this,s)}};a=setTimeout(o,i.delay),n.add(a),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(e){delete prehistory[e],n.forEach(function(e){return clearTimeout(e)}),n.clear()})}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,handler:function(){var e=this;if(0===this.args.length)return this.error("no time value specified");var t=void 0;try{t=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0});var r=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),n=jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper(function(){var t=document.createDocumentFragment();new Wikifier(t,e.payload[0].contents);var a=n;r&&(a=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo(a)),a.append(t),r&&setTimeout(function(){return a.removeClass("macro-repeat-in")},Engine.minDomActionDelay)}),t)},registerInterval:function(e,t){var r=this;if("function"!=typeof e)throw new TypeError("callback parameter must be a function");var n=State.turns,a=this.timers,i=null;i=setInterval(function(){if(n!==State.turns)return clearInterval(i),void a.delete(i);var t=void 0;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(t=TempState.repeatTimerId),TempState.repeatTimerId=i,e.call(r)}finally{"undefined"!=typeof t?TempState.repeatTimerId=t:delete TempState.repeatTimerId,TempState.break=null}},t),a.add(i),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(e){delete prehistory[e],a.forEach(function(e){return clearInterval(e)}),a.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var e=Macro.get("repeat").timers,t=TempState.repeatTimerId;clearInterval(t),e.delete(t),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var e=this.args[0];if(Macro.has(e)){if(!Macro.get(e).isWidget)return this.error('cannot clobber existing macro "'+e+'"');Macro.delete(e)}try{Macro.add(e,{isWidget:!0,handler:function(e){return function(){var t=this,r=void 0;try{var n=function(){State.variables.hasOwnProperty("args")&&(r=State.variables.args),State.variables.args=[].concat(_toConsumableArray(t.args)),State.variables.args.raw=t.args.raw,State.variables.args.full=t.args.full,t.addShadow("$args");var n=document.createDocumentFragment(),a=[];return new Wikifier(n,e),Array.from(n.querySelectorAll(".error")).forEach(function(e){a.push(e.textContent)}),0!==a.length?{v:t.error("error"+(a.length>1?"s":"")+" within widget contents ("+a.join("; ")+")")}:void t.output.appendChild(n)}();if("object"===("undefined"==typeof n?"undefined":_typeof(n)))return n.v}catch(e){return this.error("cannot execute widget: "+e.message)}finally{"undefined"!=typeof r?State.variables.args=r:delete State.variables.args}}}(this.payload[0].contents)}),Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>")}catch(t){return this.error('cannot create widget macro "'+e+'": '+t.message)}}})}();var Dialog=function(){function e(){m=function(){var e=void 0;try{var t=document.createElement("p"),r=document.createElement("div");t.style.width="100%",t.style.height="200px",r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width="100px",r.style.height="100px",r.style.visibility="hidden",r.style.overflow="hidden",r.appendChild(t),document.body.appendChild(r);var n=t.offsetWidth;r.style.overflow="auto";var a=t.offsetWidth;n===a&&(a=r.clientWidth),document.body.removeChild(r),e=n-a}catch(e){}return e||17}();var e=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+('<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'+L10n.get("close")+'"></button>')+'</div><div id="ui-dialog-body"></div></div>');d=jQuery(e.find("#ui-overlay").get(0)),f=jQuery(e.find("#ui-dialog").get(0)),p=jQuery(e.find("#ui-dialog-title").get(0)),h=jQuery(e.find("#ui-dialog-body").get(0)),e.insertBefore("#store-area")}function t(e){return f.hasClass("open")&&(!e||e.splitOrEmpty(/\s+/).every(function(e){return h.hasClass(e)}))}function r(e,t){return h.empty().removeClass(),null!=t&&h.addClass(t),p.empty().append((null!=e?String(e):"")||" "),h.get(0)}function n(){return h.get(0)}function a(){var e;return(e=h).append.apply(e,arguments),Dialog}function i(){var e;return(e=h).wiki.apply(e,arguments),Dialog}function o(e,t,r,n,a){return jQuery(e).ariaClick(function(e){e.preventDefault(),"function"==typeof r&&r(e),s(t,a),"function"==typeof n&&n(e)})}function s(e,r){var n=jQuery.extend({top:50},e),a=n.top;t()||(g=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),d.addClass("open"),null!==h[0].querySelector("img")&&h.imagesLoaded().always(function(){return l({data:{top:a}})}),jQuery("body>:not(script,#store-area,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0);var i=c(a);return f.css(i).addClass("open").focus(),jQuery(window).on("resize.ui-resize",null,{top:a},jQuery.throttle(40,l)),jQuery(document).on("click.ui-close",".ui-close",{closeFn:r},u).on("keypress.ui-close",".ui-close",function(e){13!==e.which&&32!==e.which||jQuery(this).trigger("click")}),setTimeout(function(){return jQuery.event.trigger(":dialogopen")},Engine.minDomActionDelay),Dialog}function u(e){return jQuery(document).off(".ui-close"),jQuery(window).off("resize.ui-resize"),f.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),p.empty(),h.empty().removeClass(),d.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),null!==g&&(jQuery(g).focus(),g=null),e&&e.data&&"function"==typeof e.data.closeFn&&e.data.closeFn(e),setTimeout(function(){return jQuery.event.trigger(":dialogclose")},Engine.minDomActionDelay),Dialog}function l(e){var t=e&&e.data&&"undefined"!=typeof e.data.top?e.data.top:50;"block"===f.css("display")&&(f.css({display:"none"}),f.css(jQuery.extend({display:""},c(t))))}function c(e){var t=null!=e?e:50,r=jQuery(window),n={left:"",right:"",top:"",bottom:""};f.css(n);var a=r.width()-f.outerWidth(!0)-1,i=r.height()-f.outerHeight(!0)-1;return a<=32+m&&(i-=m),i<=32+m&&(a-=m),a<=32?n.left=n.right=16:n.left=n.right=~~(a/2),i<=32?n.top=n.bottom=16:i/2>t?n.top=t:n.top=n.bottom=~~(i/2),Object.keys(n).forEach(function(e){""!==n[e]&&(n[e]+="px")}),n}var d=null,f=null,p=null,h=null,g=null,m=0;return Object.freeze(Object.defineProperties({},{init:{value:e},isOpen:{value:t},setup:{value:r},body:{value:n},append:{value:a},wiki:{value:i},addClickHandler:{value:o},open:{value:s},close:{value:u},resize:{value:function(){return l()}}}))}(),Engine=function(){function e(){jQuery("#init-no-js,#init-lacking").remove(),function(){var e=jQuery(document.createDocumentFragment()),t=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(t){if(UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),e.append(t),0===e.find("#passages").length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage')}else e.append('<div id="story" role="main"><div id="passages"></div></div>');e.insertBefore("#store-area")}(),S=new StyleWrapper(function(){return jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)}()),jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",function(e){return"keydown"===e.type?m():g()})}function t(){if(Story.has("StoryInit"))try{var e=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var t=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");t.modes({hidden:!0}),t.append(e),k=t.output}}catch(e){Alert.error("StoryInit",e.message)}if(Config.history.maxStates=Math.max(0,Config.history.maxStates),Number.isSafeInteger(Config.history.maxStates)||(Config.history.maxStates=100),1===Config.history.maxStates&&(Config.history.controls=!1),Config.debug&&DebugView.init(),null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'+Config.passages.start+'") not found');if(jQuery(document.documentElement).focus(),State.restore())f();else{var r=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!1,UI.buildDialogAutoload(),UI.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(r=!Save.autosave.load())}r&&p(Config.passages.start)}}function r(){LoadScreen.show(),window.scroll(0,0),State.reset(),window.location.reload()}function n(){return b}function a(){return b===v.Idle}function i(){return b!==v.Idle}function o(){return b===v.Rendering}function s(){return w}function u(e){var t=State.goTo(e);return t&&f(),t}function l(e){var t=State.go(e);return t&&f(),t}function c(){return l(-1)}function d(){return l(1)}function f(){return p(State.passage,!0)}function p(e,t){var r=e;b=v.Playing,TempState={},State.clearTemporary();var n=void 0,a=void 0;if("function"==typeof Config.navigation.override)try{var i=Config.navigation.override(r);i&&(r=i)}catch(e){}var o=Story.get(r);if(Object.keys(prehistory).forEach(function(e){"function"==typeof prehistory[e]&&prehistory[e].call(this,e)},o),t||State.create(o.title),document.body.className&&(document.body.className=""),Object.keys(predisplay).forEach(function(e){"function"==typeof predisplay[e]&&predisplay[e].call(this,e)},o),Story.has("PassageReady"))try{n=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(e){Alert.error("PassageReady",e.message)}b=v.Rendering;var s=jQuery(o.render()),u=document.getElementById("passages");if(u.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&""!==Config.transitionEndEventName?[].concat(_toConsumableArray(u.childNodes)).forEach(function(e){var t=jQuery(e);if(e.nodeType===Node.ELEMENT_NODE&&t.hasClass("passage")){if(t.hasClass("passage-out"))return;t.attr("id","out-"+t.attr("id")).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?t.on(Config.transitionEndEventName,function(e){e.originalEvent.propertyName===Config.passages.transitionOut&&t.remove()}):setTimeout(function(){return t.remove()},Math.max(y,Config.passages.transitionOut))}else t.remove()}):jQuery(u).empty()),s.addClass("passage-in").appendTo(u),setTimeout(function(){return s.removeClass("passage-in")},y),document.title=Config.passages.displayTitles&&o.title!==Config.passages.start?o.title+" | "+Story.title:Story.title,window.scroll(0,0),b=v.Playing,Story.has("PassageDone"))try{a=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(e){Alert.error("PassageDone",e.message)}if(Object.keys(postdisplay).forEach(function(e){"function"==typeof postdisplay[e]&&postdisplay[e].call(this,e)},o),Config.ui.updateStoryElements&&UIBar.setStoryElements(),Config.debug){var l=void 0;null!=n&&(l=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady"),l.modes({hidden:!0}),l.append(n),s.prepend(l.output)),null!=a&&(l=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone"),l.modes({hidden:!0}),l.append(a),s.append(l.output)),1===State.turns&&null!=k&&s.prepend(k)}switch(w=Date.now(),g(),jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"string":o.tags.includes(Config.saves.autosave)&&Save.autosave.save();break;case"object":Array.isArray(Config.saves.autosave)&&o.tags.some(function(e){return Config.saves.autosave.includes(e)})&&Save.autosave.save()}return b=v.Idle,s[0]}function h(e,t,r){var n=!1;switch(r){case undefined:break;case"replace":case"back":n=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'+r+'"; please notify the developer')}p(e,n)}function g(){S.set("*:focus{outline:none}")}function m(){S.clear()}var v=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),y=40,b=v.Idle,w=null,k=null,S=null;return Object.freeze(Object.defineProperties({},{States:{value:v},minDomActionDelay:{value:y},init:{value:e},start:{value:t},restart:{value:r},state:{get:n},isIdle:{value:a},isPlaying:{value:i},isRendering:{value:o},lastPlay:{get:s},goTo:{value:u},go:{value:l},backward:{value:c},forward:{value:d},show:{value:f},play:{value:p},display:{value:h}}))}(),Passage=function(){var e=void 0;e=/^(?:debug|nobr|passage|widget|twine\..*)$/i;var t=function(){function t(r,n){var a=this;_classCallCheck(this,t),Object.defineProperties(this,{title:{value:Util.unescape(r)},element:{value:n||null},tags:{value:Object.freeze(n&&n.hasAttribute("tags")?n.getAttribute("tags").trim().splitOrEmpty(/\s+/).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-"+Util.slugify(this.title)},classes:{value:Object.freeze(0===this.tags.length?[]:function(){return a.tags.filter(function(t){return!e.test(t)}).map(function(e){return Util.slugify(e)})}())}})}return _createClass(t,[{key:"description",value:function(){var e=Config.passages.descriptions;if(null!=e)switch("undefined"==typeof e?"undefined":_typeof(e)){case"boolean":if(e)return this.title;break;case"object":if(e instanceof Map&&e.has(this.title))return e.get(this.title);if(e.hasOwnProperty(this.title))return e[this.title];break;case"function":var r=e.call(this);if(r)return r;break;default:throw new TypeError("Config.passages.descriptions must be a boolean, object, or function")}return null===this._excerpt&&(this._excerpt=t.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){var e=this.text;return this.tags.includes("nobr")&&(e=e.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),this.tags.includes("Twine.image")&&(e="[img["+e+"]]"),e}},{key:"render",value:function(){var e=this,r=this.tags.length>0?this.tags.join(" "):null,n=document.createElement("div");return jQuery(n).attr({id:this.domId,"data-passage":this.title,"data-tags":r}).addClass("passage "+this.className),jQuery(document.body).attr("data-tags",r).addClass(this.className),jQuery(document.documentElement).attr("data-tags",r),Object.keys(prerender).forEach(function(t){"function"==typeof prerender[t]&&prerender[t].call(e,n,t)}),Story.has("PassageHeader")&&new Wikifier(n,Story.get("PassageHeader").processText()),new Wikifier(n,this.processText()),Story.has("PassageFooter")&&new Wikifier(n,Story.get("PassageFooter").processText()),Object.keys(postrender).forEach(function(t){"function"==typeof postrender[t]&&postrender[t].call(e,n,t)}),this._excerpt=t.getExcerptFromNode(n),n}},{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var e=Util.escape(this.title);return'<span class="error" title="'+e+'">'+L10n.get("errorTitle")+": "+L10n.get("errorNonexistentPassage",{passage:e})+"</span>"}return this.element.textContent.replace(/\r/g,"")}}],[{key:"getExcerptFromNode",value:function(e,t){if(!e.hasChildNodes())return"";var r=e.textContent.trim();if(""!==r){var n=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})");r=r.replace(/\s+/g," ").match(n)}return r?r[1]+"…":"…"}},{key:"getExcerptFromText",value:function(e,t){if(""===e)return"";var r=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})"),n=e.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*)(?:|[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(r);return n?n[1]+"…":"…"}}]),t}();return t}(),Save=function(){function e(){if("cookie"===storage.name)return n(),Config.saves.autosave=undefined,Config.saves.slots=0,!1;Config.saves.slots=Math.max(0,Config.saves.slots),Number.isSafeInteger(Config.saves.slots)||(Config.saves.slots=8);var e=r(),t=!1;Array.isArray(e)&&(e={autosave:null,slots:e},t=!0),Config.saves.slots!==e.slots.length&&(Config.saves.slots<e.slots.length?(e.slots.reverse(),e.slots=e.slots.filter(function(e){return!(null===e&&this.count>0)||(--this.count,!1)},{count:e.slots.length-Config.saves.slots}),e.slots.reverse()):Config.saves.slots>e.slots.length&&S(e.slots,Config.saves.slots-e.slots.length),t=!0),j(e.autosave)&&(t=!0);for(var a=0;a<e.slots.length;++a)j(e.slots[a])&&(t=!0);return E(e)&&(storage.delete("saves"),t=!1),t&&x(e),T=e.slots.length-1,!0}function t(){return{autosave:null,slots:S([],Config.saves.slots)}}function r(){var e=storage.get("saves");return null===e?t():e}function n(){return storage.delete("saves"),!0}function a(){return i()||d()}function i(){return"cookie"!==storage.name&&"undefined"!=typeof Config.saves.autosave}function o(){var e=r();return null!==e.autosave}function s(){var e=r();return e.autosave}function u(){var e=r();return null!==e.autosave&&O(e.autosave)}function l(e,t){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var n=r(),a={title:e||Story.get(State.passage).description(),date:Date.now()};return null!=t&&(a.metadata=t),n.autosave=C(a),x(n)}function c(){var e=r();return e.autosave=null,x(e)}function d(){return"cookie"!==storage.name&&T!==-1}function f(){return T+1}function p(){if(!d())return 0;for(var e=r(),t=0,n=0,a=e.slots.length;n<a;++n)null!==e.slots[n]&&++t;return t}function h(){return 0===p()}function g(e){if(e<0||e>T)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])}function m(e){if(e<0||e>T)return null;var t=r();return e>=t.slots.length?null:t.slots[e]}function v(e){if(e<0||e>T)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])&&O(t.slots[e])}function y(e,t,n){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return UI.alert(L10n.get("savesDisallowed")),!1;if(e<0||e>T)return!1;var a=r();if(e>=a.slots.length)return!1;var i={title:t||Story.get(State.passage).description(),date:Date.now()};return null!=n&&(i.metadata=n),a.slots[e]=C(i),x(a)}function b(e){if(e<0||e>T)return!1;var t=r();return!(e>=t.slots.length)&&(t.slots[e]=null,x(t))}function w(e,t){function r(){var e=new Date,t=e.getMonth()+1,r=e.getDate(),n=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),""+e.getFullYear()+t+r+"-"+n+a+i}if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return void UI.alert(L10n.get("savesDisallowed"));var n=null==e?Story.domId:Util.slugify(e),a=n+"-"+r()+".save",i=null==t?{}:{metadata:t},o=LZString.compressToBase64(JSON.stringify(C(i)));saveAs(new Blob([o],{type:"text/plain;charset=UTF-8"}),a)}function k(e){var t=e.target.files[0],r=new FileReader;jQuery(r).on("load",function(e){var r=e.currentTarget;if(r.result){var n=void 0;try{n=JSON.parse(/\.json$/i.test(t.name)||/^\{/.test(r.result)?r.result:LZString.decompressFromBase64(r.result))}catch(e){}O(n)}}),r.readAsText(t)}function S(e,t){for(var r=0;r<t;++r)e.push(null);return e}function E(e){for(var t=e.slots,r=!0,n=0,a=t.length;n<a;++n)if(null!==t[n]){r=!1;break}return null===e.autosave&&r}function x(e){return E(e)?(storage.delete("saves"),!0):storage.set("saves",e)}function j(e){if(null===e)return!1;var t=!1;return e.hasOwnProperty("state")&&e.state.hasOwnProperty("delta")&&e.state.hasOwnProperty("index")||(e.hasOwnProperty("data")?(delete e.mode,e.state={delta:State.deltaEncode(e.data)},delete e.data):e.state.hasOwnProperty("delta")?e.state.hasOwnProperty("index")||delete e.state.mode:(delete e.state.mode,e.state.delta=State.deltaEncode(e.state.history),delete e.state.history),e.state.index=e.state.delta.length-1,t=!0),e.state.hasOwnProperty("rseed")&&(e.state.seed=e.state.rseed,
delete e.state.rseed,e.state.delta.forEach(function(e,t,r){r[t].hasOwnProperty("rcount")&&(r[t].pull=r[t].rcount,delete r[t].rcount)}),t=!0),(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired||e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired&&delete e.state.expired,(e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.expired=[],e.state.hasOwnProperty("unique")&&(e.state.expired.push(e.state.unique),delete e.state.unique),e.state.hasOwnProperty("last")&&(e.state.expired.push(e.state.last),delete e.state.last)),t=!0),t}function C(e){if(null!=e&&"object"!==("undefined"==typeof e?"undefined":_typeof(e)))throw new Error("supplemental parameter must be an object");var t=Object.assign({},e,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(t.version=Config.saves.version),"function"==typeof Config.saves.onSave&&Config.saves.onSave(t),t.state.delta=State.deltaEncode(t.state.history),delete t.state.history,t}function O(e){try{if(j(e),!e||!e.hasOwnProperty("id")||!e.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(e.state.history=State.deltaDecode(e.state.delta),delete e.state.delta,"function"==typeof Config.saves.onLoad&&Config.saves.onLoad(e),e.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(e.state),Engine.show()}catch(e){return UI.alert(e.message.toUpperFirst()+".</p><p>"+L10n.get("aborting")+"."),!1}return!0}var T=-1;return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:r},clear:{value:n},ok:{value:a},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:i},has:{value:o},get:{value:s},load:{value:u},save:{value:l},delete:{value:c}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:d},length:{get:f},isEmpty:{value:h},count:{value:p},has:{value:g},get:{value:m},load:{value:v},save:{value:y},delete:{value:b}}))},export:{value:w},import:{value:k}}))}(),Setting=function(){function e(){if(storage.has("options")){var e=storage.get("options");null!==e&&(window.SugarCube.settings=settings=Object.assign(t(),e)),r(),storage.delete("options")}n(),g.forEach(function(e){if(e.hasOwnProperty("onInit")){var t={name:e.name,value:settings[e.name],default:e.default};e.hasOwnProperty("list")&&(t.list=e.list),e.onInit.call(t)}})}function t(){return Object.create(null)}function r(){var e=t();return Object.keys(settings).length>0&&g.filter(function(e){return e.type!==m.Header&&settings[e.name]!==e.default}).forEach(function(t){return e[t.name]=settings[t.name]}),0===Object.keys(e).length?(storage.delete("settings"),!0):storage.set("settings",e)}function n(){var e=t(),r=storage.get("settings")||t();g.filter(function(e){return e.type!==m.Header}).forEach(function(t){return e[t.name]=t.default}),window.SugarCube.settings=settings=Object.assign(e,r)}function a(){return window.SugarCube.settings=settings=t(),storage.delete("settings"),!0}function i(e){if(0===arguments.length)a(),n();else{if(null==e||!f(e))throw new Error('nonexistent setting "'+e+'"');var t=p(e);t.type!==m.Header&&(settings[e]=t.default)}return r()}function o(e,t){g.forEach(e,t)}function s(e,t,r){if(arguments.length<3){var n=[];throw arguments.length<1&&n.push("type"),arguments.length<2&&n.push("name"),arguments.length<3&&n.push("definition"),new Error("missing parameters, no "+n.join(" or ")+" specified")}if("object"!==("undefined"==typeof r?"undefined":_typeof(r)))throw new TypeError("definition parameter must be an object");if(f(t))throw new Error('cannot clobber existing setting "'+t+'"');var a={type:e,name:t,label:null==r.label?"":String(r.label).trim()};switch(e){case m.Header:break;case m.Toggle:a.default=!!r.default;break;case m.List:if(!r.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(r.list))throw new TypeError("list must be an array");if(0===r.list.length)throw new Error("list must not be empty");if(a.list=Object.freeze(r.list),null==r.default)a.default=r.list[0];else{var i=r.list.indexOf(r.default);if(i===-1)throw new Error("list does not contain default");a.default=r.list[i]}break;default:throw new Error("unknown Setting type: "+e)}"function"==typeof r.onInit&&(a.onInit=Object.freeze(r.onInit)),"function"==typeof r.onChange&&(a.onChange=Object.freeze(r.onChange)),g.push(Object.freeze(a))}function u(e,t){s(m.Header,e,{label:t})}function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[m.Toggle].concat(t))}function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[m.List].concat(t))}function d(){return 0===g.length}function f(e){return g.some(function(t){return t.name===e})}function p(e){return g.find(function(t){return t.name===e})}function h(e){f(e)&&delete settings[e];for(var t=0;t<g.length;++t)if(g[t].name===e){g.splice(t,1),h(e);break}}var g=[],m=Util.toEnum({Header:0,Toggle:1,List:2});return Object.freeze(Object.defineProperties({},{Types:{value:m},init:{value:e},create:{value:t},save:{value:r},load:{value:n},clear:{value:a},reset:{value:i},forEach:{value:o},add:{value:s},addHeader:{value:u},addToggle:{value:l},addList:{value:c},isEmpty:{value:d},has:{value:f},get:{value:p},delete:{value:h}}))}(),State=function(){function e(){session.delete("state"),L=[],I=c(),Q=-1,W=[],R=null===R?null:new PRNGWrapper(R.seed,!1)}function t(){if(session.has("state")){var e=session.get("state");return null!=e&&(n(e),!0)}return!1}function r(e){var t={index:Q};return e?t.history=clone(L):t.delta=A(L),W.length>0&&(t.expired=[].concat(_toConsumableArray(W))),null!==R&&(t.seed=R.seed),t}function n(e,t){if(null==e)throw new Error("state object is null or undefined");if(!e.hasOwnProperty(t?"history":"delta")||0===e[t?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!e.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==R&&!e.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===R&&e.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");L=t?clone(e.history):P(e.delta),Q=e.index,W=e.hasOwnProperty("expired")?[].concat(_toConsumableArray(e.expired)):[],e.hasOwnProperty("seed")&&(R.seed=e.seed),g(Q)}function a(){return r(!0)}function i(e){return n(e,!0)}function o(){return W}function s(){return W.length+v()}function u(){return W.concat(L.slice(0,v()).map(function(e){return e.title}))}function l(e){return null!=e&&""!==e&&(!!W.includes(e)||!!L.slice(0,v()).some(function(t){return t.title===e}))}function c(e,t){return{title:null==e?"":String(e),variables:null==t?{}:clone(t)}}function d(){return I}function f(){return Q}function p(){return I.title}function h(){return I.variables}function g(e){if(null==e)throw new Error("moment activation attempted with null or undefined");switch("undefined"==typeof e?"undefined":_typeof(e)){case"object":I=clone(e);break;case"number":if(b())throw new Error("moment activation attempted with index on empty history");if(e<0||e>=y())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, "+(y()-1)+"], got "+e);I=clone(L[e]);break;default:throw new TypeError('moment activation attempted with a "'+("undefined"==typeof e?"undefined":_typeof(e))+'"; must be an object or valid history stack index')}return null!==R&&(R=PRNGWrapper.unmarshal({seed:R.seed,pull:I.pull})),session.set("state",r()),jQuery.event.trigger(":historyupdate"),I}function m(){return L}function v(){return Q+1}function y(){return L.length}function b(){return 0===L.length}function w(){return L.length>0?L[Q]:null}function k(){return L.length>0?L[L.length-1]:null}function S(){return L.length>0?L[0]:null}function E(e){return b()||e<0||e>Q?null:L[e]}function x(e){if(b())return null;var t=1+(e?Math.abs(e):0);return t>v()?null:L[v()-t]}function j(e){if(b()||null==e||""===e)return!1;for(var t=Q;t>=0;--t)if(L[t].title===e)return!0;return!1}function C(e){if(v()<y()&&L.splice(v(),y()-v()),L.push(c(e,I.variables)),R&&(k().pull=R.pull),Config.history.maxStates>0)for(;y()>Config.history.maxStates;)W.push(L.shift().title);return Q=y()-1,g(Q),v()}function O(e){return!(null==e||e<0||e>=y()||e===Q)&&(Q=e,g(Q),!0)}function T(e){return null!=e&&0!==e&&O(Q+e)}function A(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Util.diff(e[r-1],e[r]));return t}function P(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Util.patch(t[r-1],e[r]));return t}function _(e,t){if(!b()){var r=void 0;throw r="the Story JavaScript",new Error("State.initPRNG must be called during initialization, within either "+r+" or the StoryInit special passage")}R=new PRNGWrapper(e,t),I.pull=R.pull}function D(){return R?R.random():Math.random()}function M(){F={},TempVariables=F}function N(){return F}var L=[],I=c(),Q=-1,W=[],R=null,F={};return Object.freeze(Object.defineProperties({},{reset:{value:e},restore:{value:t},marshalForSave:{value:a},unmarshalForSave:{value:i},expired:{get:o},turns:{get:s},passages:{get:u},hasPlayed:{value:l},active:{get:d},activeIndex:{get:f},passage:{get:p},variables:{get:h},history:{get:m},length:{get:v},size:{get:y},isEmpty:{value:b},current:{get:w},top:{get:k},bottom:{get:S},index:{value:E},peek:{value:x},has:{value:j},create:{value:C},goTo:{value:O},go:{value:T},deltaEncode:{value:A},deltaDecode:{value:P},initPRNG:{value:_},random:{value:D},clearTemporary:{value:M},temporary:{get:N},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Story=function(){function e(){function e(e){if(e.tags.includesAny(n))throw new Error('starting passage "'+e.title+'" contains illegal tags; invalid: "'+e.tags.filter(function(e){return n.includes(e)}).sort().join('", "')+'"')}function t(e){if(a.includes(e.title)&&e.tags.includesAny(n))throw new Error('special passage "'+e.title+'" contains illegal tags; invalid: "'+e.tags.filter(function(e){return n.includes(e)}).sort().join('", "')+'"')}var n=["widget"],a=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"];!function(){var n=jQuery("#store-area>tw-storydata"),a=n.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test(n.attr("options")),n.children("style").each(function(e){d.push(new Passage("tw-user-style-"+e,this))}),n.children("script").each(function(e){f.push(new Passage("tw-user-script-"+e,this))}),n.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each(function(){var r=jQuery(this),n=r.attr("pid")||"",i=new Passage(r.attr("name"),this);n===a&&""!==a?(Config.passages.start=i.title,e(i),c[i.title]=i):i.tags.includes("widget")?p.push(i):(t(i),c[i.title]=i)}),g=n.attr("ifid"),r(Util.unescape("Lux")),Config.saves.id=Story.domId}()}function t(){!function(){var e=document.createElement("style");new StyleWrapper(e).add(d.map(function(e){return e.text.trim()}).join("\n")),jQuery(e).appendTo(document.head).attr({id:"style-story",type:"text/css"})}();for(var e=0;e<f.length;++e)try{Scripting.evalJavaScript(f[e].text)}catch(t){Alert.error(f[e].title,"object"===("undefined"==typeof t?"undefined":_typeof(t))?t.message:t)}for(var t=0;t<p.length;++t)try{Wikifier.wikifyEval(p[t].processText())}catch(e){Alert.error(p[t].title,"object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e)}}function r(e){if(null==e||""===e)throw new Error("story title cannot be null or empty");document.title=h=Util.unescape(e),m=Util.slugify(h)}function n(){return h}function a(){return m}function i(){return g}function o(e){var t="undefined"==typeof e?"undefined":_typeof(e);switch(t){case"number":case"string":var r=String(e);return c.hasOwnProperty(r);case"boolean":case"function":t="a "+t;break;case"undefined":break;default:t=null===e?"null":"an "+t}throw new TypeError("Story.has title parameter cannot be "+t)}function s(e){var t="undefined"==typeof e?"undefined":_typeof(e);switch(t){case"number":case"string":var r=String(e);return c.hasOwnProperty(r)?c[r]:new Passage(r||"(unknown)");case"boolean":case"function":t="a "+t;break;case"undefined":break;default:t=null===e?"null":"an "+t}throw new TypeError("Story.get title parameter cannot be "+t)}function u(e,t){for(var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",n=Object.keys(c),a=[],i=0;i<n.length;++i){var o=c[n[i]];if(o.hasOwnProperty(e))switch(_typeof(o[e])){case"undefined":break;case"object":for(var s=0,u=o[e].length;s<u;++s)if(o[e][s]==t){a.push(o);break}break;default:o[e]==t&&a.push(o)}}return a.sort(function(e,t){return e[r]==t[r]?0:e[r]<t[r]?-1:1}),a}function l(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof e)throw new Error("Story.lookupWith filter parameter must be a function");for(var r=Object.keys(c),n=[],a=0;a<r.length;++a){var i=c[r[a]];e(i)&&n.push(i)}return n.sort(function(e,r){return e[t]==r[t]?0:e[t]<r[t]?-1:1}),n}var c={},d=[],f=[],p=[],h="",g="",m="";return Object.freeze(Object.defineProperties({},{passages:{value:c},styles:{value:d},scripts:{value:f},widgets:{value:p},load:{value:e},init:{value:t},title:{get:n},domId:{get:a},ifId:{get:i},has:{value:o},get:{value:s},lookup:{value:u},lookupWith:{value:l}}))}(),UI=function(){function e(e,t){var r=t,n=Config.debug;Config.debug=!1;try{null==r&&(r=document.createElement("ul"));var a=document.createDocumentFragment();if(new Wikifier(a,Story.get(e).processText().trim()),a.hasChildNodes())for(var i=null;a.hasChildNodes();){var o=a.firstChild;o.nodeType!==Node.ELEMENT_NODE||"A"!==o.nodeName.toUpperCase()?(a.removeChild(o),null!==i&&(i=null)):(null===i&&(i=document.createElement("li"),r.appendChild(i)),i.appendChild(o))}}finally{Config.debug=n}return r}function t(e){jQuery(Dialog.setup("Alert","alert")).append("<p>"+e+'</p><ul class="buttons">'+('<li><button id="alert-ok" class="ui-close">'+L10n.get(["alertOk","ok"])+"</button></li>")+"</ul>");for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Dialog.open.apply(Dialog,r)}function r(){u(),Dialog.open.apply(Dialog,arguments)}function n(){l(),Dialog.open.apply(Dialog,arguments)}function a(){c(),Dialog.open.apply(Dialog,arguments)}function i(){d(),Dialog.open.apply(Dialog,arguments)}function o(){f(),Dialog.open.apply(Dialog,arguments)}function s(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>"+L10n.get("autoloadPrompt")+'</p><ul class="buttons">'+('<li><button id="autoload-ok" class="ui-close">'+L10n.get(["autoloadOk","ok"])+"</button></li>")+('<li><button id="autoload-cancel" class="ui-close">'+L10n.get(["autoloadCancel","cancel"])+"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",function(e){var t="autoload-ok"===e.target.id;jQuery(document).one(":dialogclose",function(){t&&Save.autosave.load()||Engine.play(Config.passages.start)})}),!0}function u(){var e=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(e);for(var t=State.expired.length,r=State.size-1;r>=0;--r)if(r!==State.activeIndex){var n=Story.get(State.history[r].title);n&&n.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(e){return function(){return jQuery(document).one(":dialogclose",function(){return Engine.goTo(e)})}}(r)).addClass("ui-close").text(L10n.get("jumptoTurn")+" "+(t+r+1)+": "+n.description())).appendTo(e)}e.hasChildNodes()||jQuery(e).append("<li><a><em>"+L10n.get("jumptoUnavailable")+"</em></a></li>")}function l(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>"+L10n.get("restartPrompt")+'</p><ul class="buttons">'+('<li><button id="restart-ok">'+L10n.get(["restartOk","ok"])+"</button></li>")+('<li><button id="restart-cancel" class="ui-close">'+L10n.get(["restartCancel","cancel"])+"</button></li>")+"</ul>").find("#restart-ok").ariaClick({one:!0},function(){jQuery(document).one(":dialogclose",function(){return Engine.restart()}),Dialog.close()}),!0}function c(){function e(e,t,r,n){var a=jQuery(document.createElement("button")).attr("id","saves-"+e).html(r);return t&&a.addClass(t),n?a.ariaClick(n):a.prop("disabled",!0),jQuery(document.createElement("li")).append(a)}function r(){function e(e,t,r,n,a){var i=jQuery(document.createElement("button")).attr("id","saves-"+e+"-"+n).addClass(e).html(r);return t&&i.addClass(t),a?"auto"===n?i.ariaClick({label:r+" "+L10n.get("savesLabelAuto")},function(){return a()}):i.ariaClick({label:r+" "+L10n.get("savesLabelSlot")+" "+(n+1)},function(){return a(n)}):i.prop("disabled",!0),i}var t=Save.get(),r=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var n=jQuery(document.createElement("td")),a=jQuery(document.createElement("td")),i=jQuery(document.createElement("td")),o=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo(n),t.autosave?(a.append(e("load","ui-close",L10n.get("savesLabelLoad"),"auto",function(){jQuery(document).one(":dialogclose",function(){return Save.autosave.load()})})),jQuery(document.createElement("div")).text(t.autosave.title).appendTo(i),jQuery(document.createElement("div")).addClass("datestamp").html(t.autosave.date?L10n.get("savesSavedOn")+" "+new Date(t.autosave.date).toLocaleString():L10n.get("savesSavedOn")+" <em>"+L10n.get("savesUnknownDate")+"</em>").appendTo(i),o.append(e("delete",null,L10n.get("savesLabelDelete"),"auto",function(){Save.autosave.delete(),c(),Dialog.resize()}))):(a.append(e("load",null,L10n.get("savesLabelLoad"),"auto")),jQuery(document.createElement("em")).text(L10n.get("savesEmptySlot")).appendTo(i),i.addClass("empty"),o.append(e("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append(n).append(a).append(i).append(o).appendTo(r)}for(var s=0,u=t.slots.length;s<u;++s){var l=jQuery(document.createElement("td")),d=jQuery(document.createElement("td")),f=jQuery(document.createElement("td")),p=jQuery(document.createElement("td"));l.append(document.createTextNode(s+1)),t.slots[s]?(d.append(e("load","ui-close",L10n.get("savesLabelLoad"),s,function(e){jQuery(document).one(":dialogclose",function(){return Save.slots.load(e)})})),jQuery(document.createElement("div")).text(t.slots[s].title).appendTo(f),jQuery(document.createElement("div")).addClass("datestamp").html(t.slots[s].date?L10n.get("savesSavedOn")+" "+new Date(t.slots[s].date).toLocaleString():L10n.get("savesSavedOn")+" <em>"+L10n.get("savesUnknownDate")+"</em>").appendTo(f),p.append(e("delete",null,L10n.get("savesLabelDelete"),s,function(e){Save.slots.delete(e),c(),Dialog.resize()}))):(d.append(e("save","ui-close",L10n.get("savesLabelSave"),s,Save.slots.save)),jQuery(document.createElement("em")).text(L10n.get("savesEmptySlot")).appendTo(f),f.addClass("empty"),p.append(e("delete",null,L10n.get("savesLabelDelete"),s))),jQuery(document.createElement("tr")).append(l).append(d).append(f).append(p).appendTo(r)}return jQuery(document.createElement("table")).attr("id","saves-list").append(r)}var n=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),a=Save.ok();if(a&&n.append(r()),a||Has.fileAPI){var i=jQuery(document.createElement("ul")).addClass("buttons").appendTo(n);return Has.fileAPI&&(i.append(e("export","ui-close",L10n.get("savesLabelExport"),function(){return Save.export()})),i.append(e("import",null,L10n.get("savesLabelImport"),function(){return n.find("#saves-import-file").trigger("click")})),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",function(e){jQuery(document).one(":dialogclose",function(){return Save.import(e)}),Dialog.close()}).appendTo(n)),a&&i.append(e("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),c(),Dialog.resize()}:null)),!0}return t(L10n.get("savesIncapable")),!1}function d(){var e=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach(function(t){if(t.type===Setting.Types.Header){var r=t.name,n=Util.slugify(r),a=jQuery(document.createElement("div")),i=jQuery(document.createElement("h2")),o=jQuery(document.createElement("p"));return a.attr("id","header-body-"+n).append(i).append(o).appendTo(e),i.attr("id","header-heading-"+n).wiki(r),void o.attr("id","header-label-"+n).wiki(t.label)}var s=t.name,u=Util.slugify(s),l=jQuery(document.createElement("div")),c=jQuery(document.createElement("label")),d=jQuery(document.createElement("div")),f=void 0;switch(l.attr("id","setting-body-"+u).append(c).append(d).appendTo(e),c.attr({id:"setting-label-"+u,for:"setting-control-"+u}).wiki(t.label),null==settings[s]&&(settings[s]=t.default),t.type){case Setting.Types.Toggle:f=jQuery(document.createElement("button")),settings[s]?f.addClass("enabled").text(L10n.get("settingsOn")):f.text(L10n.get("settingsOff")),f.ariaClick(function(){settings[s]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[s]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[s]=!0),Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:s,value:settings[s],default:t.default})});break;case Setting.Types.List:f=jQuery(document.createElement("select"));for(var p=0,h=t.list.length;p<h;++p)jQuery(document.createElement("option")).val(p).text(t.list[p]).appendTo(f);f.val(t.list.indexOf(settings[s])).attr("tabindex",0).on("change",function(){settings[s]=t.list[Number(this.value)],Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:s,value:settings[s],default:t.default,list:t.list})})}f.attr("id","setting-control-"+u).appendTo(d)}),e.append('<ul class="buttons">'+('<li><button id="settings-ok" class="ui-close">'+L10n.get(["settingsOk","ok"])+"</button></li>")+('<li><button id="settings-reset">'+L10n.get("settingsReset")+"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},function(){jQuery(document).one(":dialogclose",function(){Setting.reset(),window.location.reload()}),Dialog.close()}),!0}function f(){return jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(e("StoryShare")),!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:e},alert:{value:t},jumpto:{value:r},restart:{value:n},saves:{value:a},settings:{value:i},share:{value:o},buildAutoload:{value:s},buildJumpto:{value:u},buildRestart:{value:l},buildSaves:{value:c},buildSettings:{value:d},buildShare:{value:f},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.setStoryElements()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:s},buildDialogJumpto:{value:u},buildDialogRestart:{value:l},buildDialogSaves:{value:c},buildDialogSettings:{value:d},buildDialogShare:{value:f},buildLinkListFromPassage:{value:e}}))}(),UIBar=function(){function e(){o||document.getElementById("ui-bar")||(!function(){var e=L10n.get("uiBarToggle"),t=L10n.get("uiBarBackward"),r=L10n.get("uiBarJumpto"),n=L10n.get("uiBarForward");jQuery(document.createDocumentFragment()).append('<div id="ui-bar"><div id="ui-bar-tray">'+('<button id="ui-bar-toggle" tabindex="0" title="'+e+'" aria-label="'+e+'"></button>')+'<div id="ui-bar-history">'+('<button id="history-backward" tabindex="0" title="'+t+'" aria-label="'+t+'"></button>')+('<button id="history-jumpto" tabindex="0" title="'+r+'" aria-label="'+r+'"></button>')+('<button id="history-forward" tabindex="0" title="'+n+'" aria-label="'+n+'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+('<li id="menu-item-saves"><a tabindex="0">'+L10n.get("savesTitle")+"</a></li>")+('<li id="menu-item-settings"><a tabindex="0">'+L10n.get("settingsTitle")+"</a></li>")+('<li id="menu-item-restart"><a tabindex="0">'+L10n.get("restartTitle")+"</a></li>")+('<li id="menu-item-share"><a tabindex="0">'+L10n.get("shareTitle")+"</a></li>")+"</ul></nav></div></div>").insertBefore("#store-area")}(),jQuery(document).on(":historyupdate.ui-bar",function(e,t){return function(){e.prop("disabled",State.length<2),t.prop("disabled",State.length===State.size)}}(jQuery("#history-backward"),jQuery("#history-forward"))))}function t(){if(!o){var e=jQuery("#ui-bar");("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&!function(){var t=jQuery(e).add("#story");t.addClass("no-transition"),e.addClass("stowed"),setTimeout(function(){return t.removeClass("no-transition")},Engine.minDomActionDelay)}(),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},function(){return e.toggleClass("stowed")}),Config.history.controls?(jQuery("#history-backward").prop("disabled",State.length<2).ariaClick({label:L10n.get("uiBarBackward")},function(){return Engine.backward()}),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},function(){return UI.jumpto()}):jQuery("#history-jumpto").remove(),jQuery("#history-forward").prop("disabled",State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},function(){return Engine.forward()})):jQuery("#ui-bar-history").remove(),jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||i(),Dialog.addClickHandler("#menu-item-saves a",null,UI.buildSaves).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():Dialog.addClickHandler("#menu-item-settings a",null,UI.buildSettings).text(L10n.get("settingsTitle")),Dialog.addClickHandler("#menu-item-restart a",null,UI.buildRestart).text(L10n.get("restartTitle")),Story.has("StoryShare")?Dialog.addClickHandler("#menu-item-share a",null,UI.buildShare).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove()}}function r(){o||(jQuery(document).off(".ui-bar"),jQuery("#ui-bar").remove(),jQuery(document.head).find("#style-ui-bar").remove(),Config.ui.updateStoryElements=!1,o=!0)}function n(){o||jQuery("#ui-bar").addClass("stowed")}function a(){o||jQuery("#ui-bar").removeClass("stowed")}function i(){if(!o){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var e=document.getElementById("menu-story");null!==e&&(jQuery(e).empty(),Story.has("StoryMenu")&&UI.assembleLinkList("StoryMenu",e))}}var o=!1;return Object.freeze(Object.defineProperties({},{init:{value:e},start:{value:t},destroy:{value:r},stow:{value:n},unstow:{value:a},setStoryElements:{value:i}}))}(),LoadScreen=function(){function e(){jQuery(document).on("readystatechange.SugarCube",function(){o.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout(function(){0===o.size&&r()},Math.max(Engine.minDomActionDelay,Config.loadDelay)):r()):n())})}function t(){jQuery(document).off("readystatechange.SugarCube"),o.clear(),r()}function r(){jQuery(document.documentElement).removeAttr("data-init")}function n(){jQuery(document.documentElement).attr("data-init","loading")}function a(){return++s,o.add(s),n(),s}function i(e){if(null==e)throw new Error("LoadScreen.unlock called with a null or undefined ID");o.has(e)&&o.delete(e),0===o.size&&jQuery(document).trigger("readystatechange")}var o=new Set,s=0;return Object.freeze(Object.defineProperties({},{init:{value:e},clear:{value:t},hide:{value:r},show:{value:n},lock:{value:a},unlock:{value:i}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:18,patch:0,prerelease:null,build:7982,date:new Date("2017-04-26T15:27:50.743Z"),extensions:{},toString:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.major+"."+this.minor+"."+this.patch+e+"+"+this.build},short:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.title+" (v"+this.major+"."+this.minor+"."+this.patch+e+")"},long:function(){return this.title+" v"+this.toString()+" ("+this.date.toUTCString()+")"}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery(function(){try{var e=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),UIBar.start(),window.SugarCube={Browser:Browser,Config:Config,Dialog:Dialog,DebugView:DebugView,Engine:Engine,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,Util:Util,Wikifier:Wikifier,macros:macros,session:session,settings:settings,setup:setup,storage:storage,version:version},LoadScreen.unlock(e)}catch(e){return LoadScreen.clear(),Alert.fatal(null,e.message,e)}})}(window,window.document,jQuery);}
	</script>


<div id="diigo-video-capture" style="display: none;"><div id="diigo-video-capture-container"><div id="diigo-video-capture-logo"></div>Capture</div></div><div id="diigo-video-capture-wrapper"><div id="diigo-video-capture-wrapper-tip">Drag to outliner or <span id="diigo-video-capture-upload">Upload</span></div><div id="diigo-video-capture-wrapper-close">Close</div></div><div id="diigo-chrome-installed" style="display: none;"></div></body></html>